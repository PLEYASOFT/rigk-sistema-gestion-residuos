"use strict";(self.webpackChunkrigk_sg_web=self.webpackChunkrigk_sg_web||[]).push([[311],{7311:(dt,f,_)=>{_.r(f),_.d(f,{ConsumerStatementModule:()=>ct});var p=_(6895),m=_(2045),A=_(2730),E=_(5226),h=_.n(E),t=_(8256),b=_(9821),v=_(554),c=_(433),T=_(8446);function C(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-multiSelect",14),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedEstablishment=o)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("options",e.establishments)("ngModel",e.selectedEstablishment)("selectionLimit",1)("selectedItemsLabel","{0} Empresas seleccionadas")}}function F(n,r){if(1&n&&(t.TgZ(0,"h4"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Establecimiento: ",e.establishment,"")}}function U(n,r){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function y(n,r){1&n&&t._UZ(0,"td",27)}function q(n,r){1&n&&t._UZ(0,"td",27)}function S(n,r){1&n&&t._UZ(0,"td",27)}function w(n,r){1&n&&t._UZ(0,"td",28)}function N(n,r){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function I(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"input",30),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.updateVal(s,a.id,o.target))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw().index,o=t.oxw();t.xp6(1),t.hYB("id","inp_1_",i,"_",e.id,""),t.Q6J("disabled",o.disableAll)}}function M(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"input",31),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.updateDate(s,a.id,o.target))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw().index,o=t.oxw();t.xp6(1),t.hYB("id","inp_2_",i,"_",e.id,""),t.Q6J("disabled",o.disableAll)}}function J(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"select",32),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.updateGestor(s,a.id,o.target))}),t.TgZ(2,"option",33),t._uU(3,"Seleccione"),t.qZA(),t.TgZ(4,"option",34),t._uU(5,"Reciclaje Interno"),t.qZA(),t.TgZ(6,"option",35),t._uU(7,"Gestor 1"),t.qZA(),t.TgZ(8,"option",36),t._uU(9,"Gestor 2"),t.qZA(),t.TgZ(10,"option",37),t._uU(11,"Gestor 3"),t.qZA()()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw().index,o=t.oxw();t.xp6(1),t.hYB("id","inp_3_",i,"_",e.id,""),t.Q6J("disabled",o.disableAll)}}function Y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"input",42),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.uploadFile(s,a.id,o.target,1))}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("disabled",e.disableAll)}}function O(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.downloadFile(1))}),t._UZ(1,"i",44),t.qZA()}}function P(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"select",38),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.updateType(s,a.id,o.target,1))}),t.TgZ(2,"option",39),t._uU(3,"Seleccione Tipo M.V"),t.qZA(),t.TgZ(4,"option",34),t._uU(5,"Factura"),t.qZA(),t.TgZ(6,"option",35),t._uU(7,"Gu\xeda de Despacho"),t.qZA(),t.TgZ(8,"option",36),t._uU(9,"Medios Visuales"),t.qZA()(),t.YNc(10,Y,1,1,"input",40),t.YNc(11,O,2,0,"button",41),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw().index,o=t.oxw();t.xp6(1),t.hYB("id","inp_f_1_",i,"_",e.id,""),t.Q6J("disabled",o.disableAll),t.xp6(9),t.Q6J("ngIf",!o.disableAll),t.xp6(1),t.Q6J("ngIf",o.disableAll)}}function D(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"input",42),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.uploadFile(s,a.id,o.target,2))}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("disabled",e.disableAll)}}function R(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.downloadFile(2))}),t._UZ(1,"i",44),t.qZA()}}function k(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"select",38),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.updateType(s,a.id,o.target,2))}),t.TgZ(2,"option",39),t._uU(3,"Seleccione Tipo M.V"),t.qZA(),t.TgZ(4,"option",34),t._uU(5,"Factura"),t.qZA(),t.TgZ(6,"option",35),t._uU(7,"Gu\xeda de Despacho"),t.qZA(),t.TgZ(8,"option",36),t._uU(9,"Medios Visuales"),t.qZA()(),t.YNc(10,D,1,1,"input",40),t.YNc(11,R,2,0,"button",41),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw().index,o=t.oxw();t.xp6(1),t.hYB("id","inp_f_2_",i,"_",e.id,""),t.Q6J("disabled",o.disableAll),t.xp6(9),t.Q6J("ngIf",!o.disableAll),t.xp6(1),t.Q6J("ngIf",o.disableAll)}}function Q(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"input",42),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.uploadFile(s,a.id,o.target,3))}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("disabled",e.disableAll)}}function $(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.downloadFile(3))}),t._UZ(1,"i",44),t.qZA()}}function L(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"select",38),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw().index,l=t.oxw();return t.KtG(l.updateType(s,a.id,o.target,3))}),t.TgZ(2,"option",39),t._uU(3,"Seleccione Tipo M.V"),t.qZA(),t.TgZ(4,"option",34),t._uU(5,"Factura"),t.qZA(),t.TgZ(6,"option",35),t._uU(7,"Gu\xeda de Despacho"),t.qZA(),t.TgZ(8,"option",36),t._uU(9,"Medios Visuales"),t.qZA()(),t.YNc(10,Q,1,1,"input",40),t.YNc(11,$,2,0,"button",41),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw().index,o=t.oxw();t.xp6(1),t.hYB("id","inp_f_3_",i,"_",e.id,""),t.Q6J("disabled",o.disableAll),t.xp6(9),t.Q6J("ngIf",!o.disableAll),t.xp6(1),t.Q6J("ngIf",o.disableAll)}}function B(n,r){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,U,2,1,"td",24),t.YNc(2,y,1,0,"td",24),t.YNc(3,q,1,0,"td",24),t.YNc(4,S,1,0,"td",24),t.YNc(5,w,1,0,"td",25),t.YNc(6,N,2,1,"td",26),t.YNc(7,I,2,3,"td",11),t.YNc(8,M,2,3,"td",11),t.YNc(9,J,12,3,"td",11),t.YNc(10,P,12,5,"td",11),t.YNc(11,k,12,5,"td",11),t.YNc(12,L,12,5,"td",11),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",e.id)}}function H(n,r){if(1&n&&(t.TgZ(0,"div",15)(1,"h2",16),t._uU(2),t.qZA(),t.TgZ(3,"table",17)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Material"),t.qZA(),t.TgZ(8,"th")(9,"span",18),t._uU(10,"Kilogramos"),t.qZA(),t.TgZ(11,"span",19),t._uU(12,"Kg."),t.qZA()(),t.TgZ(13,"th")(14,"span",18),t._uU(15,"Fecha de retiro"),t.qZA(),t.TgZ(16,"span",19),t._uU(17,"Fec. de retiro"),t.qZA()(),t.TgZ(18,"th"),t._uU(19,"Gestor"),t.qZA(),t.TgZ(20,"th",20),t._uU(21,"Medios de verificaci\xf3n"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,B,13,12,"tr",21),t.qZA(),t.TgZ(24,"tfoot")(25,"tr")(26,"td",22),t._uU(27,"TOTAL:"),t.qZA(),t.TgZ(28,"td",23),t._uU(29),t.ALo(30,"number"),t.qZA()()()()()),2&n){const e=r.$implicit,i=r.index,o=t.oxw();t.xp6(2),t.hij(" ",e,""),t.xp6(21),t.Q6J("ngForOf",o.materials),t.xp6(6),t.Oqu(t.xi3(30,3,o.total_tables[i],"1.2-2"))}}function G(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveForm())}),t._uU(1,"Enviar"),t.qZA()}}let Z=(()=>{class n{constructor(e,i,o,a){this.establishmentService=e,this.consumerService=i,this.router=o,this.actived=a,this.materials=[{name:"Papel/Cart\xf3n"},{id:1,name:"Papel"},{id:2,name:"Papel Compuesto (cemento)"},{id:3,name:"Caja Cart\xf3n"},{id:4,name:"Otro"},{name:"Metal"},{id:5,name:"Envase Aluminio"},{id:6,name:"Malla o Reja (IBC)"},{id:7,name:"Envase Hojalata"},{id:8,name:"Otro"},{name:"Pl\xe1stico Total"},{id:9,name:"Pl\xe1stico Film Embalaje"},{id:10,name:"Pl\xe1stico Envases R\xedgidos (Incl. Tapas)"},{id:11,name:"Pl\xe1stico Sacos o Maxisacos"},{id:12,name:"Pl\xe1stico EPS (Poliestireno Expandido)"},{id:13,name:"Pl\xe1stico Zuncho"},{id:14,name:"Otro"},{name:"Madera"},{id:15,name:"Caja de Madera"},{id:16,name:"Pallet de Madera"}],this.disableAll=!1,this.tables=["Reciclaje Mec\xe1nico","Valorizaci\xf3n Energ\xe9tica","Disposici\xf3n Final en RS"],this.total_tables=[0,0,0],this.id_establishment=-1,this.establishments=[],this.selectedEstablishment=[],this.attached=[],this.id_business="0",this.year_statement=0,this.establishment="",this._files=[],this.data=[],this.actived.data.subscribe(s=>{s.show?(this.loadForm(this.actived.snapshot.params.id),this.disableAll=!0):this.actived.queryParams.subscribe(l=>{this.id_business=l.id_business,this.year_statement=l.year,this.loadEstablishments()})})}ngOnInit(){}loadForm(e){this.consumerService.getForm(e).subscribe({next:i=>{const{header:o,detail:a,attached:s}=i.data;this.id_business=o.ID_BUSINESS,this.establishment=o.NAME_ESTABLISHMENT;for(let u=0;u<a.length;u++){const d=a[u];document.getElementById(`inp_1_${d.PRECEDENCE}_${d.TYPE_RESIDUE}`).value=d.VALUE.toString().replace(".",","),document.getElementById(`inp_2_${d.PRECEDENCE}_${d.TYPE_RESIDUE}`).value=d.DATE_WITHDRAW.split("T")[0],document.getElementById(`inp_3_${d.PRECEDENCE}_${d.TYPE_RESIDUE}`).value=d.ID_GESTOR,this.total_tables[d.PRECEDENCE]+=d.VALUE}for(let u=0;u<s.length;u++){const d=s[u];for(let g=0;g<3;g++){const x=g;if("0"==document.getElementById(`inp_f_${x+1}_${d.PRECEDENCE}_${d.TYPE_RESIDUE}`).value){document.getElementById(`inp_f_${x+1}_${d.PRECEDENCE}_${d.TYPE_RESIDUE}`).value=d.TYPE_FILE;break}}}}})}loadEstablishments(){"0"!=this.id_business&&this.establishmentService.getEstablishment(this.id_business.toString()).subscribe({next:e=>{this.establishments=[],e.status.forEach(i=>{i.name=`${i.NAME_ESTABLISHMENT} - ${i.REGION}`,this.establishments.push(i)})}})}updateVal(e,i,o){if(-1!=o.value.indexOf("."))return void(o.value=0);/^[0-9]+(,[0-9]+)?$/.test(o.value)||(o.value=0);let s=parseFloat(o.value.replace(",","."));(!o.value||isNaN(s)||s<0)&&(s=0,o.value=0);const l=this.data.find(u=>u?.residue==i&&u?.table==e);l?l.val=s:this.data.push({table:e,residue:i,val:s,date_withdraw:"",id_gestor:0}),this.total_tables[e]=0,this.data.forEach(u=>{this.total_tables[e]+=u.val})}updateGestor(e,i,o){const a=this.data.find(s=>s?.residue==i&&s?.table==e);a?a.id_gestor=o.value:this.data.push({table:e,residue:i,id_gestor:o.value,date_withdraw:"",val:0})}updateDate(e,i,o){const a=this.data.find(s=>s?.residue==i&&s?.table==e);a?a.date_withdraw=o.value:this.data.push({table:e,residue:i,date_withdraw:o.value,id_gestor:0,val:0})}uploadFile(e,i,o,a){const s=this.attached.findIndex(l=>l.col==a&&l.table==e&&l.residue==i);-1==s?this.attached.push({table:e,residue:i,col:a,type:this.attached[s]?.type||0,file:o.files[0]}):this.attached[s].file=o.files[0]}updateType(e,i,o,a){const s=this.attached.findIndex(l=>l.col==a&&l.table==e&&l.residue==i);-1==s?this.attached.push({table:e,residue:i,col:a,file:null,type:o.value}):this.attached[s].type=o.value}saveForm(){if(0==this.data.length)return;let e=null;(!this.selectedEstablishment[0]||0==this.selectedEstablishment[0])&&(e=!0);for(let a=0;a<this.data.length;a++){const s=this.data[a];(0==s.val&&(""!=s.date_withdraw||s.id_gestor>0)||s.val>0&&(""==s.date_withdraw||0==s.id_gestor))&&(e=1)}for(let a=0;a<this.attached.length;a++){const s=this.attached[a];(0==s.type&&null!=s.file||s.type>0&&null==s.file)&&(e=2)}e?h().fire({icon:"error",text:1==e?"Datos incompletos":"Medios de verificaci\xf3n incompletos"}):this.consumerService.save({header:{year:this.year_statement,establishment:this.selectedEstablishment[0]},detail:{data:this.data,attached:this.attached},attached:this.attached}).subscribe({next:a=>{a.status&&(h().fire({icon:"success",text:"Declaraci\xf3n guardada satisfactoriamente"}),this.router.navigate(["/consumidor"]))}})}downloadFile(e){if(this._files[e-1]){const s=this._files[e-1];var i=new Blob([new Uint8Array(s.FILE.data)],{type:"Buffer"}),o=document.createElement("a");o.href=window.URL.createObjectURL(i),o.download=s.FILE_NAME,o.click()}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.d),t.Y36(v.h),t.Y36(m.F0),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-form"]],decls:18,vars:4,consts:[["id",""],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"formulario-ci"],[1,"row","mb-3"],[1,"col-md-5"],["optionLabel","name","optionValue","ID_ESTABLISHMENT","defaultLabel","Seleccione Establecimiento",3,"options","ngModel","selectionLimit","selectedItemsLabel","ngModelChange",4,"ngIf"],[4,"ngIf"],["class","table-responsive mb-4",4,"ngFor","ngForOf"],["class","btn btn-primary px-5 mb-4",3,"click",4,"ngIf"],["optionLabel","name","optionValue","ID_ESTABLISHMENT","defaultLabel","Seleccione Establecimiento",3,"options","ngModel","selectionLimit","selectedItemsLabel","ngModelChange"],[1,"table-responsive","mb-4"],[1,"table-header-div","table-header-div-blue"],[1,"table","table-even","table-section","table-borderless","table-border","table-header-green","table-align-middle","text-nowrap"],[1,"d-none","d-lg-block"],[1,"d-lg-none"],["colspan","3"],[4,"ngFor","ngForOf"],["colspan","1"],["colspan","7"],["style","background-color: lightgray;",4,"ngIf"],["colspan","3","style","background-color: lightgray;",4,"ngIf"],["style","padding-left: 20px;",4,"ngIf"],[2,"background-color","lightgray"],["colspan","3",2,"background-color","lightgray"],[2,"padding-left","20px"],["type","text","value","0",1,"form-control","form-control-sm","text-end","w-50px",3,"disabled","id","change"],["type","date","placeholder","00/00/0000",1,"form-control","text-start","w-auto",3,"disabled","id","change"],[1,"form-select","w-auto",3,"disabled","id","change"],["value","0","selected",""],["value","1"],["value","2"],["value","3"],["value","4"],[1,"form-select",3,"id","disabled","change"],["value","0"],["type","file","class","form-control",3,"disabled","change",4,"ngIf"],["class","btn  btn-sm",3,"click",4,"ngIf"],["type","file",1,"form-control",3,"disabled","change"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-file-pdf-o","fa-fw","fa-lg","color-blue"],[1,"btn","btn-primary","px-5","mb-4",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),t._UZ(5,"i",5),t._uU(6," Inicio"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Formulario CI"),t.qZA()()(),t.TgZ(9,"section",7)(10,"h1"),t._uU(11,"Formulario CI"),t.qZA(),t.TgZ(12,"div",8)(13,"div",9),t.YNc(14,C,1,4,"p-multiSelect",10),t.YNc(15,F,2,1,"h4",11),t.qZA()(),t.YNc(16,H,31,6,"div",12),t.YNc(17,G,2,0,"button",13),t.qZA()()),2&e&&(t.xp6(14),t.Q6J("ngIf",!i.disableAll),t.xp6(1),t.Q6J("ngIf",i.disableAll),t.xp6(1),t.Q6J("ngForOf",i.tables),t.xp6(1),t.Q6J("ngIf",!i.disableAll))},dependencies:[p.sg,p.O5,c.YN,c.Kr,c.JJ,c.On,T.NU,p.JJ],styles:["[_nghost-%COMP%]{width:90%!important;padding:1%}"]}),n})();var K=_(2227);function j(n,r){if(1&n&&(t.TgZ(0,"li")(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.price)}}let V=(()=>{class n{constructor(e){this.ratesService=e,this.types=["EyE reciclables de papel/cart\xf3n","EyE reciclables de metal","EyE reciclables de pl\xe1sticos","EyE no reciclables"],this.year=(new Date).getFullYear(),this.rates=[]}ngOnInit(){this.ratesService.getRates(this.year).subscribe(e=>{e.status&&e.data.forEach(i=>{this.rates.push({name:this.types[i.type-1],price:i.price})})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(K.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:45,vars:1,consts:[["id","content"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item"],["aria-hidden","true",1,"fa","fa-home"],[1,"inicio"],[1,"box","box-inicio"],[1,"row"],[1,"col-12","col-md-7"],[1,"h1"],["href","tel:+56998172845",1,"color-white"],["href","mailto:contacto@prorep.cl",1,"color-white"],[1,"col-12","col-md-5"],[1,"pt-4","pt-md-0","mt-3","mt-md-0","border-top","border-top-md-0"],[1,"list","list-tarifas","list-unstyled"],[1,"text-end","d-block","bg-blue","color-white"],[4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()()(),t.TgZ(6,"section",5)(7,"h1"),t._uU(8,"Inicio"),t.qZA(),t.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"h2",9),t._uU(13,"Bienvenida a mi declaraci\xf3n"),t.qZA(),t.TgZ(14,"p"),t._uU(15,"Como parte de las obligaciones que establece la Ley REP, los Productores deben informar la cantidad de EyE no domiciliarios (POM) puestos en el mercado el a\xf1o anterior."),t.qZA(),t.TgZ(16,"p"),t._uU(17,"ProREP pone a disposici\xf3n de sus socios la plataforma de declaraci\xf3n que dar\xe1 cumplimiento a la obligaci\xf3n de informar sus EyE."),t.qZA(),t.TgZ(18,"p"),t._uU(19,"La informaci\xf3n deber\xe1 subirse hasta el 15 de marzo del 2023."),t.qZA(),t.TgZ(20,"p"),t._uU(21,"En caso de tener dudas con respecto a su declaraci\xf3n puede ver los tutoriales y preguntas frecuentes."),t.qZA(),t.TgZ(22,"h2",9),t._uU(23,"Contacto:"),t.qZA(),t.TgZ(24,"p")(25,"strong"),t._uU(26,"\xbfAlguna pregunta?"),t.qZA(),t._uU(27," P\xf3ngase en contacto con nuestro equipo de atenci\xf3n al cliente."),t.qZA(),t.TgZ(28,"p"),t._uU(29,"Celular "),t.TgZ(30,"strong")(31,"a",10),t._uU(32,"+56 9 98172845"),t.qZA()(),t._uU(33," y mail "),t.TgZ(34,"strong")(35,"a",11),t._uU(36,"contacto@prorep.cl"),t.qZA()()()(),t.TgZ(37,"div",12)(38,"div",13)(39,"p"),t._uU(40,"Las tarifas por subcategor\xeda son de car\xe1cter anual por lo que estar\xe1n vigentes por todo el a\xf1o 2023."),t.qZA(),t.TgZ(41,"ul",14)(42,"li",15),t._uU(43,"Tarifas por tonelada (UF)"),t.qZA(),t.YNc(44,j,5,2,"li",16),t.qZA()()()()()()()),2&e&&(t.xp6(44),t.Q6J("ngForOf",i.rates))},dependencies:[p.sg]}),n})();var z=_(263);let X=(()=>{class n{constructor(e,i,o){this.fb=e,this.authService=i,this.router=o,this.pos="right",this.horaIngreso=new Date,this.formData=this.fb.group({actual:["",[c.kI.required]],password:["",[c.kI.required,c.kI.minLength(3)]],repeatPassword:["",[c.kI.required,c.kI.minLength(3)]]})}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.horaIngreso=new Date(sessionStorage.getItem("horaIngreso"))}btnrecovery(){const{actual:e,password:i,repeatPassword:o}=this.formData.value;this.authService.modifyPassword(i,o,e).subscribe({next:a=>{a.status?(h().fire({title:"Cambio de contrase\xf1a",text:"La contrase\xf1a fue cambiada exitosamente",icon:"success"}),this.router.navigate(["/auth/login"])):(h().fire({title:"Validar informaci\xf3n",text:a.msg,icon:"error"}),this.formData.reset())},error:a=>{h().fire({title:"Formato inv\xe1lido",text:"Contrase\xf1a debe contener al menos 8 caracteres",icon:"error"})}})}displayModifyPassword(){this.pos="right"==this.pos?"down":"right"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu),t.Y36(z.e),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],decls:81,vars:16,consts:[[1,"container","mt-4"],[1,"mi-perfil"],[1,"box","box-mi-perfil","mb-5","d-flex","align-items-start"],[1,"list","list-data","list-data-title-green","column-md-2","gap-0","list-unstyled"],[1,"list-data__title"],[1,"list-data__text"],[1,"color-verde"],[1,"list","list-links","list-unstyled"],["id","accordionPanelsStayOpenExample",1,"accordion","accordion-flush"],[1,"accordion-item"],["id","panelsStayOpen-headingOne",1,"accordion-header"],["data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne",3,"click"],["aria-hidden","true"],["id","panelsStayOpen-collapseOne","aria-labelledby","panelsStayOpen-headingOne",1,"accordion-collapse","collapse"],[1,"accordion-body"],["autocomplete","off",1,"form-recovery",3,"formGroup"],[1,"mb-4"],[1,"input-group"],[1,"input-group-text","input-group-text-left"],["aria-hidden","true",1,"fa","fa-lock","fa-fw"],["type","password","id","password","formControlName","actual","placeholder","Contrase\xf1a actual",1,"form-control"],["type","password","id","password","formControlName","password","placeholder","Nueva contrase\xf1a",1,"form-control"],["type","password","id","repeatPassword","formControlName","repeatPassword","placeholder","Repetir contrase\xf1a",1,"form-control"],["type","button",1,"btn","btn-primary","btn-fa","w-100",3,"click"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-fw"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"h1"),t._uU(3,"Mi Perfil"),t.qZA(),t.TgZ(4,"div",2)(5,"ul",3)(6,"li")(7,"span",4),t._uU(8,"Nombre Usuario"),t.qZA(),t.TgZ(9,"span",5),t._uU(10),t.qZA()(),t.TgZ(11,"li")(12,"span",4),t._uU(13,"Perfil"),t.qZA(),t.TgZ(14,"span",5),t._uU(15),t.qZA()(),t.TgZ(16,"li")(17,"span",4),t._uU(18,"Tel\xe9fono M\xf3vil"),t.qZA(),t.TgZ(19,"span",5),t._uU(20),t.qZA()(),t.TgZ(21,"li")(22,"span",4),t._uU(23,"Correo"),t.qZA(),t.TgZ(24,"span",5),t._uU(25),t.qZA()(),t.TgZ(26,"li")(27,"span",4),t._uU(28,"Instituci\xf3n"),t.qZA(),t.TgZ(29,"span",5),t._uU(30),t.qZA()(),t.TgZ(31,"li")(32,"span",4),t._uU(33,"Cargo"),t.qZA(),t.TgZ(34,"span",5),t._uU(35),t.qZA()(),t.TgZ(36,"li")(37,"span",4),t._uU(38,"Tel\xe9fono Oficina"),t.qZA(),t.TgZ(39,"span",5),t._uU(40),t.qZA()(),t.TgZ(41,"li")(42,"span",4)(43,"b"),t._uU(44,"Fecha/ Hora ingreso"),t.qZA()(),t.TgZ(45,"span",5),t._uU(46),t.ALo(47,"date"),t.qZA()()()(),t.TgZ(48,"h2",6),t._uU(49,"Acciones"),t.qZA(),t.TgZ(50,"ul",7)(51,"div",8)(52,"div",9)(53,"h2",10)(54,"li",11),t.NdJ("click",function(){return i.displayModifyPassword()}),t.TgZ(55,"a")(56,"span"),t._uU(57,"Cambio de contrase\xf1a"),t.qZA(),t._UZ(58,"i",12),t.qZA()()(),t.TgZ(59,"div",13)(60,"div",14)(61,"form",15)(62,"div",16)(63,"div",17)(64,"button",18),t._UZ(65,"i",19),t.qZA(),t._UZ(66,"input",20),t.qZA()(),t.TgZ(67,"div",16)(68,"div",17)(69,"button",18),t._UZ(70,"i",19),t.qZA(),t._UZ(71,"input",21),t.qZA()(),t.TgZ(72,"div",16)(73,"div",17)(74,"button",18),t._UZ(75,"i",19),t.qZA(),t._UZ(76,"input",22),t.qZA()(),t.TgZ(77,"div",16)(78,"button",23),t.NdJ("click",function(){return i.btnrecovery()}),t._uU(79," Enviar "),t._UZ(80,"i",24),t.qZA()()()()()()()()()()),2&e&&(t.xp6(10),t.AsE("",i.userData.FIRST_NAME," ",i.userData.LAST_NAME,""),t.xp6(5),t.Oqu(i.userData.ROL_NAME),t.xp6(5),t.Oqu(i.userData.PHONE),t.xp6(5),t.Oqu(i.userData.EMAIL),t.xp6(5),t.Oqu(i.userData.BUSINESS),t.xp6(5),t.Oqu(i.userData.POSITION),t.xp6(5),t.Oqu(i.userData.PHONE_OFFICE),t.xp6(6),t.Oqu(t.xi3(47,13,i.horaIngreso,"dd-MM-yyyy H:mm:s")),t.xp6(12),t.Gre("fa fa-chevron-",i.pos,""),t.xp6(3),t.Q6J("formGroup",i.formData))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.uU]}),n})();var W=_(371);function tt(n,r){if(1&n&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function et(n,r){if(1&n&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function it(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"span",32),t.qZA(),t.TgZ(10,"td")(11,"a",33),t._UZ(12,"i",34),t.qZA()()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.NAME_BUSINESS),t.xp6(2),t.Oqu(e.NAME_ESTABLISHMENT),t.xp6(2),t.Oqu(t.xi3(7,5,e.CREATED_AT,"dd-MM-yyyy H:m:ss")),t.xp6(3),t.Q6J("ngClass",e.semaforo?"circle green-circle":"circle red-circle"),t.xp6(2),t.Q6J("href","#/consumidor/form/"+e.ID_HEADER,t.LSH)}}const nt=function(n,r){return{"btn-info":n,"btn-primary":r}};function ot(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"button",35),t.NdJ("click",function(){const a=t.CHM(e).index,s=t.oxw();return t.KtG(s.pagTo(a))}),t._uU(2),t.qZA()()}if(2&n){const e=r.index,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(2,nt,i.pos==e+1,i.pos!=e+1)),t.xp6(1),t.Oqu(e+1)}}const st=[{path:"",component:A.$,children:[{path:"home",component:V},{path:"form",component:Z,data:{show:!1}},{path:"form/:id",component:Z,data:{show:!0}},{path:"profile",component:X},{path:"statements",component:(()=>{class n{constructor(e,i){this.productorService=e,this.establishmentService=i,this.dbStatements=[],this.db=[],this.pos=1,this.business_name=[],this.years=[],this.cant=0}ngOnInit(){this.loadStatements()}loadStatements(){this.establishmentService.getDeclarationEstablishment().subscribe(e=>{e.status&&(e.status=e.status.sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT),e.status.forEach(i=>{-1==this.business_name.indexOf(i.NAME_BUSINESS)&&this.business_name.push(i.NAME_BUSINESS),-1==this.years.indexOf(i.YEAR_STATEMENT)&&this.years.push(i.YEAR_STATEMENT)}),this.years.sort((i,o)=>o-i),this.dbStatements=e.status,this.cant=Math.ceil(this.dbStatements.length/2),this.db=this.dbStatements.slice(0,2).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT))})}filter(){const e=document.getElementById("f_name").value,i=document.getElementById("f_year").value,o=this.dbStatements.filter(a=>{if("-1"!=e&&a.NAME_BUSINESS==e){if("-1"==i)return a;if(a.YEAR_STATEMENT==i)return a}if("-1"==e){if("-1"==i)return a;if(a.YEAR_STATEMENT==i)return a}});this.db=o.slice(0,2).sort((a,s)=>s.YEAR_STATEMENT-a.YEAR_STATEMENT),this.cant=Math.ceil(o.length/2)}reset(){this.loadStatements()}pagTo(e){this.pos=e+1,this.db=this.dbStatements.slice(2*e,2*(e+1)).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.dbStatements.slice(2*(this.pos-1),2*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.dbStatements.slice(2*(this.pos-1),2*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(W.u),t.Y36(b.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statements"]],decls:70,vars:4,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"declaracion"],[1,"d-sm-flex","justify-content-between","mb-3","mb-md-0"],[1,"box","box-form","mb-4"],[1,"row","align-items-end"],[1,"col-12","col-xl-4","mb-3","mb-xl-0"],[1,"form-label"],[1,"input-group"],["id","f_name",1,"form-select"],["value","-1","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-xl-1","text-xl-center","mb-3","mb-xl-0"],[1,"mb-xl-2"],[1,"col-12","col-xl-3","mb-5","mb-xl-0"],["id","f_year",1,"form-select"],[1,"row"],[1,"col-6"],[1,"btn","btn-primary","col-12",3,"click"],[1,"table-responsive"],[1,"table","table-even","table-section","table-borderless","table-radius"],[1,"vertical-middle"],[4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[1,"btn","btn-primary",3,"click"],[3,"value"],[3,"ngClass"],[3,"href"],["aria-hidden","true",1,"fa","fa-eye","fa-lg","fa-fw","color-verde"],[1,"border","btn","btn-sm",3,"ngClass","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),t._UZ(5,"i",5),t._uU(6," Inicio"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Registro de Declaraci\xf3n"),t.qZA()()(),t.TgZ(9,"section",7)(10,"h1"),t._uU(11,"Registro de Declaraci\xf3n"),t.qZA(),t._UZ(12,"div",8),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),t._uU(17,"Empresa:"),t.qZA(),t.TgZ(18,"div",13)(19,"select",14)(20,"option",15),t._uU(21,"Todos"),t.qZA(),t.YNc(22,tt,2,2,"option",16),t.qZA()()(),t.TgZ(23,"div",17)(24,"div",18),t._uU(25,"y/o"),t.qZA()(),t.TgZ(26,"div",19)(27,"label",12),t._uU(28,"A\xf1o:"),t.qZA(),t.TgZ(29,"div",13)(30,"select",20)(31,"option",15),t._uU(32,"Todos"),t.qZA(),t.YNc(33,et,2,2,"option",16),t.qZA()()(),t.TgZ(34,"div",11)(35,"div",21)(36,"div",22)(37,"button",23),t.NdJ("click",function(){return i.filter()}),t._uU(38,"Mostrar"),t.qZA()()()()()(),t.TgZ(39,"div",24)(40,"table",25)(41,"thead",26)(42,"tr")(43,"th"),t._uU(44,"Nombre Empresa"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Establecimiento"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Fecha declaraci\xf3n"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Estado"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Ver detalle"),t.qZA()()(),t.TgZ(53,"tbody"),t.YNc(54,it,13,8,"tr",27),t.qZA()()(),t.TgZ(55,"nav",28)(56,"ul",29)(57,"li")(58,"button",30),t.NdJ("click",function(){return i.pagTo(0)}),t._uU(59,"Primero"),t.qZA()(),t.TgZ(60,"li")(61,"button",30),t.NdJ("click",function(){return i.previus()}),t._uU(62,"Anterior"),t.qZA()(),t.YNc(63,ot,3,5,"li",27),t.TgZ(64,"li")(65,"button",30),t.NdJ("click",function(){return i.next()}),t._uU(66,"Siguiente"),t.qZA()(),t.TgZ(67,"li")(68,"button",30),t.NdJ("click",function(){return i.pagTo(i.cant-1)}),t._uU(69,"\xdaltimo"),t.qZA()()()()()()),2&e&&(t.xp6(22),t.Q6J("ngForOf",i.business_name),t.xp6(11),t.Q6J("ngForOf",i.years),t.xp6(21),t.Q6J("ngForOf",i.db),t.xp6(9),t.Q6J("ngForOf",i.setArrayFromNumber()))},dependencies:[p.mk,p.sg,c.YN,c.Kr,p.uU],styles:["[_nghost-%COMP%]{width:90%!important;padding:1%}.circle[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:5px}.green-circle[_ngcontent-%COMP%]{background-color:green}.red-circle[_ngcontent-%COMP%]{background-color:red}"]}),n})()},{path:"**",redirectTo:"home",pathMatch:"full"}]}];let rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(st),m.Bz]}),n})();var lt=_(4466);let ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,rt,lt.m,c.u5,c.UX,T.q4]}),n})()}}]);