"use strict";(self.webpackChunkrigk_sg_web=self.webpackChunkrigk_sg_web||[]).push([[633],{7633:(Ni,y,p)=>{p.r(y),p.d(y,{MantainerModule:()=>Ai});var h=p(6895),P=p(5792),K=p(4135),t=p(8256),L=p(2227);let $=(()=>{class o{constructor(e){this.ratesService=e,this.types=["EyE reciclables cart\xf3n","EyE reciclable de metal","EyE de pl\xe1stico","EyE no reciclables","EyE reutilizables","EyE de madera"],this.year=(new Date).getFullYear(),this.rates=[]}ngOnInit(){this.ratesService.getRates(this.year).subscribe(e=>{console.log(e.data),e.data.forEach(i=>{this.rates.push({name:this.types[i.type-1],price:i.price})}),console.log(this.rates)})}getValueRates(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(L.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:22,vars:0,consts:[["id","content"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item"],["aria-hidden","true",1,"fa","fa-home"],[1,"inicio"],[1,"box","box-inicio"],[1,"row"],[1,"col-12","col-md-8"],[1,"h1"],[2,"visibility","hidden"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()()(),t.TgZ(6,"section",5)(7,"h1"),t._uU(8,"Inicio"),t.qZA(),t.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"h2",9),t._uU(13,"Bienvenido/a a M\xf3dulo de Administraci\xf3n"),t.qZA(),t.TgZ(14,"p",10),t._uU(15,"Como parte de las obligaciones que establece la Ley REP, los Productores deben informar la cantidad de EyE no domiciliarios (POM) puestos en el mercado el a\xf1o anterior."),t.qZA(),t.TgZ(16,"p",10),t._uU(17,"ProREP pone a disposici\xf3n de sus socios la plataforma de declaraci\xf3n que dar\xe1 cumplimiento a la obligaci\xf3n de informar sus EyE."),t.qZA(),t.TgZ(18,"p",10),t._uU(19,"La informaci\xf3n deber\xe1 subirse en los meses de enero y febrero."),t.qZA(),t.TgZ(20,"p",10),t._uU(21,"En caso de tener dudas con respecto a su declaraci\xf3n puede ver los tutoriales y preguntas frecuentes."),t.qZA()()()()()())}}),o})();var l=p(4006),j=p(5226),c=p.n(j),z=p(3224),Z=p(8195);function X(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",23)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td")(26,"div",24)(27,"button",25),t.NdJ("click",function(){const a=t.CHM(e),r=a.$implicit,s=a.index,_=t.oxw();return _.popupModify=!_.popupModify,_.id=r.ID,_.index=s,t.KtG(_.existingCode=r.CODE_BUSINESS)}),t._uU(28,"Modificar"),t.qZA()()(),t.TgZ(29,"td")(30,"div",24)(31,"button",26),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.btnDeleteBusiness(r.ID))}),t._uU(32,"Eliminar"),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.CODE_BUSINESS),t.xp6(2),t.Oqu(e.NAME),t.xp6(2),t.Oqu(e.VAT),t.xp6(2),t.Oqu(e.LOC_ADDRESS),t.xp6(2),t.Oqu(e.PHONE),t.xp6(2),t.Oqu(e.EMAIL),t.xp6(2),t.Oqu(e.AM_FIRST_NAME),t.xp6(2),t.Oqu(e.AM_LAST_NAME),t.xp6(2),t.Oqu(e.INVOICE_NAME),t.xp6(2),t.Oqu(e.INVOICE_EMAIL),t.xp6(2),t.Oqu(e.INVOICE_PHONE),t.xp6(2),t.Oqu(e.GIRO)}}const W=function(o,n){return{"btn-info":o,"btn-primary":n}};function tt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"button",27),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw();return t.KtG(s.pagTo(r))}),t._uU(2),t.qZA()()}if(2&o){const e=n.index,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(2,W,i.pos==e+1,i.pos!=e+1)),t.xp6(1),t.Oqu(e+1)}}function et(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El c\xf3digo de la empresa es requerido."),t.qZA())}function it(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El c\xf3digo de empresa ya existe."),t.qZA())}function ot(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,et,2,0,"p",61),t.YNc(2,it,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.code_business.errors.required),t.xp6(1),t.Q6J("ngIf",""!=e.formData.controls.code_business.value&&e.formData.controls.code_business.errors.code_business)}}function st(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre de la empresa es requerido."),t.qZA())}function at(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,st,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.name_business.errors.required)}}function rt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El rut de la empresa es requerido."),t.qZA())}function nt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del RUT es inv\xe1lido (Sin puntos y con gui\xf3n)."),t.qZA())}function lt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El digito verificador es incorrecto."),t.qZA())}function _t(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,rt,2,0,"p",61),t.YNc(2,nt,2,0,"p",61),t.YNc(3,lt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.rut.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.rut.errors.pattern),t.xp6(1),t.Q6J("ngIf",e.formData.controls.rut.errors.rut)}}function ct(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"La direcci\xf3n de la empresa es requerida."),t.qZA())}function ut(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,ct,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.loc_address.errors.required)}}function dt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El n\xfamero de Tel\xe9fono/Celular de la empresa es requerido (7 - 12 d\xedgitos)."),t.qZA())}function pt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del Tel\xe9fono/Celular es inv\xe1lido (7 - 12 d\xedgitos)."),t.qZA())}function mt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,dt,2,0,"p",61),t.YNc(2,pt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.phone.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.phone.errors.pattern)}}function ht(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El correo de la empresa es requerido (ejemplo@correo.com)."),t.qZA())}function Tt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),t.qZA())}function ft(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,ht,2,0,"p",61),t.YNc(2,Tt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.email.errors.email)}}function gt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre del account manager es requerido."),t.qZA())}function bt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,gt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.am_first_name.errors.required)}}function Et(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El apellido del account manager es requerido."),t.qZA())}function At(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Et,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.am_last_name.errors.required)}}function Nt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre contacto de facturaci\xf3n es requerido."),t.qZA())}function Mt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Nt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_name.errors.required)}}function Rt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El email contacto de facturaci\xf3n es requerido (ejemplo@correo.com)."),t.qZA())}function vt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),t.qZA())}function Zt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Rt,2,0,"p",61),t.YNc(2,vt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_email.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_email.errors.email)}}function Ct(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El tel\xe9fono de facturaci\xf3n es requerido (entre 7 y 12 d\xedgitos)."),t.qZA())}function xt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del tel\xe9fono es inv\xe1lido (entre 7 y 12 d\xedgitos)."),t.qZA())}function Pt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Ct,2,0,"p",61),t.YNc(2,xt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_phone.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_phone.errors.pattern)}}function Ft(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El giro de la empresa es requerido."),t.qZA())}function Ut(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Ft,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.giro.errors.required)}}function qt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",28)(1,"form",29,30)(3,"div",31)(4,"label",32)(5,"strong"),t._uU(6,"C\xf3digo de la empresa"),t.qZA()(),t.TgZ(7,"div",33),t._UZ(8,"input",34),t.qZA(),t.YNc(9,ot,3,2,"div",35),t.qZA(),t.TgZ(10,"div",31)(11,"label",36)(12,"strong"),t._uU(13,"Nombre de la empresa"),t.qZA()(),t.TgZ(14,"div",33),t._UZ(15,"input",37),t.qZA(),t.YNc(16,at,2,1,"div",35),t.qZA(),t.TgZ(17,"div",31)(18,"label",38)(19,"strong"),t._uU(20,"Rut de la empresa"),t.qZA()(),t.TgZ(21,"div",33),t._UZ(22,"input",39),t.qZA(),t.YNc(23,_t,4,3,"div",35),t.qZA(),t.TgZ(24,"div",31)(25,"label",40)(26,"strong"),t._uU(27,"Direcci\xf3n de la empresa"),t.qZA()(),t.TgZ(28,"div",33),t._UZ(29,"input",41),t.qZA(),t.YNc(30,ut,2,1,"div",35),t.qZA(),t.TgZ(31,"div",31)(32,"label",42)(33,"strong"),t._uU(34,"Tel\xe9fono/Celular de la empresa"),t.qZA()(),t.TgZ(35,"div",33),t._UZ(36,"input",43),t.qZA(),t.YNc(37,mt,3,2,"div",35),t.qZA(),t.TgZ(38,"div",31)(39,"label",44)(40,"strong"),t._uU(41,"Correo de la empresa"),t.qZA()(),t.TgZ(42,"div",33),t._UZ(43,"input",45),t.qZA(),t.YNc(44,ft,3,2,"div",35),t.qZA(),t.TgZ(45,"div",31)(46,"label",46)(47,"strong"),t._uU(48,"Nombre Account Manager"),t.qZA()(),t.TgZ(49,"div",33),t._UZ(50,"input",47),t.qZA(),t.YNc(51,bt,2,1,"div",35),t.qZA(),t.TgZ(52,"div",31)(53,"label",48)(54,"strong"),t._uU(55,"Apellido Account Manager"),t.qZA()(),t.TgZ(56,"div",33),t._UZ(57,"input",49),t.qZA(),t.YNc(58,At,2,1,"div",35),t.qZA(),t.TgZ(59,"div",31)(60,"label",50)(61,"strong"),t._uU(62,"Nombre contacto facturaci\xf3n"),t.qZA()(),t.TgZ(63,"div",33),t._UZ(64,"input",51),t.qZA(),t.YNc(65,Mt,2,1,"div",35),t.qZA(),t.TgZ(66,"div",31)(67,"label",52)(68,"strong"),t._uU(69,"Correo contacto facturaci\xf3n"),t.qZA()(),t.TgZ(70,"div",33),t._UZ(71,"input",53),t.qZA(),t.YNc(72,Zt,3,2,"div",35),t.qZA(),t.TgZ(73,"div",31)(74,"label",54)(75,"strong"),t._uU(76,"Tel\xe9fono/Celular contacto facturaci\xf3n"),t.qZA()(),t.TgZ(77,"div",33),t._UZ(78,"input",55),t.qZA(),t.YNc(79,Pt,3,2,"div",35),t.qZA(),t.TgZ(80,"div",31)(81,"label",56)(82,"strong"),t._uU(83,"Giro empresa"),t.qZA()(),t.TgZ(84,"div",33),t._UZ(85,"input",57),t.qZA(),t.YNc(86,Ut,2,1,"div",35),t.qZA(),t.TgZ(87,"button",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.btnAddBusiness(),t.KtG(a.pagTo(0))}),t._uU(88,"Aceptar"),t.qZA(),t.TgZ(89,"button",59),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.popupVisible=!a.popupVisible,t.KtG(a.formData.reset())}),t._uU(90,"Cancelar"),t.qZA()()()}if(2&o){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.formData),t.xp6(8),t.Q6J("ngIf",i.formData.controls.code_business.errors&&i.formData.controls.code_business.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.name_business.errors&&i.formData.controls.name_business.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.rut.errors&&i.formData.controls.rut.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.loc_address.errors&&i.formData.controls.loc_address.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.phone.errors&&i.formData.controls.phone.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.email.errors&&i.formData.controls.email.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.am_first_name.errors&&i.formData.controls.am_first_name.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.am_last_name.errors&&i.formData.controls.am_last_name.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.invoice_name.errors&&i.formData.controls.invoice_name.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.invoice_email.errors&&i.formData.controls.invoice_email.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.invoice_phone.errors&&i.formData.controls.invoice_phone.touched),t.xp6(7),t.Q6J("ngIf",i.formData.controls.giro.errors&&i.formData.controls.giro.touched),t.xp6(1),t.Q6J("disabled",e.invalid)}}function It(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El c\xf3digo de la empresa es requerido."),t.qZA())}function St(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El c\xf3digo de empresa ya existe."),t.qZA())}function Ot(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,It,2,0,"p",61),t.YNc(2,St,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.code_business.errors.required),t.xp6(1),t.Q6J("ngIf",""!=e.formData.controls.code_business.value&&!e.formData.controls.code_business.errors.verifyCode)}}function yt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre de la empresa es requerido."),t.qZA())}function Lt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,yt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.name_business.errors.required)}}function Bt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El rut de la empresa es requerido."),t.qZA())}function Dt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del RUT es inv\xe1lido (Sin puntos y con gui\xf3n)."),t.qZA())}function wt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El digito verificador es incorrecto."),t.qZA())}function Jt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Bt,2,0,"p",61),t.YNc(2,Dt,2,0,"p",61),t.YNc(3,wt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.rut.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.rut.errors.pattern),t.xp6(1),t.Q6J("ngIf",e.formData.controls.rut.errors.rut)}}function kt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"La direcci\xf3n de la empresa es requerida."),t.qZA())}function Yt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,kt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.loc_address.errors.required)}}function Qt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El n\xfamero de Tel\xe9fono/Celular de la empresa es requerido (7 - 12 d\xedgitos)."),t.qZA())}function Gt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del Tel\xe9fono/Celular es inv\xe1lido (7 - 12 d\xedgitos)."),t.qZA())}function Ht(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Qt,2,0,"p",61),t.YNc(2,Gt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.phone.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.phone.errors.pattern)}}function Vt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El correo de la empresa es requerido (ejemplo@correo.com)."),t.qZA())}function Kt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),t.qZA())}function $t(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Vt,2,0,"p",61),t.YNc(2,Kt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.email.errors.email)}}function jt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre del account manager es requerido."),t.qZA())}function zt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,jt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.am_first_name.errors.required)}}function Xt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El apellido del account manager es requerido."),t.qZA())}function Wt(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Xt,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.am_last_name.errors.required)}}function te(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre contacto de facturaci\xf3n es requerido."),t.qZA())}function ee(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,te,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_name.errors.required)}}function ie(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El email contacto de facturaci\xf3n es requerido (ejemplo@correo.com)."),t.qZA())}function oe(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),t.qZA())}function se(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,ie,2,0,"p",61),t.YNc(2,oe,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_email.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_email.errors.email)}}function ae(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El tel\xe9fono de facturaci\xf3n es requerido (7 - 12 d\xedgitos)."),t.qZA())}function re(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del tel\xe9fono es inv\xe1lido (7 - 12 d\xedgitos)."),t.qZA())}function ne(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,ae,2,0,"p",61),t.YNc(2,re,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_phone.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.invoice_phone.errors.pattern)}}function le(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El giro de la empresa es requerido."),t.qZA())}function _e(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,le,2,0,"p",61),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formData.controls.giro.errors.required)}}function ce(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",28)(1,"form",29,62)(3,"div",31)(4,"label",32)(5,"strong"),t._uU(6,"C\xf3digo de la empresa"),t.qZA()(),t.TgZ(7,"div",33)(8,"input",63),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].CODE_BUSINESS=a)}),t.qZA()(),t.YNc(9,Ot,3,2,"div",35),t.qZA(),t.TgZ(10,"div",31)(11,"label",36)(12,"strong"),t._uU(13,"Nombre de la empresa"),t.qZA()(),t.TgZ(14,"div",33)(15,"input",64),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].NAME=a)}),t.qZA()(),t.YNc(16,Lt,2,1,"div",35),t.qZA(),t.TgZ(17,"div",31)(18,"label",38)(19,"strong"),t._uU(20,"Rut de la empresa"),t.qZA()(),t.TgZ(21,"div",33)(22,"input",65),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].VAT=a)}),t.qZA()(),t.YNc(23,Jt,4,3,"div",35),t.qZA(),t.TgZ(24,"div",31)(25,"label",40)(26,"strong"),t._uU(27,"Direcci\xf3n de la empresa"),t.qZA()(),t.TgZ(28,"div",33)(29,"input",66),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].LOC_ADDRESS=a)}),t.qZA()(),t.YNc(30,Yt,2,1,"div",35),t.qZA(),t.TgZ(31,"div",31)(32,"label",42)(33,"strong"),t._uU(34,"Tel\xe9fono/Celular de la empresa"),t.qZA()(),t.TgZ(35,"div",33)(36,"input",67),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].PHONE=a)}),t.qZA()(),t.YNc(37,Ht,3,2,"div",35),t.qZA(),t.TgZ(38,"div",31)(39,"label",44)(40,"strong"),t._uU(41,"Correo de la empresa"),t.qZA()(),t.TgZ(42,"div",33)(43,"input",68),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].EMAIL=a)}),t.qZA()(),t.YNc(44,$t,3,2,"div",35),t.qZA(),t.TgZ(45,"div",31)(46,"label",46)(47,"strong"),t._uU(48,"Nombre Account Manager"),t.qZA()(),t.TgZ(49,"div",33)(50,"input",69),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].AM_FIRST_NAME=a)}),t.qZA()(),t.YNc(51,zt,2,1,"div",35),t.qZA(),t.TgZ(52,"div",31)(53,"label",48)(54,"strong"),t._uU(55,"Apellido Account Manager"),t.qZA()(),t.TgZ(56,"div",33)(57,"input",70),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].AM_LAST_NAME=a)}),t.qZA()(),t.YNc(58,Wt,2,1,"div",35),t.qZA(),t.TgZ(59,"div",31)(60,"label",50)(61,"strong"),t._uU(62,"Nombre contacto facturaci\xf3n"),t.qZA()(),t.TgZ(63,"div",33)(64,"input",71),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].INVOICE_NAME=a)}),t.qZA()(),t.YNc(65,ee,2,1,"div",35),t.qZA(),t.TgZ(66,"div",31)(67,"label",52)(68,"strong"),t._uU(69,"Correo contacto facturaci\xf3n"),t.qZA()(),t.TgZ(70,"div",33)(71,"input",72),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].INVOICE_EMAIL=a)}),t.qZA()(),t.YNc(72,se,3,2,"div",35),t.qZA(),t.TgZ(73,"div",31)(74,"label",54)(75,"strong"),t._uU(76,"Tel\xe9fono/Celular contacto facturaci\xf3n"),t.qZA()(),t.TgZ(77,"div",33)(78,"input",73),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].INVOICE_PHONE=a)}),t.qZA()(),t.YNc(79,ne,3,2,"div",35),t.qZA(),t.TgZ(80,"div",31)(81,"label",56)(82,"strong"),t._uU(83,"Giro empresa"),t.qZA()(),t.TgZ(84,"div",33)(85,"input",74),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.db[r.index].GIRO=a)}),t.qZA()(),t.YNc(86,_e,2,1,"div",35),t.qZA(),t.TgZ(87,"button",75),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.btnUpdateBusiness(a.id),a.getAllBusiness(),t.KtG(a.pagTo(0))}),t._uU(88,"Aceptar"),t.qZA(),t.TgZ(89,"button",59),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.popupModify=!a.popupModify)}),t._uU(90,"Cancelar"),t.qZA()()()}if(2&o){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.formData),t.xp6(7),t.Q6J("ngModel",i.db[i.index].CODE_BUSINESS),t.xp6(1),t.Q6J("ngIf",i.formData.controls.code_business.errors&&i.formData.controls.code_business.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].NAME),t.xp6(1),t.Q6J("ngIf",i.formData.controls.name_business.errors&&i.formData.controls.name_business.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].VAT),t.xp6(1),t.Q6J("ngIf",i.formData.controls.rut.errors&&i.formData.controls.rut.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].LOC_ADDRESS),t.xp6(1),t.Q6J("ngIf",i.formData.controls.loc_address.errors&&i.formData.controls.loc_address.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].PHONE),t.xp6(1),t.Q6J("ngIf",i.formData.controls.phone.errors&&i.formData.controls.phone.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].EMAIL),t.xp6(1),t.Q6J("ngIf",i.formData.controls.email.errors&&i.formData.controls.email.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].AM_FIRST_NAME),t.xp6(1),t.Q6J("ngIf",i.formData.controls.am_first_name.errors&&i.formData.controls.am_first_name.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].AM_LAST_NAME),t.xp6(1),t.Q6J("ngIf",i.formData.controls.am_last_name.errors&&i.formData.controls.am_last_name.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].INVOICE_NAME),t.xp6(1),t.Q6J("ngIf",i.formData.controls.invoice_name.errors&&i.formData.controls.invoice_name.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].INVOICE_EMAIL),t.xp6(1),t.Q6J("ngIf",i.formData.controls.invoice_email.errors&&i.formData.controls.invoice_email.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].INVOICE_PHONE),t.xp6(1),t.Q6J("ngIf",i.formData.controls.invoice_phone.errors&&i.formData.controls.invoice_phone.touched),t.xp6(6),t.Q6J("ngModel",i.db[i.index].GIRO),t.xp6(1),t.Q6J("ngIf",i.formData.controls.giro.errors&&i.formData.controls.giro.touched),t.xp6(1),t.Q6J("disabled",e.invalid)}}let ue=(()=>{class o{constructor(e,i){this.fb=e,this.businessService=i,this.listBusiness=[],this.pos=1,this.db=[],this.cant=0,this.existingCode="",this.popupVisible=!1,this.popupModify=!1,this.id="",this.index=0,this.id_business=[],this.name_business=[],this.rut=[],this.loc_address=[],this.phone=[],this.email=[],this.am_first_name=[],this.am_last_name=[],this.invoice_name=[],this.invoice_email=[],this.invoice_phone=[],this.code_business=[],this.giro=[],this.verifyCode=a=>{const r=a.value;return r&&this.code_business.map(_=>_.toLowerCase()).includes(r.toLowerCase())&&r.toLowerCase()!==this.existingCode.toLowerCase()?{code_business:!0}:null}}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getAllBusiness(),this.formData=this.fb.group({code_business:["",[l.kI.required,this.verifyCode]],name_business:["",[l.kI.required]],rut:["",[l.kI.required,l.kI.pattern("^[0-9]{1,2}[0-9]{3}[0-9]{3}-[0-9Kk]{1}$"),this.verifyRut]],loc_address:["",[l.kI.required]],phone:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],email:["",[l.kI.required,l.kI.email]],am_first_name:["",[l.kI.required]],am_last_name:["",[l.kI.required]],invoice_name:["",[l.kI.required]],invoice_email:["",[l.kI.required,l.kI.email]],invoice_phone:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],giro:["",[l.kI.required]]})}getAllBusiness(){this.id_business=[],this.name_business=[],this.rut=[],this.loc_address=[],this.phone=[],this.email=[],this.am_first_name=[],this.am_last_name=[],this.invoice_name=[],this.invoice_email=[],this.invoice_phone=[],this.code_business=[],this.giro=[],this.businessService.getAllBusiness().subscribe({next:e=>{if(this.listBusiness=e.status,this.cant=Math.ceil(this.listBusiness.length/10),this.db=this.listBusiness.slice(0,10).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT),e.status)for(let i=0;i<e.status.length;i++)this.id_business.push(e.status[i].ID),this.name_business.push(e.status[i].NAME),this.rut.push(e.status[i].VAT),this.loc_address.push(e.status[i].LOC_ADDRESS),this.phone.push(e.status[i].PHONE),this.email.push(e.status[i].EMAIL),this.am_first_name.push(e.status[i].AM_FIRST_NAME),this.am_last_name.push(e.status[i].AM_LAST_NAME),this.invoice_name.push(e.status[i].INVOICE_NAME),this.invoice_email.push(e.status[i].INVOICE_EMAIL),this.invoice_phone.push(e.status[i].INVOICE_PHONE),this.code_business.push(e.status[i].CODE_BUSINESS),this.giro.push(e.status[i].GIRO)},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}btnAddBusiness(){const{name_business:e,rut:i,loc_address:a,phone:r,email:s,am_first_name:_,am_last_name:d,invoice_name:N,invoice_email:M,invoice_phone:R,code_business:T,giro:b}=this.formData.value;if(this.formData.invalid)return c().fire({title:"Validar informaci\xf3n",text:"Debe completar todos los campos",icon:"error"}),void this.getAllBusiness();this.businessService.postBusiness(e,i,a,r,s,_,d,N,M,R,T,b).subscribe({next:C=>{C.status&&(c().fire({title:"Empresa agregada",text:"La empresa fue agregada exitosamente",icon:"success"}),this.popupVisible=!1,this.getAllBusiness(),this.formData.reset())},error:C=>{c().fire({title:"Error",text:"Error al agregar la empresa",icon:"error"})}})}btnDeleteBusiness(e){c().fire({title:"\xbfEst\xe1s seguro que quieres eliminar la empresa?",showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.businessService.deleteBusiness(e).subscribe({next:a=>{a.status?(c().fire({title:"Empresa Eliminada",text:"",icon:"error"}),this.getAllBusiness(),this.pagTo(0)):c().fire({title:"Validar informaci\xf3n",text:a.msg,icon:"error"})},error:a=>{c().fire({title:"Formato inv\xe1lido",text:"",icon:"error"})}})})}btnUpdateBusiness(e){const{name_business:i,rut:a,loc_address:r,phone:s,email:_,am_first_name:d,am_last_name:N,invoice_name:M,invoice_email:R,invoice_phone:T,code_business:b,giro:C}=this.formData.value;this.formData.invalid?c().fire({title:"Validar informaci\xf3n",text:"Debe completar todos los campos",icon:"error"}):this.businessService.updateBusiness(e,i,a,r,s,_,d,N,M,R,T,b,C).subscribe({next:v=>{v.status&&(c().fire({title:"Empresa Modificada",text:"",icon:"success"}),this.formData.reset(),this.popupModify=!1,this.getAllBusiness())},error:v=>{c().fire({title:"Error",text:"",icon:"error"})}})}verifyRut(e){return(0,z.validate)(e.value)?null:{rut:!0}}pagTo(e){this.pos=e+1,this.db=this.listBusiness.slice(10*e,10*(e+1)).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.listBusiness.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.listBusiness.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}filter(e){const i=e.value?.toLowerCase();this.pos=1;const a=[];return""!=e.value?(this.cant=1,this.db=this.listBusiness.filter(r=>{(r.NAME?.toLowerCase().indexOf(i)>-1||r.CODE_BUSINESS?.toLowerCase().indexOf(i)>-1||r.LOC_ADDRESS?.toLowerCase().indexOf(i)>-1||r.VAT?.toLowerCase().indexOf(i)>-1||r.PHONE?.toLowerCase().indexOf(i)>-1||r.EMAIL?.toLowerCase().indexOf(i)>-1||r.GIRO?.toLowerCase().indexOf(i)>-1||r.AM_FIRST_NAME?.toLowerCase().indexOf(i)>-1||r.AM_LAST_NAME?.toLowerCase().indexOf(i)>-1||r.INVOICE_NAME?.toLowerCase().indexOf(i)>-1||r.INVOICE_EMAIL?.toLowerCase().indexOf(i)>-1||r.INVOICE_PHONE?.toLowerCase().indexOf(i)>-1)&&a.push(r)}),this.db=a.slice(0,10),this.cant=Math.ceil(a.length/10),this.db):(this.db=this.listBusiness.slice(0,10),this.cant=Math.ceil(this.listBusiness.length/10),this.db)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(Z.m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-maintainer-business"]],decls:74,vars:4,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],[1,"buttonRight"],[1,"btn","btn-primary",3,"click"],[2,"height","50px"],[1,"row","mb-3"],[1,"col-md-12"],["type","text","placeholder","Filtro de b\xfasqueda",1,"form-control",3,"keyup"],[1,"table-responsive","mb-4"],[1,"row","w-100"],["id","table",1,"w-100"],["table1",""],[1,"w-100"],[1,"table-container","table","table-even","table-section","table-borderless","table-border","table-radius","d-lg-table"],[1,"text-center","w-100"],["class","text-end w-100",4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[4,"ngFor","ngForOf"],["class","dark-background ",4,"ngIf"],[1,"text-end","w-100"],[1,"btn-group"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"border","btn","btn-sm",3,"ngClass","click"],[1,"dark-background"],["autocomplete","off",1,"popup",2,"overflow-y","scroll","scroll-behavior","smooth","height","800px",3,"formGroup"],["miFormulario","ngForm"],[1,"mb-4"],["for","code_business",2,"color","rgb(0, 138, 92)"],[1,"input-group"],["type","code_business","id","code_business","formControlName","code_business","placeholder","C\xf3digo de la empresa",1,"form-control"],["class","text-danger pl-0",4,"ngIf"],["for","name_business",2,"color","rgb(0, 138, 92)"],["type","name_business","id","name_business","formControlName","name_business","placeholder","Nombre",1,"form-control"],["for","rut",2,"color","rgb(0, 138, 92)"],["type","rut","id","rut","formControlName","rut","placeholder","Rut",1,"form-control"],["for","loc_address",2,"color","rgb(0, 138, 92)"],["type","loc_address","id","loc_address","formControlName","loc_address","placeholder","Direcci\xf3n",1,"form-control"],["for","phone",2,"color","rgb(0, 138, 92)"],["type","phone","id","phone","formControlName","phone","placeholder","Tel\xe9fono/Celular",1,"form-control"],["for","email",2,"color","rgb(0, 138, 92)"],["type","email","id","email","formControlName","email","placeholder","E-mail",1,"form-control"],["for","am_first_name",2,"color","rgb(0, 138, 92)"],["type","am_first_name","id","am_first_name","formControlName","am_first_name","placeholder","Nombre Account Manager",1,"form-control"],["for","am_last_name",2,"color","rgb(0, 138, 92)"],["type","am_last_name","id","am_last_name","formControlName","am_last_name","placeholder","Apellido Account Manager",1,"form-control"],["for","invoice_name",2,"color","rgb(0, 138, 92)"],["type","invoice_name","id","invoice_name","formControlName","invoice_name","placeholder","Nombre contacto facturaci\xf3n",1,"form-control"],["for","invoice_email",2,"color","rgb(0, 138, 92)"],["type","invoice_email","id","invoice_email","formControlName","invoice_email","placeholder","Correo contacto facturaci\xf3n",1,"form-control"],["for","invoice_phone",2,"color","rgb(0, 138, 92)"],["type","invoice_phone","id","invoice_phone","formControlName","invoice_phone","placeholder","Tel\xe9fono/Celular contacto facturaci\xf3n",1,"form-control"],["for","giro",2,"color","rgb(0, 138, 92)"],["type","giro","id","giro","formControlName","giro","placeholder","Giro Empresa",1,"form-control"],["type","submit",1,"btn","btn-primary",2,"width","150px","margin-left","400px",3,"disabled","click"],["type","button",1,"btn","btn-secondary","buttonRight",2,"width","150px",3,"click"],[1,"text-danger","pl-0"],[4,"ngIf"],["miFormulari02","ngForm"],["type","code_business","id","code_business","formControlName","code_business","placeholder","C\xf3digo de la empresa",1,"form-control",3,"ngModel","ngModelChange"],["type","name_business","id","name_business","formControlName","name_business","placeholder","Nombre",1,"form-control",3,"ngModel","ngModelChange"],["type","rut","id","rut","formControlName","rut","placeholder","Rut",1,"form-control",3,"ngModel","ngModelChange"],["type","loc_address","id","loc_address","formControlName","loc_address","placeholder","Direcci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","phone","id","phone","formControlName","phone","placeholder","Tel\xe9fono/Celular",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","email","formControlName","email","placeholder","E-mail",1,"form-control",3,"ngModel","ngModelChange"],["type","am_first_name","id","am_first_name","formControlName","am_first_name","placeholder","Nombre Account Manager",1,"form-control",3,"ngModel","ngModelChange"],["type","am_last_name","id","am_last_name","formControlName","am_last_name","placeholder","Apellido Account Manager",1,"form-control",3,"ngModel","ngModelChange"],["type","invoice_name","id","invoice_name","formControlName","invoice_name","placeholder","Nombre contacto facturaci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","invoice_email","id","invoice_email","formControlName","invoice_email","placeholder","Correo contacto facturaci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","invoice_phone","id","invoice_phone","formControlName","invoice_phone","placeholder","Tel\xe9fono/Celular contacto facturaci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","giro","id","giro","formControlName","giro","placeholder","Giro Empresa",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",2,"width","150px","margin-left","400px",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()(),t.TgZ(6,"li",2)(7,"a",3),t._uU(8,"Mantener Empresas"),t.qZA()()()(),t.TgZ(9,"h1"),t._uU(10,"Empresas"),t.qZA(),t.TgZ(11,"div",5)(12,"button",6),t.NdJ("click",function(){return i.popupVisible=!i.popupVisible,i.formData.reset()}),t._uU(13,"Agregar Empresa"),t.qZA()(),t._UZ(14,"div",7),t.TgZ(15,"div",8)(16,"div",9)(17,"label"),t._uU(18,"Filtro:"),t.qZA(),t.TgZ(19,"input",10),t.NdJ("keyup",function(r){return i.filter(r.target)}),t.qZA()()(),t.TgZ(20,"div",11)(21,"section")(22,"div",12)(23,"div",13,14)(25,"div",15)(26,"table",16)(27,"thead")(28,"tr",17)(29,"th"),t._uU(30,"C\xd3DIGO EMPRESA"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"NOMBRE"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"RUT"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"DIRECCI\xd3N"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"TEL\xc9FONO"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"E-MAIL"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"NOMBRE ACCOUNT MANAGER"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"APELLIDO ACCOUNT MANAGER"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"NOMBRE CONTACTO FACTURACI\xd3N"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"EMAIL CONTACTO FACTURACI\xd3N"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"TEL\xc9FONO CONTACTO FACTURACI\xd3N"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"GIRO"),t.qZA(),t._UZ(53,"th")(54,"th"),t.qZA()(),t.TgZ(55,"tbody"),t.YNc(56,X,33,12,"tr",18),t.qZA()(),t.TgZ(57,"nav",19)(58,"ul",20)(59,"li")(60,"button",6),t.NdJ("click",function(){return i.pagTo(0)}),t._uU(61,"Primero"),t.qZA()(),t.TgZ(62,"li")(63,"button",6),t.NdJ("click",function(){return i.previus()}),t._uU(64,"Anterior"),t.qZA()(),t.YNc(65,tt,3,5,"li",21),t.TgZ(66,"li")(67,"button",6),t.NdJ("click",function(){return i.next()}),t._uU(68,"Siguiente"),t.qZA()(),t.TgZ(69,"li")(70,"button",6),t.NdJ("click",function(){return i.pagTo(i.cant-1)}),t._uU(71,"\xdaltimo"),t.qZA()()()(),t.YNc(72,qt,91,14,"div",22),t.YNc(73,ce,91,26,"div",22),t.qZA()()()()()),2&e&&(t.xp6(56),t.Q6J("ngForOf",i.db),t.xp6(9),t.Q6J("ngForOf",i.setArrayFromNumber()),t.xp6(7),t.Q6J("ngIf",i.popupVisible),t.xp6(1),t.Q6J("ngIf",i.popupModify))},dependencies:[h.mk,h.sg,h.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],styles:[".list-process__dot[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]{width:100%!important;padding:1%}.red-button[_ngcontent-%COMP%]{background-color:red}.popup[_ngcontent-%COMP%]{position:absolute;top:calc(45% + 10px);left:60%;transform:translate(-50%,-50%);background-color:#fff;border:1px solid rgb(17,165,128);padding:20px;width:800px;border-radius:10px}@media (max-width: 768px){.popup[_ngcontent-%COMP%]{width:100%}}.btnLeft[_ngcontent-%COMP%]{margin-left:400px}@media (max-width: 768px){.btnLeft[_ngcontent-%COMP%]{margin-left:0}}.buttonRight[_ngcontent-%COMP%]{position:absolute;right:40px}.dark-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1}.table-container[_ngcontent-%COMP%]{word-wrap:break-word;table-layout:fixed;width:100%;height:auto;overflow-x:hidden}"]}),o})();var B=p(263);let de=(()=>{class o{constructor(e,i,a){this.fb=e,this.authService=i,this.router=a,this.pos="right",this.horaIngreso=new Date,this.formData=this.fb.group({actual:["",[l.kI.required]],password:["",[l.kI.required,l.kI.minLength(3)]],repeatPassword:["",[l.kI.required,l.kI.minLength(3)]]})}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getProfile(this.userData.EMAIL),this.horaIngreso=new Date(sessionStorage.getItem("horaIngreso"))}btnrecovery(){const{actual:e,password:i,repeatPassword:a}=this.formData.value;this.authService.modifyPassword(i,a,e).subscribe({next:r=>{r.status?(c().fire({title:"Cambio de contrase\xf1a",text:"La contrase\xf1a fue cambiada exitosamente",icon:"success"}),this.router.navigate(["/mantenedor/home"])):(c().fire({title:"Validar informaci\xf3n",text:r.msg,icon:"error"}),this.formData.reset())},error:r=>{c().fire({title:"Formato inv\xe1lido",text:"Contrase\xf1a debe contener al menos 8 caracteres",icon:"error"})}})}displayModifyPassword(){this.pos="right"==this.pos?"down":"right"}getProfile(e){this.authService.getProfile(e).subscribe(i=>{sessionStorage.setItem("user",JSON.stringify(i.data.user)),this.userData=i.data.user})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(B.e),t.Y36(P.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile"]],decls:81,vars:16,consts:[[1,"container","mt-4"],[1,"mi-perfil"],[1,"box","box-mi-perfil","mb-5","d-flex","align-items-start"],[1,"list","list-data","list-data-title-green","column-md-2","gap-0","list-unstyled"],[1,"list-data__title"],[1,"list-data__text"],[1,"color-verde"],[1,"list","list-links","list-unstyled"],["id","accordionPanelsStayOpenExample",1,"accordion","accordion-flush"],[1,"accordion-item"],["id","panelsStayOpen-headingOne",1,"accordion-header"],["data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne",3,"click"],["aria-hidden","true"],["id","panelsStayOpen-collapseOne","aria-labelledby","panelsStayOpen-headingOne",1,"accordion-collapse","collapse"],[1,"accordion-body"],["autocomplete","off",1,"form-recovery",3,"formGroup"],[1,"mb-4"],[1,"input-group"],[1,"input-group-text","input-group-text-left"],["aria-hidden","true",1,"fa","fa-lock","fa-fw"],["type","password","id","password","formControlName","actual","placeholder","Contrase\xf1a actual",1,"form-control"],["type","password","id","password","formControlName","password","placeholder","Nueva contrase\xf1a",1,"form-control"],["type","password","id","repeatPassword","formControlName","repeatPassword","placeholder","Repetir contrase\xf1a",1,"form-control"],["type","button",1,"btn","btn-primary","btn-fa","w-100",3,"click"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-fw"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"h1"),t._uU(3,"Mi Perfil"),t.qZA(),t.TgZ(4,"div",2)(5,"ul",3)(6,"li")(7,"span",4),t._uU(8,"Nombre Usuario"),t.qZA(),t.TgZ(9,"span",5),t._uU(10),t.qZA()(),t.TgZ(11,"li")(12,"span",4),t._uU(13,"Perfil"),t.qZA(),t.TgZ(14,"span",5),t._uU(15),t.qZA()(),t.TgZ(16,"li")(17,"span",4),t._uU(18,"Tel\xe9fono"),t.qZA(),t.TgZ(19,"span",5),t._uU(20),t.qZA()(),t.TgZ(21,"li")(22,"span",4),t._uU(23,"Correo"),t.qZA(),t.TgZ(24,"span",5),t._uU(25),t.qZA()(),t.TgZ(26,"li")(27,"span",4),t._uU(28,"Instituci\xf3n"),t.qZA(),t.TgZ(29,"span",5),t._uU(30),t.qZA()(),t.TgZ(31,"li")(32,"span",4),t._uU(33,"Cargo"),t.qZA(),t.TgZ(34,"span",5),t._uU(35),t.qZA()(),t.TgZ(36,"li")(37,"span",4),t._uU(38,"Tel\xe9fono Oficina"),t.qZA(),t.TgZ(39,"span",5),t._uU(40),t.qZA()(),t.TgZ(41,"li")(42,"span",4)(43,"b"),t._uU(44,"Fecha/ Hora ingreso"),t.qZA()(),t.TgZ(45,"span",5),t._uU(46),t.ALo(47,"date"),t.qZA()()()(),t.TgZ(48,"h2",6),t._uU(49,"Acciones"),t.qZA(),t.TgZ(50,"ul",7)(51,"div",8)(52,"div",9)(53,"h2",10)(54,"li",11),t.NdJ("click",function(){return i.displayModifyPassword()}),t.TgZ(55,"a")(56,"span"),t._uU(57,"Cambio de contrase\xf1a"),t.qZA(),t._UZ(58,"i",12),t.qZA()()(),t.TgZ(59,"div",13)(60,"div",14)(61,"form",15)(62,"div",16)(63,"div",17)(64,"button",18),t._UZ(65,"i",19),t.qZA(),t._UZ(66,"input",20),t.qZA()(),t.TgZ(67,"div",16)(68,"div",17)(69,"button",18),t._UZ(70,"i",19),t.qZA(),t._UZ(71,"input",21),t.qZA()(),t.TgZ(72,"div",16)(73,"div",17)(74,"button",18),t._UZ(75,"i",19),t.qZA(),t._UZ(76,"input",22),t.qZA()(),t.TgZ(77,"div",16)(78,"button",23),t.NdJ("click",function(){return i.btnrecovery()}),t._uU(79," Enviar "),t._UZ(80,"i",24),t.qZA()()()()()()()()()()),2&e&&(t.xp6(10),t.AsE("",i.userData.FIRST_NAME," ",i.userData.LAST_NAME,""),t.xp6(5),t.Oqu(i.userData.ROL_NAME),t.xp6(5),t.Oqu(i.userData.PHONE),t.xp6(5),t.Oqu(i.userData.EMAIL),t.xp6(5),t.Oqu(i.userData.BUSINESS.join(" || ")),t.xp6(5),t.Oqu(i.userData.POSITION),t.xp6(5),t.Oqu(i.userData.PHONE_OFFICE),t.xp6(6),t.Oqu(t.xi3(47,13,i.horaIngreso,"dd-MM-yyyy H:mm:s")),t.xp6(12),t.Gre("fa fa-chevron-",i.pos,""),t.xp6(3),t.Q6J("formGroup",i.formData))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,h.uU]}),o})();var pe=p(9821);function me(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",15)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",45)(9,"button",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return s.getEstablishment(r.ID),t.KtG(s.index=r.ID)}),t._uU(10,"Establecimientos"),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.CODE_BUSINESS),t.xp6(2),t.Oqu(e.NAME),t.xp6(2),t.Oqu(e.LOC_ADDRESS)}}const D=function(o,n){return{"btn-info":o,"btn-primary":n}};function he(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"button",47),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw();return t.KtG(s.pagTo(r))}),t._uU(2),t.qZA()()}if(2&o){const e=n.index,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(2,D,i.pos==e+1,i.pos!=e+1)),t.xp6(1),t.Oqu(e+1)}}function Te(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre del establecimiento es requerido."),t.qZA())}function fe(o,n){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,Te,2,0,"p",44),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.FIRST_NAME.errors.required)}}function ge(o,n){if(1&o&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e)}}function be(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"Debe seleccionar alguna regi\xf3n."),t.qZA())}function Ee(o,n){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,be,2,0,"p",44),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.REGION.errors.required)}}function Ae(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",15)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteEstablishment(r.ID_ESTABLISHMENT))}),t._uU(7," X "),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.NAME_ESTABLISHMENT),t.xp6(2),t.Oqu(e.REGION)}}function Ne(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"button",47),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.pagTo2(r))}),t._uU(2),t.qZA()()}if(2&o){const e=n.index,i=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(2,D,i.pos2==e+1,i.pos2!=e+1)),t.xp6(1),t.Oqu(e+1)}}function Me(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",49),t.TgZ(2,"div",6)(3,"div",7)(4,"label"),t._uU(5,"Filtro:"),t.qZA(),t.TgZ(6,"input",8),t.NdJ("keyup",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.filterForm(a.target))}),t.qZA()()(),t.TgZ(7,"table",14)(8,"thead")(9,"tr",15)(10,"th"),t._uU(11,"Establecimiento"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Regi\xf3n"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Eliminar"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,Ae,8,2,"tr",16),t.qZA()(),t.TgZ(18,"nav",17)(19,"ul",18)(20,"li")(21,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.pagTo2(0))}),t._uU(22,"Primero"),t.qZA()(),t.TgZ(23,"li")(24,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.previus2())}),t._uU(25,"Anterior"),t.qZA()(),t.YNc(26,Ne,3,5,"li",20),t.TgZ(27,"li")(28,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.next2())}),t._uU(29,"Siguiente"),t.qZA()(),t.TgZ(30,"li")(31,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.pagTo2(a.cant2-1))}),t._uU(32,"\xdaltimo"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(17),t.Q6J("ngForOf",e.db2),t.xp6(9),t.Q6J("ngForOf",e.setArrayFromNumber2())}}let Re=(()=>{class o{constructor(e,i,a){this.businesService=e,this.establishmentService=i,this.fb=a,this.listRegiones=["Regi\xf3n de Arica y Parinacota","Regi\xf3n de Tarapac\xe1","Regi\xf3n de Antofagasta","Regi\xf3n de Atacama","Regi\xf3n de Coquimbo","Regi\xf3n de Valpara\xedso","Regi\xf3n Metropolitana","Regi\xf3n de O\u2019Higgins","Regi\xf3n del Maule","Regi\xf3n del \xd1uble","Regi\xf3n del Biob\xedo","Regi\xf3n de La Araucan\xeda","Regi\xf3n de Los R\xedos","Regi\xf3n de Los Lagos","Regi\xf3n de Ays\xe9n","Regi\xf3n de Magallanes"],this.listBusiness=[],this.pos=1,this.db=[],this.cant=0,this.establishmentStatus=[],this.pos2=1,this.db2=[],this.cant2=0,this.filteredList=[],this.filteredForm=[],this.index=0,this.FIRST_NAME=[],this.REGION="",this.direction="asc",this.directionEstablishment="asc"}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getAllBusiness(),this.userForm=this.fb.group({FIRST_NAME:[[],[l.kI.required]],REGION:["",[l.kI.required]]})}getAllBusiness(){this.businesService.getAllBusiness().subscribe({next:e=>{this.listBusiness=e.status,this.filteredForm=e.status,this.cant=Math.ceil(this.listBusiness.length/10),this.db=this.listBusiness.slice(0,10).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT)},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}getEstablishment(e){this.establishmentService.getEstablishment(e).subscribe({next:i=>{i.status?(this.establishmentStatus=i.status,this.filteredList=i.status,this.cant2=Math.ceil(this.establishmentStatus.length/10),this.db2=this.establishmentStatus.slice(0,10).sort((a,r)=>r.ID_ESTABLISHMENT-a.ID_ESTABLISHMENT)):this.establishmentStatus=[],this.reset()},error:i=>{c().close(),c().fire({icon:"error",text:i.msg,title:"\xa1Ups!"}),this.reset()}})}addEstablishment(e){if(this.verificarEstablecimiento()){const{FIRST_NAME:i,REGION:a}=this.userForm.value;this.establishmentStatus.push(e),this.establishmentService.addEstablishment(i,a,e).subscribe({next:r=>{r.status&&(this.pagTo2(0),c().fire({title:"Establecimiento agregado",text:"El establecimiento fue agregado exitosamente",icon:"success"})),this.getEstablishment(e)},error:r=>{c().fire({title:"Error",text:"Error al agregar el establecimiento",icon:"error"})}})}else c().fire({title:"Establecimiento y Regi\xf3n ya se encuentran registrados",text:"",icon:"error"})}deleteEstablishment(e){c().fire({title:"\xbfEst\xe1s seguro que quieres eliminar el establecimiento?",showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.pagTo2(0),this.establishmentService.deleteEstablishment(e).subscribe({next:a=>{a.status?(c().fire({title:"Establecimiento Eliminado",text:"",icon:"error"}),this.getEstablishment(this.index)):c().fire({title:"Validar informaci\xf3n",text:a.msg,icon:"error"})},error:a=>{c().fire({title:"Formato inv\xe1lido",text:"",icon:"error"})}}))})}pagTo(e){this.pos=e+1,this.db=this.filteredForm.slice(10*e,10*(e+1)).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.filteredForm.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.filteredForm.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}pagTo2(e){this.pos2=e+1,this.db2=this.filteredList.slice(10*e,10*(e+1)).sort((i,a)=>i.ID_ESTABLISHMENT-a.ID_ESTABLISHMENT)}next2(){this.pos2>=this.cant2||(this.pos2++,this.db2=this.filteredList.slice(10*(this.pos2-1),10*this.pos2).sort((e,i)=>e.ID_ESTABLISHMENT-i.ID_ESTABLISHMENT))}previus2(){this.pos2-1<=0||this.pos2>=this.cant2+1||(this.pos2=this.pos2-1,this.db2=this.filteredList.slice(10*(this.pos2-1),10*this.pos2).sort((e,i)=>e.ID_ESTABLISHMENT-i.ID_ESTABLISHMENT))}setArrayFromNumber2(){return new Array(this.cant2)}reset(){this.pagTo2(0),this.userForm.reset(),this.userForm.patchValue({REGION:""})}verificarEstablecimiento(){const{FIRST_NAME:e,REGION:i}=this.userForm.value;let a=!1;const r=e.trim();for(let s=0;s<this.establishmentStatus.length;s++)if(this.establishmentStatus[s].NAME_ESTABLISHMENT.toLowerCase()===r.toLowerCase()&&this.establishmentStatus[s].REGION===i){a=!0;break}return!a}toggleDirection(){this.direction="asc"===this.direction?"desc":"asc",this.listBusiness.reverse(),this.cant=Math.ceil(this.listBusiness.length/10),this.db=this.listBusiness.slice(0,10).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT)}toggleDirectionEstablishments(){this.directionEstablishment="asc"===this.directionEstablishment?"desc":"asc",this.establishmentStatus.reverse(),this.cant2=Math.ceil(this.establishmentStatus.length/10),this.db2=this.establishmentStatus.slice(0,10).reverse()}filter(e){const i=e.value?.toLowerCase();this.pos=1;const a=[];return""!=e.value?(this.cant=1,this.db=this.listBusiness.filter(r=>{(r.NAME?.toLowerCase().indexOf(i)>-1||r.CODE_BUSINESS?.toLowerCase().indexOf(i)>-1||r.LOC_ADDRESS?.toLowerCase().indexOf(i)>-1)&&a.push(r)}),this.filteredForm=a,this.db=a.slice(0,10),this.cant=Math.ceil(a.length/10),this.db):(this.filteredForm=this.listBusiness,this.db=this.listBusiness.slice(0,10),this.cant=Math.ceil(this.listBusiness.length/10),this.db)}filterForm(e){const i=e.value?.toLowerCase();this.pos2=1;const a=[];return""!=e.value?(this.cant2=1,this.db2=this.establishmentStatus.filter(r=>{(r.NAME_ESTABLISHMENT?.toLowerCase().indexOf(i)>-1||r.REGION?.toLowerCase().indexOf(i)>-1)&&a.push(r)}),this.filteredList=a,this.db2=a.slice(0,10),this.cant2=Math.ceil(a.length/10),this.db2):(this.filteredList=this.establishmentStatus,this.db2=this.establishmentStatus.slice(0,10),this.cant2=Math.ceil(this.establishmentStatus.length/10),this.db2)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.m),t.Y36(pe.d),t.Y36(l.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-maintainer-establishment"]],decls:87,vars:8,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],[2,"height","30px"],[1,"row","mb-3"],[1,"col-md-12"],["type","text","placeholder","Filtro de b\xfasqueda",1,"form-control",3,"keyup"],[1,"table-responsive","mb-4"],[1,"row","w-100"],["id","table",1,"w-100"],["table1",""],[1,"w-100"],[1,"table-container","table","table-even","table-section","table-borderless","table-border","table-radius","d-lg-table"],[1,"text-center","w-100"],["class","text-center w-100",4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container"],[3,"formGroup"],["miFormulario","ngForm"],[1,"row"],[1,"col-md-6"],["for","inp_nom"],[1,"input-group"],["type","text","formControlName","FIRST_NAME","id","inp_nom","placeholder","Nombre",1,"form-control"],["class","text-danger pl-0",4,"ngIf"],["for","inp_region"],["formControlName","REGION","id","inp_region","required","",1,"form-select"],["value",""],[1,"modal-footer"],["type","button","id","btnCloseModal","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[2,"visibility","hidden"],[4,"ngIf"],[1,"btn-group"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-success","btn-sm","rounded-pill",3,"click"],[1,"border","btn","btn-sm",3,"ngClass","click"],[1,"text-danger","pl-0"],[2,"height","50px"],["type","button",1,"btn","btn-danger","btn-sm","rounded-pill",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()(),t.TgZ(6,"li",2)(7,"a",3),t._uU(8,"Mantenedor Establecimientos"),t.qZA()()()(),t._UZ(9,"div",5),t.TgZ(10,"h1"),t._uU(11,"Establecimientos"),t.qZA(),t.TgZ(12,"div",6)(13,"div",7)(14,"label"),t._uU(15,"Filtro:"),t.qZA(),t.TgZ(16,"input",8),t.NdJ("keyup",function(r){return i.filter(r.target)}),t.qZA()()(),t.TgZ(17,"div",9)(18,"section")(19,"div",10)(20,"div",11,12)(22,"div",13)(23,"table",14)(24,"thead")(25,"tr",15)(26,"th"),t._uU(27,"C\xd3DIGO EMPRESA "),t.qZA(),t.TgZ(28,"th"),t._uU(29,"NOMBRE "),t.qZA(),t.TgZ(30,"th"),t._uU(31,"DIRECCI\xd3N "),t.qZA(),t.TgZ(32,"th"),t._uU(33,"ESTABLECIMIENTOS "),t.qZA()()(),t.TgZ(34,"tbody"),t.YNc(35,me,11,3,"tr",16),t.qZA()(),t.TgZ(36,"nav",17)(37,"ul",18)(38,"li")(39,"button",19),t.NdJ("click",function(){return i.pagTo(0)}),t._uU(40,"Primero"),t.qZA()(),t.TgZ(41,"li")(42,"button",19),t.NdJ("click",function(){return i.previus()}),t._uU(43,"Anterior"),t.qZA()(),t.YNc(44,he,3,5,"li",20),t.TgZ(45,"li")(46,"button",19),t.NdJ("click",function(){return i.next()}),t._uU(47,"Siguiente"),t.qZA()(),t.TgZ(48,"li")(49,"button",19),t.NdJ("click",function(){return i.pagTo(i.cant-1)}),t._uU(50,"\xdaltimo"),t.qZA()()()()()()()()(),t.TgZ(51,"div",21)(52,"div",22)(53,"div",23)(54,"div",24)(55,"h1",25),t._uU(56,"Formulario Establecimientos"),t.qZA(),t._UZ(57,"button",26),t.qZA(),t.TgZ(58,"div",27)(59,"div",28)(60,"form",29,30)(62,"div",31)(63,"div",32)(64,"label",33),t._uU(65,"NOMBRE:"),t.qZA(),t.TgZ(66,"div",34),t._UZ(67,"input",35),t.qZA(),t.YNc(68,fe,2,1,"div",36),t.qZA(),t.TgZ(69,"div",32)(70,"label",37),t._uU(71,"REGI\xd3N"),t.qZA(),t.TgZ(72,"select",38)(73,"option",39),t._uU(74,"Selecciona Regi\xf3n"),t.qZA(),t.YNc(75,ge,2,1,"option",20),t.qZA(),t.YNc(76,Ee,2,1,"div",36),t.qZA()(),t.TgZ(77,"div",40)(78,"button",41),t.NdJ("click",function(){return i.reset()}),t._uU(79,"Cerrar"),t.qZA(),t.TgZ(80,"button",42),t.NdJ("click",function(){return i.addEstablishment(i.index)}),t._uU(81,"Agregar"),t.qZA()(),t.TgZ(82,"div",43),t._uU(83,"a"),t.qZA(),t.TgZ(84,"div",43),t._uU(85,"a"),t.qZA(),t.YNc(86,Me,33,2,"div",44),t.qZA()()()()()()),2&e){const a=t.MAs(61);t.xp6(35),t.Q6J("ngForOf",i.db),t.xp6(9),t.Q6J("ngForOf",i.setArrayFromNumber()),t.xp6(16),t.Q6J("formGroup",i.userForm),t.xp6(8),t.Q6J("ngIf",i.userForm.controls.FIRST_NAME.errors&&i.userForm.controls.FIRST_NAME.touched),t.xp6(7),t.Q6J("ngForOf",i.listRegiones),t.xp6(1),t.Q6J("ngIf",i.userForm.controls.REGION.errors&&i.userForm.controls.REGION.touched),t.xp6(4),t.Q6J("disabled",a.invalid),t.xp6(6),t.Q6J("ngIf",i.establishmentStatus&&i.establishmentStatus.length>0)}},dependencies:[h.mk,h.sg,h.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u],styles:['[_nghost-%COMP%]{width:70%!important;padding:1%}th[_ngcontent-%COMP%]{cursor:pointer}.arrow-up[_ngcontent-%COMP%]:before{content:"\\25b2";display:inline-block;margin-right:5px}.arrow-down[_ngcontent-%COMP%]:before{content:"\\25bc";display:inline-block;margin-right:5px}']}),o})();var w=p(2506);function ve(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",56)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"button",57),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.selectUser(r.ID))}),t._uU(17,"Modificar"),t.qZA(),t.TgZ(18,"button",58),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.deleteUser(r.ID))}),t._uU(19,"Eliminar"),t.qZA()()()}if(2&o){const e=n.$implicit,i=t.oxw();t.xp6(2),t.AsE("",e.FIRST_NAME," ",e.LAST_NAME,""),t.xp6(2),t.Oqu(e.ROL_NAME||"No Asignado"),t.xp6(2),t.Oqu(e.PHONE),t.xp6(2),t.Oqu(e.EMAIL),t.xp6(2),t.Oqu(e.PHONE_OFFICE),t.xp6(2),t.Oqu(e.POSITION||"No Asignado"),t.xp6(2),t.hij("",i.showBusiness(e)||"No Asignado"," ")}}const Ze=function(o,n){return{"btn-info":o,"btn-primary":n}};function Ce(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"button",59),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw();return t.KtG(s.pagTo(r))}),t._uU(2),t.qZA()()}if(2&o){const e=n.index,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(2,Ze,i.pos==e+1,i.pos!=e+1)),t.xp6(1),t.Oqu(e+1)}}function xe(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El nombre del usuario es requerido."),t.qZA())}function Pe(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,xe,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.FIRST_NAME.errors.required)}}function Fe(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El apellido del usuario es requerido."),t.qZA())}function Ue(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Fe,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.LAST_NAME.errors.required)}}function qe(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El tel\xe9fono del usuario es requerido."),t.qZA())}function Ie(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del tel\xe9fono es inv\xe1lido (entre 7 y 12 d\xedgitos)."),t.qZA())}function Se(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,qe,2,0,"p",61),t.YNc(2,Ie,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.PHONE.errors.required),t.xp6(1),t.Q6J("ngIf",e.userForm.controls.PHONE.errors.pattern)}}function Oe(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El email contacto es requerido (ejemplo@correo.com)."),t.qZA())}function ye(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),t.qZA())}function Le(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),t.qZA())}function Be(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El correo ya se encuentra registrado."),t.qZA())}function De(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Oe,2,0,"p",61),t.YNc(2,ye,2,0,"p",61),t.YNc(3,Le,2,0,"p",61),t.YNc(4,Be,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.EMAIL.errors.required),t.xp6(1),t.Q6J("ngIf",e.userForm.controls.EMAIL.errors.email),t.xp6(1),t.Q6J("ngIf",e.userForm.controls.EMAIL.errors.pattern),t.xp6(1),t.Q6J("ngIf",e.userForm.controls.EMAIL.errors.used)}}function we(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El tel\xe9fono de la oficina del usuario es requerido (entre 7 y 12 d\xedgitos)."),t.qZA())}function Je(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El formato del tel\xe9fono es inv\xe1lido (entre 7 y 12 d\xedgitos)."),t.qZA())}function ke(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,we,2,0,"p",61),t.YNc(2,Je,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.PHONE_OFFICE.errors.required),t.xp6(1),t.Q6J("ngIf",e.userForm.controls.PHONE_OFFICE.errors.pattern)}}function Ye(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El cargo del usuario es requerido."),t.qZA())}function Qe(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Ye,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.POSITION.errors.required)}}function Ge(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"Empresa(s) del usuario es requerido."),t.qZA())}function He(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Ge,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.BUSINESS.errors.required)}}function Ve(o,n){if(1&o&&(t.TgZ(0,"option",62),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e.ID),t.xp6(1),t.Oqu(e.NAME)}}function Ke(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El rol del usuario es requerido."),t.qZA())}function $e(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"El rol del usuario es requerido."),t.qZA())}function je(o,n){if(1&o&&(t.TgZ(0,"div",60),t.YNc(1,Ke,2,0,"p",61),t.YNc(2,$e,2,0,"p",61),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.ROL.errors.required),t.xp6(1),t.Q6J("ngIf",e.userForm.controls.ROL.errors.min)}}function ze(o,n){if(1&o&&(t.TgZ(0,"span",63),t._uU(1),t.qZA()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(1),t.Oqu(i.showName(e))}}let Xe=(()=>{class o{constructor(e,i,a){this.authService=e,this.businesService=i,this.fb=a,this.verifyEmailMW=r=>{const s=r.value.toLowerCase().trim();if(!s)return null;let _;return _=this.dbTmp.length>0?this.dbTmp.find(d=>d.EMAIL.toLowerCase().trim()==s):this.listUser.find(d=>d.EMAIL.toLowerCase().trim()===s),_&&_.ID!=this.userForm.value.ID?{used:!0}:null},this.emailPattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$",this.showErrorEmail=!1,this.business=[],this.listUser=[],this.listRoles=[],this.isEdit=!1,this.saving=!1,this.userForm=this.fb.group({ID:[],FIRST_NAME:["",[l.kI.required]],LAST_NAME:["",[l.kI.required]],EMAIL:["",[l.kI.required,l.kI.email,this.verifyEmailMW]],ROL:[0,[l.kI.required,l.kI.min(1)]],PHONE:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],PHONE_OFFICE:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],POSITION:["",[l.kI.required,l.kI.min(1)]],BUSINESS:[[],[l.kI.required]]}),this.dbTmp=[],this.pos=1,this.db=[],this.cant=0}ngOnInit(){this.loadUsers(),this.loadBusiness(),this.loadRoles()}loadBusiness(){this.businesService.getAllBusiness().subscribe(e=>{e.status&&(this.business=e.status,this.business.map(i=>{i.view_name=`${i.CODE_BUSINESS} | ${i.NAME}`}))})}filter(e){const i=e.value?.toLowerCase().trim();if(this.pos=1,""!=e.value)return this.dbTmp.length>0&&(this.listUser=this.dbTmp),this.cant=1,this.db=this.listUser.filter(a=>{const r=`${a.FIRST_NAME?.toLowerCase()} ${a.LAST_NAME?.toLowerCase()}`;if(a.BUSINESS.filter(_=>_.NAME.toLowerCase().indexOf(i)>-1).length>0||a.FIRST_NAME?.toLowerCase().indexOf(i)>-1||a.LAST_NAME?.toLowerCase().indexOf(i)>-1||a.PHONE?.toLowerCase().indexOf(i)>-1||a.ROL_NAME?.toLowerCase().indexOf(i)>-1||a.EMAIL?.toLowerCase().indexOf(i)>-1||a.PHONE_OFFICE?.toLowerCase().indexOf(i)>-1||a.POSITION?.toLowerCase().indexOf(i)>-1||r.indexOf(i)>-1)return a}),0==this.dbTmp.length&&(this.dbTmp=this.listUser),this.listUser=this.db,this.db=this.db.splice(0,10),void(this.cant=Math.ceil(this.listUser.length/10)||1);this.dbTmp.length>0&&(this.listUser=this.dbTmp),this.db=this.listUser.slice(0,10),this.cant=Math.ceil(this.listUser.length/10)||1}loadRoles(){this.authService.getRoles.subscribe(e=>{e.status&&(this.listRoles=e.data)})}loadUsers(){this.listUser=[],this.dbTmp=[],c().fire({title:"Cargando Datos",text:"Se est\xe1 recuperando datos",timerProgressBar:!0,showConfirmButton:!1,allowEscapeKey:!1,allowOutsideClick:!1}),c().showLoading(),document.getElementById("inp_filter").value="",this.authService.getUsers.subscribe(e=>{e.status&&(this.listUser=e.data,this.dbTmp=e.data,this.cant=Math.ceil(this.listUser.length/10)||1,this.db=this.listUser.slice(0,10).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT),c().close())})}clearFrom(){this.userForm.reset({ROL:0,EMAIL:""})}showBusiness(e){let i=[];return e.BUSINESS.forEach(a=>{i.push(a.NAME.trim())}),i.join(", ")}showName(e){const i=this.business.find(a=>a.ID==e);return`${i.CODE_BUSINESS} | ${i.NAME}`}selectUser(e){this.isEdit=!0;const i=this.db.find(r=>r.ID==e);this.userForm.controls.ID.setValue(i.ID),this.userForm.controls.FIRST_NAME.setValue(i.FIRST_NAME),this.userForm.controls.LAST_NAME.setValue(i.LAST_NAME),this.userForm.controls.EMAIL.setValue(i.EMAIL),this.userForm.controls.PHONE.setValue(i.PHONE),this.userForm.controls.PHONE_OFFICE.setValue(i.PHONE_OFFICE),this.userForm.controls.POSITION.setValue(i.POSITION),this.userForm.controls.ROL.setValue(i.ID_ROL);const a=i.BUSINESS?.map(r=>r.ID_BUSINESS);this.userForm.controls.BUSINESS.setValue(a)}deleteUser(e){const i=this.db.find(a=>a.ID==e);c().fire({icon:"question",text:`\xbfEst\xe1s seguro de eliminar al usuario ${i.FIRST_NAME} ${i.LAST_NAME}?`,showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(a=>{a.isConfirmed&&this.authService.deleteUser(i.ID).subscribe(r=>{r.status&&(c().fire({icon:"success",text:r.msg}),this.loadUsers(),this.pos=1)})})}verifyEmail(){const e=this.userForm.value.EMAIL?.toLowerCase().trim(),i=this.listUser.find(a=>a.EMAIL.toLowerCase().trim()==e);return i&&i.ID!=this.userForm.value.ID?(this.showErrorEmail=!1,!1):(this.showErrorEmail=!0,this.userForm.controls.EMAIL.setErrors({used:!0}),!1)}verifyEmail2(e){return!!e?.notUnique}saveForm(){c().fire({icon:"info",text:"Guardando datos",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}),c().showLoading(),this.saving=!0,!this.userForm.invalid&&(this.isEdit?this.authService.updateUser(this.userForm.value).subscribe({next:e=>{c().close(),e.status&&(this.clearFrom(),document.getElementById("btnCloseModal")?.click(),c().fire({icon:"success",text:e.msg}),this.loadUsers(),this.pos=1,this.saving=!1)},error:e=>{c().close(),c().fire({icon:"error",text:"Algo sali\xf3 mal"})}}):this.authService.registerUser(this.userForm.value).subscribe({next:e=>{c().close(),e.status?(this.clearFrom(),document.getElementById("btnCloseModal")?.click(),c().fire({icon:"success",text:e.msg}),this.loadUsers(),this.pos=1,this.saving=!1):(c().close(),c().fire({icon:"warning",text:e.msg}),this.saving=!1)},error:e=>{c().close(),c().fire({icon:"error",text:"Algo sali\xf3 mal"})}}))}pagTo(e){this.pos=e+1,this.db=this.listUser.slice(10*e,10*(e+1)).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.listUser.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.listUser.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(B.e),t.Y36(Z.m),t.Y36(l.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mantainer-users"]],decls:127,vars:16,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],[1,"buttonRight"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[2,"height","50px"],[1,"row","mb-3"],[1,"col-md-12"],["id","inp_filter","type","text","placeholder","Filtro de b\xfasqueda",1,"form-control",3,"keyup"],[1,"table-responsive","mb-4"],[1,"row","w-100"],["id","table",1,"w-100"],["table1",""],[1,"w-100"],[1,"table-container","table","table-even","table-section","table-borderless","table-border","table-radius","d-lg-table"],[1,"text-center","w-100"],["class","text-end w-100",4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["for","inp_nom"],["type","text","formControlName","FIRST_NAME","id","inp_nom","placeholder","Nombre",1,"form-control"],["class","text-danger pl-0",4,"ngIf"],["for","inp_ap"],["type","text","formControlName","LAST_NAME","id","inp_ap","placeholder","Apellidos",1,"form-control"],[1,"row","mt-4"],["for","inp_tel"],["type","text","formControlName","PHONE","id","inp_tel","placeholder","912345678",1,"form-control"],["for","inp_email"],["type","text","formControlName","EMAIL","id","inp_email","placeholder","cto@correo.com",1,"form-control"],["type","text","formControlName","PHONE_OFFICE","required","","id","inp_tel","placeholder","912345678",1,"form-control"],["type","text","formControlName","POSITION","id","inp_email","placeholder","Gerente",1,"form-control"],["for",""],["formControlName","BUSINESS","optionLabel","view_name","optionValue","ID","defaultLabel","Seleccione Empresas",3,"options","selectedItemsLabel"],["for","inp_rol"],["formControlName","ROL","id","inp_rol",1,"form-select"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["class","badge bg-primary m-1",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","id","btnCloseModal","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"text-end","w-100"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-info",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"border","btn","btn-sm",3,"ngClass","click"],[1,"text-danger","pl-0"],[4,"ngIf"],[3,"value"],[1,"badge","bg-primary","m-1"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()(),t.TgZ(6,"li",2)(7,"a",3),t._uU(8,"Mantener Usuarios"),t.qZA()()()(),t.TgZ(9,"h1"),t._uU(10,"Usuarios"),t.qZA(),t.TgZ(11,"div",5)(12,"button",6),t.NdJ("click",function(){return i.isEdit=!1,i.clearFrom()}),t._uU(13,"Agregar Usuario"),t.qZA()(),t._UZ(14,"div",7),t.TgZ(15,"div",8)(16,"div",9)(17,"label"),t._uU(18,"Filtro:"),t.qZA(),t.TgZ(19,"input",10),t.NdJ("keyup",function(r){return i.filter(r.target)}),t.qZA()()(),t.TgZ(20,"div",11)(21,"section")(22,"div",12)(23,"div",13,14)(25,"div",15)(26,"table",16)(27,"thead")(28,"tr",17)(29,"th"),t._uU(30,"NOMBRE"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"ROL"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"TEL\xc9FONO"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"E-MAIL"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"T\xc9LEFONO OFICINA"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"CARGO"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"EMPRESAS"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"OPCIONES"),t.qZA()()(),t.TgZ(45,"tbody"),t.YNc(46,ve,20,8,"tr",18),t.qZA()(),t.TgZ(47,"nav",19)(48,"ul",20)(49,"li")(50,"button",21),t.NdJ("click",function(){return i.pagTo(0)}),t._uU(51,"Primero"),t.qZA()(),t.TgZ(52,"li")(53,"button",21),t.NdJ("click",function(){return i.previus()}),t._uU(54,"Anterior"),t.qZA()(),t.YNc(55,Ce,3,5,"li",22),t.TgZ(56,"li")(57,"button",21),t.NdJ("click",function(){return i.next()}),t._uU(58,"Siguiente"),t.qZA()(),t.TgZ(59,"li")(60,"button",21),t.NdJ("click",function(){return i.pagTo(i.cant-1)}),t._uU(61,"\xdaltimo"),t.qZA()()()()()()()()(),t.TgZ(62,"div",23)(63,"div",24)(64,"div",25)(65,"div",26)(66,"h1",27),t._uU(67,"Formulario Usuario"),t.qZA(),t._UZ(68,"button",28),t.qZA(),t.TgZ(69,"div",29)(70,"div",30)(71,"form",31)(72,"div",32)(73,"div",33)(74,"label",34),t._uU(75,"NOMBRE:"),t.qZA(),t._UZ(76,"input",35),t.YNc(77,Pe,2,1,"div",36),t.qZA(),t.TgZ(78,"div",33)(79,"label",37),t._uU(80,"APELLIDOS:"),t.qZA(),t._UZ(81,"input",38),t.YNc(82,Ue,2,1,"div",36),t.qZA()(),t.TgZ(83,"div",39)(84,"div",33)(85,"label",40),t._uU(86,"TEL\xc9FONO"),t.qZA(),t._UZ(87,"input",41),t.YNc(88,Se,3,2,"div",36),t.qZA(),t.TgZ(89,"div",33)(90,"label",42),t._uU(91,"E-MAIL"),t.qZA(),t._UZ(92,"input",43),t.YNc(93,De,5,4,"div",36),t.qZA()(),t.TgZ(94,"div",39)(95,"div",33)(96,"label",40),t._uU(97,"TEL\xc9FONO OFICINA"),t.qZA(),t._UZ(98,"input",44),t.YNc(99,ke,3,2,"div",36),t.qZA(),t.TgZ(100,"div",33)(101,"label",42),t._uU(102,"CARGO"),t.qZA(),t._UZ(103,"input",45),t.YNc(104,Qe,2,1,"div",36),t.qZA()(),t.TgZ(105,"div",39)(106,"div",33)(107,"label",46),t._uU(108,"EMPRESAS"),t.qZA(),t._UZ(109,"br")(110,"p-multiSelect",47),t.YNc(111,He,2,1,"div",36),t.qZA(),t.TgZ(112,"div",33)(113,"label",48),t._uU(114,"ROL"),t.qZA(),t.TgZ(115,"select",49)(116,"option",50),t._uU(117,"Selecciona Rol"),t.qZA(),t.YNc(118,Ve,2,2,"option",51),t.qZA(),t.YNc(119,je,3,2,"div",36),t.qZA(),t.TgZ(120,"div",33),t.YNc(121,ze,2,1,"span",52),t.qZA()()()()(),t.TgZ(122,"div",53)(123,"button",54),t._uU(124,"Cerrar"),t.qZA(),t.TgZ(125,"button",55),t.NdJ("click",function(){return i.saveForm()}),t._uU(126,"Guardar"),t.qZA()()()()()),2&e&&(t.xp6(46),t.Q6J("ngForOf",i.db),t.xp6(9),t.Q6J("ngForOf",i.setArrayFromNumber()),t.xp6(16),t.Q6J("formGroup",i.userForm),t.xp6(6),t.Q6J("ngIf",i.userForm.controls.FIRST_NAME.errors&&i.userForm.controls.FIRST_NAME.touched),t.xp6(5),t.Q6J("ngIf",i.userForm.controls.LAST_NAME.errors&&i.userForm.controls.LAST_NAME.touched),t.xp6(6),t.Q6J("ngIf",i.userForm.controls.PHONE.errors&&i.userForm.controls.PHONE.touched),t.xp6(5),t.Q6J("ngIf",i.userForm.controls.EMAIL.errors&&i.userForm.controls.EMAIL.touched),t.xp6(6),t.Q6J("ngIf",i.userForm.controls.PHONE_OFFICE.errors&&i.userForm.controls.PHONE_OFFICE.touched),t.xp6(5),t.Q6J("ngIf",i.userForm.controls.POSITION.errors&&i.userForm.controls.POSITION.touched),t.xp6(6),t.Q6J("options",i.business)("selectedItemsLabel","{0} Empresas seleccionadas"),t.xp6(1),t.Q6J("ngIf",i.userForm.controls.BUSINESS.errors&&i.userForm.controls.BUSINESS.touched),t.xp6(7),t.Q6J("ngForOf",i.listRoles),t.xp6(1),t.Q6J("ngIf",i.userForm.controls.ROL.errors&&i.userForm.controls.ROL.touched),t.xp6(2),t.Q6J("ngForOf",i.userForm.value.BUSINESS),t.xp6(4),t.Q6J("disabled",i.userForm.invalid||i.saving))},dependencies:[h.mk,h.sg,h.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u,w.NU],styles:["[_nghost-%COMP%]{width:100%!important;padding:1%}.buttonRight[_ngcontent-%COMP%]{position:absolute;right:40px}[_nghost-%COMP%]     .p-multiselect{min-width:15rem;width:100%;border-radius:100px!important}[_nghost-%COMP%]     .p-multiselect .p-multiselect-label{padding:8px!important;border-radius:100px!important;border-color:red!important}"]}),o})();var We=p(9314),J=p(5861),A=p(574),ti=p(371),k=p(529),ei=p(2340);let Y=(()=>{class o{constructor(e){this.http=e,this.url=`${ei.N.API_V1_URL}/logs`}get createLog(){return this.http.get(`${this.url}/`)}errorLog(e){return this.http.post(`${this.url}/error`,{error:e})}downloadExcel(e,i){let a=new k.WM;return a=a.set("Accept","application/vnd.ms-excel"),this.http.post(`${this.url}/`,{start:e,end:i},{headers:a,responseType:"blob"})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(k.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function ii(o,n){if(1&o&&(t.TgZ(0,"option",21),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}let oi=(()=>{class o{constructor(e,i,a,r){var s=this;this.businesService=e,this.productorService=i,this.ls=a,this.ratesService=r,this.datos=[],this.resumen=[],this.R_PapelCarton_NP=0,this.R_PapelCarton_P=0,this.R_PapelCarton_Sec=0,this.R_PapelCarton_Ter=0,this.R_PapelCarton_Total=0,this.R_Metal_NP=0,this.R_Metal_P=0,this.R_Metal_Sec=0,this.R_Metal_Ter=0,this.R_Metal_Total=0,this.R_Plastico_NP=0,this.R_Plastico_P=0,this.R_Plastico_Sec=0,this.R_Plastico_Ter=0,this.R_Plastico_Total=0,this.R_Madera_NP=0,this.R_Madera_P=0,this.R_Madera_Sec=0,this.R_Madera_Ter=0,this.R_Madera_Total=0,this.R_Total_Ton=0,this.R_Total_UF=0,this.NR_PapelCarton_NP=0,this.NR_PapelCarton_P=0,this.NR_PapelCarton_Sec=0,this.NR_PapelCarton_Ter=0,this.NR_PapelCarton_Total=0,this.NR_Metal_P=0,this.NR_Metal_NP=0,this.NR_Metal_Sec=0,this.NR_Metal_Ter=0,this.NR_Metal_Total=0,this.NR_Plastico_NP=0,this.NR_Plastico_P=0,this.NR_Plastico_Sec=0,this.NR_Plastico_Ter=0,this.NR_Plastico_Total=0,this.NR_Madera_NP=0,this.NR_Madera_P=0,this.NR_Madera_Sec=0,this.NR_Madera_Ter=0,this.NR_Madera_Total=0,this.NR_Compuestos_NP=0,this.NR_Compuestos_P=0,this.NR_Compuestos_Sec=0,this.NR_Compuestos_Ter=0,this.NR_Compuestos_Total=0,this.NR_Total_Ton=0,this.NR_Total_UF=0,this.RET_PapelCarton_NP=0,this.RET_PapelCarton_P=0,this.RET_PapelCarton_Sec=0,this.RET_PapelCarton_Ter=0,this.RET_PapelCarton_Total=0,this.RET_Metal_NP=0,this.RET_Metal_P=0,this.RET_Metal_Sec=0,this.RET_Metal_Ter=0,this.RET_Metal_Total=0,this.RET_Plastico_NP=0,this.RET_Plastico_P=0,this.RET_Plastico_Sec=0,this.RET_Plastico_Ter=0,this.RET_Plastico_Total=0,this.RET_Madera_NP=0,this.RET_Madera_P=0,this.RET_Madera_Sec=0,this.RET_Madera_Ter=0,this.RET_Madera_Total=0,this.RET_Total_Ton=0,this.RET_Total_UF=0,this.EyE_PapelCarton_Rec=0,this.EyE_Metal_Rec=0,this.EyE_Plastico_Rec=0,this.EyE_NR=0,this.EyE_Ret=0,this.Total_EyE=0,this.PapelCarton_Rec_Uf=0,this.Metal_Rec_Uf=0,this.Plastico_Rec_Uf=0,this.NR_Uf=0,this.PapelCarton_Neto=0,this.Metal_Neto=0,this.Plastico_Neto=0,this.NR_Neto=0,this.PapelCarton_IVA=0,this.Metal_IVA=0,this.Plastico_IVA=0,this.NR_IVA=0,this.totalIVA=0,this.PapelCarton_Bruto=0,this.Metal_Bruto=0,this.Plastico_Bruto=0,this.NR_Bruto=0,this.TotalBruto=0,this.TotalBruto_IVA=0,this.Total_Uf=0,this.valores=new Array(30).fill(0),this.years=[],this.selectedYear=-1,this.listBusiness=[],this.listStatements=[],this.filteredListBusiness=[],this.allUF=[],this.generarExcel=function(){var d=(0,J.Z)(function*(N){try{const T=parseInt(document.getElementById("f_year").value),b=yield s.productorService.getAllStatementByYear(T).toPromise(),v=(yield s.productorService.getTMP(T).toPromise()).data.res_business;if(b.status){c().fire({title:"Cargando Datos",text:"Se est\xe1 recuperando datos",timerProgressBar:!0,showConfirmButton:!1,allowEscapeKey:!1,allowOutsideClick:!1}),c().showLoading(),s.listStatements=b.data.res_business.sort((u,m)=>u.STATE===m.STATE?u.ID_BUSINESS-m.ID_BUSINESS:m.STATE-u.STATE),s.filteredListBusiness=s.listBusiness.filter(u=>!s.listStatements.some(m=>m.ID_BUSINESS===u.ID));const G=function(){var u=(0,J.Z)(function*(m){const f=v.filter(g=>g.ID_HEADER==m.ID_HEADER),x=v.filter(g=>g.ID_BUSINESS==m.ID_BUSINESS&&g.YEAR_STATEMENT==T-1&&1==g.STATE),E=v.find(g=>g.HEADER_ID==m.ID_HEADER);return{f,lt:x,user:{FIRST_NAME:E.FIRST_NAME,LAST_NAME:E.LAST_NAME}}});return function(f){return u.apply(this,arguments)}}();for(const u of s.listStatements){const{f:m,user:x}=yield G(u);m.forEach(O=>{s.setDeclaration(O)});const E=new Date(u.UPDATED_AT).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-");-1==s.allUF.findIndex(O=>O.date==E)&&(s.ratesUF=yield s.ratesService.getUfDate(E).toPromise(),s.allUF.push({date:E,data:s.ratesUF.data})),s.calculoAjustes(E,u.STATE);const g=new Date(u.UPDATED_AT).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});s.datos.push({"ID empresa":u.CODE_BUSINESS,"Nombre empresa":u.NAME,"A\xf1o declaraci\xf3n":T.toString(),"Estado declaraci\xf3n":1==u.STATE?"Enviada":2==u.STATE?"Pendiente":"Borrador","Fecha de env\xedo":g,Usuario:x.FIRST_NAME+" "+x.LAST_NAME,"R. Papel/cart\xf3n NP":s.setFormato(s.R_PapelCarton_NP),"R. Papel/cart\xf3n P":s.setFormato(s.R_PapelCarton_P),"R. Papel/cart\xf3n Sec":s.setFormato(s.R_PapelCarton_Sec),"R. Papel/cart\xf3n Ter":s.setFormato(s.R_PapelCarton_Ter),"R. Papel/cart\xf3n TOTAL":s.setFormato(s.R_PapelCarton_Total),"R. Metal NP":s.setFormato(s.R_Metal_NP),"R. Metal P":s.setFormato(s.R_Metal_P),"R. Metal Sec":s.setFormato(s.R_Metal_Sec),"R. Metal Ter":s.setFormato(s.R_Metal_Ter),"R. Metal TOTAL":s.setFormato(s.R_Metal_Total),"R. Pl\xe1stico NP":s.setFormato(s.R_Plastico_NP),"R. Pl\xe1stico P":s.setFormato(s.R_Plastico_P),"R. Pl\xe1stico Sec":s.setFormato(s.R_Plastico_Sec),"R. Pl\xe1stico Ter":s.setFormato(s.R_Plastico_Ter),"R. Pl\xe1stico TOTAL":s.setFormato(s.R_Plastico_Total),"R. Madera NP":s.setFormato(s.R_Madera_NP),"R. Madera P":s.setFormato(s.R_Madera_P),"R. Madera Sec":s.setFormato(s.R_Madera_Sec),"R. Madera Ter":s.setFormato(s.R_Madera_Ter),"R. Madera TOTAL":s.setFormato(s.R_Madera_Total),"R. Total Ton":s.setFormato(s.R_Total_Ton),"NR. Papel/cart\xf3n NP":s.setFormato(s.NR_PapelCarton_NP),"NR. Papel/cart\xf3n P":s.setFormato(s.NR_PapelCarton_P),"NR. Papel/cart\xf3n Sec":s.setFormato(s.NR_PapelCarton_Sec),"NR. Papel/cart\xf3n Ter":s.setFormato(s.NR_PapelCarton_Ter),"NR. Papel/cart\xf3n TOTAL":s.setFormato(s.NR_PapelCarton_Total),"NR. Metal NP":s.setFormato(s.NR_Metal_NP),"NR. Metal P":s.setFormato(s.NR_Metal_P),"NR. Metal Sec":s.setFormato(s.NR_Metal_Sec),"NR. Metal Ter":s.setFormato(s.NR_Metal_Ter),"NR. Metal TOTAL":s.setFormato(s.NR_Metal_Total),"NR. Pl\xe1stico NP":s.setFormato(s.NR_Plastico_NP),"NR. Pl\xe1stico P":s.setFormato(s.NR_Plastico_P),"NR. Pl\xe1stico Sec":s.setFormato(s.NR_Plastico_Sec),"NR. Pl\xe1stico Ter":s.setFormato(s.NR_Plastico_Ter),"NR. Pl\xe1stico TOTAL":s.setFormato(s.NR_Plastico_Total),"NR. Madera NP":s.setFormato(s.NR_Madera_NP),"NR. Madera P":s.setFormato(s.NR_Madera_P),"NR. Madera Sec":s.setFormato(s.NR_Madera_Sec),"NR. Madera Ter":s.setFormato(s.NR_Madera_Ter),"NR. Madera TOTAL":s.setFormato(s.NR_Madera_Total),"NR. Compuestos NP":s.setFormato(s.NR_Compuestos_NP),"NR. Compuestos P":s.setFormato(s.NR_Compuestos_P),"NR. Compuestos Sec":s.setFormato(s.NR_Compuestos_Sec),"NR. Compuestos Ter":s.setFormato(s.NR_Compuestos_Ter),"NR. Compuestos TOTAL":s.setFormato(s.NR_Compuestos_Total),"NR. Total Ton":s.setFormato(s.NR_Total_Ton),"RET. Papel/cart\xf3n NP":s.setFormato(s.RET_PapelCarton_NP),"RET. Papel/cart\xf3n P":s.setFormato(s.RET_PapelCarton_P),"RET. Papel/cart\xf3n Sec":s.setFormato(s.RET_PapelCarton_Sec),"RET. Papel/cart\xf3n Ter":s.setFormato(s.RET_PapelCarton_Ter),"RET. Papel/cart\xf3n TOTAL":s.setFormato(s.RET_PapelCarton_Total),"RET. Metal NP":s.setFormato(s.RET_Metal_NP),"RET. Metal P":s.setFormato(s.RET_Metal_P),"RET. Metal Sec":s.setFormato(s.RET_Metal_Sec),"RET. Metal Ter":s.setFormato(s.RET_Metal_Ter),"RET. Metal TOTAL":s.setFormato(s.RET_Metal_Total),"RET. Pl\xe1stico NP":s.setFormato(s.RET_Plastico_NP),"RET. Pl\xe1stico P":s.setFormato(s.RET_Plastico_P),"RET. Pl\xe1stico Sec":s.setFormato(s.RET_Plastico_Sec),"RET. Pl\xe1stico Ter":s.setFormato(s.RET_Plastico_Ter),"RET. Pl\xe1stico TOTAL":s.setFormato(s.RET_Plastico_Total),"RET. Madera NP":s.setFormato(s.RET_Madera_NP),"RET. Madera P":s.setFormato(s.RET_Madera_P),"RET. Madera Sec":s.setFormato(s.RET_Madera_Sec),"RET. Madera Ter":s.setFormato(s.RET_Madera_Ter),"RET. Madera TOTAL":s.setFormato(s.RET_Madera_Total),"RET. Total Ton":s.setFormato(s.RET_Total_Ton),"EyE Papel/cart\xf3n Rec TOTAL":s.setFormato(s.EyE_PapelCarton_Rec),"EyE Metal Rec TOTAL":s.setFormato(s.EyE_Metal_Rec),"EyE Plastico Rec TOTAL":s.setFormato(s.EyE_Plastico_Rec),"EyE NR TOTAL":s.setFormato(s.EyE_NR),"EyE Ret TOTAL":s.setFormato(s.EyE_Ret),"TOTAL PESO":s.setFormato(s.Total_EyE),"Papel/cart\xf3n Rec Tarifa":s.setFormato(s.rates[0].price),"Metal Rec Tarifa":s.setFormato(s.rates[1].price),"Plastico Rec Tarifa":s.setFormato(s.rates[2].price),"NR Tarifa":s.setFormato(s.rates[3].price),"Papel/cart\xf3n Rec Costo Anual UF":s.setFormato(s.PapelCarton_Rec_Uf),"Metal Rec Costo Anual UF":s.setFormato(s.Metal_Rec_Uf),"Plastico Rec Costo Anual UF":s.setFormato(s.Plastico_Rec_Uf),"NR Costo Anual UF":s.setFormato(s.NR_Uf),"Total Costo Anual (UF)":s.setFormato(s.Total_Uf),"Papel/cart\xf3n Neto CLP":s.setFormato(s.PapelCarton_Neto),"Metal Rec UF Neto CLP":s.setFormato(s.Metal_Neto),"Plastico Rec UF Neto CLP":s.setFormato(s.Plastico_Neto),"NR UF Neto CLP":s.setFormato(s.NR_Neto),"Total Neto (CLP)":s.setFormato(s.TotalBruto),"Papel/cart\xf3n Rec IVA":s.setFormato(s.PapelCarton_IVA),"Metal Rec IVA":s.setFormato(s.Metal_IVA),"Plastico Rec IVA":s.setFormato(s.Plastico_IVA),"NR IVA":s.setFormato(s.NR_IVA),"Total IVA":s.setFormato(s.totalIVA),"Papel/cart\xf3n Bruto CLP":s.setFormato(s.PapelCarton_Bruto),"Metal Rec UF Bruto CLP":s.setFormato(s.Metal_Bruto),"Plastico Rec UF Bruto CLP":s.setFormato(s.Plastico_Bruto),"NR UF Bruto CLP":s.setFormato(s.NR_Bruto),"Total Neto (CLP) + IVA":s.setFormato(s.TotalBruto_IVA)}),s.resetDatos()}for(let u=0;u<s.filteredListBusiness.length;u++)s.datos.push({"ID empresa":s.filteredListBusiness[u].CODE_BUSINESS,"Nombre empresa":s.filteredListBusiness[u].NAME,"A\xf1o declaraci\xf3n":"","Estado declaraci\xf3n":"NA","Fecha de env\xedo":"NA",Usuario:"NA"});let F=["Total EyE Productores (Reciclables, No Reciclables, Retornables / Reutilizables)","Total EyE Puestos en el mercado (Reciclables, No Reciclables)","Papel / cart\xf3n TOTAL  (Reciclables, No Reciclables, Retornables / Reutilizables)","Metal TOTAL  (Reciclables, No Reciclables, Retornables / Reutilizables)","Pl\xe1stico TOTAL  (Reciclables, No Reciclables, Retornables / Reutilizables)","Madera TOTAL  (Reciclables, No Reciclables, Retornables / Reutilizables)","Papel /  cart\xf3n TOTAL  (Reciclables, No Reciclables)","Metal  TOTAL (Reciclables, No Reciclables)","Pl\xe1stico  TOTAL (Reciclables, No Reciclables)","Madera  TOTAL (Reciclables, No Reciclables)","Compuestos TOTAL (No Reciclables)","Papel /   cart\xf3n TOTAL (Reciclables)","Metal   TOTAL (Reciclables)","Pl\xe1stico   TOTAL (Reciclables)","Total No Reciclable (No Reciclables)","Total Primarios No Peligrosos (Reciclables, No Reciclables)","Total Primarios Peligrosos (Reciclables, No Reciclables)","Total Secundarios (Reciclables, No Reciclables)","Total Terciarios (Reciclables, No Reciclables)","Papel / cart\xf3n UF TOTAL (Reciclables)","Metal UF TOTAL (Reciclables)","Plastico UF TOTAL (Reciclables)","NR.Total UF (No Reciclables)","Total UF (Reciclables, No Reciclables)","Papel / cart\xf3n Neto CLP (Reciclables)","Metal  Neto CLP (Reciclables)","Plastico Neto CLP (Reciclables)","NR Neto CLP (No Reciclables)","Total Neto(CLP) (Reciclables, No Reciclables)","TOTAL NETO + IVA (Reciclables, No Reciclables)"];for(let u=0;u<F.length;u++)s.resumen.push(u<24?{Items:F[u],Valor:s.setFormato(s.valores[u])}:{Items:F[u],Valor:"$"+s.setFormato(s.valores[u])});const U=A.P6.book_new(),H=A.P6.json_to_sheet(s.datos),V=A.P6.json_to_sheet(s.resumen);let q=[];for(let u=0;u<s.datos.length;u++){let m=Object.values(s.datos[u]);for(let f=0;f<m.length;f++)q[f]=30}var M=[];for(let u=0;u<q.length;u++)M.push({width:q[u]});H["!cols"]=M;let I=[];for(let u=0;u<s.resumen.length;u++){let m=Object.values(s.resumen[u]);for(let f=0;f<m.length;f++)I[f]=70}var R=[];for(let u=0;u<I.length;u++)R.push({width:I[u]});V["!cols"]=R,A.P6.book_append_sheet(U,H,"Datos"),A.P6.book_append_sheet(U,V,"Resumen totalizadores"),A.NC(U,`${N}_${T}.xlsx`),s.ls.createLog.subscribe(u=>{}),c().close(),s.datos=[],s.resumen=[],s.valores=new Array(29).fill(0)}else s.ls.errorLog("No se encuentran declaraciones asociadas al a\xf1o seleccionado").subscribe(G=>{}),c().fire({title:"\xa1Ups!",icon:"warning",text:"No se encuentran declaraciones asociadas al a\xf1o seleccionado.",showConfirmButton:!0})}catch(T){s.ls.errorLog("Ha sucedido un error al generar el archivo Excel, por favor pruebe de nuevo en unos minutos. Si el problema persiste p\xf3ngase en contacto con administraci\xf3n").subscribe(b=>{}),c().fire({title:"\xa1Ups!",icon:"error",text:"Ha sucedido un error al generar el archivo Excel, por favor pruebe de nuevo en unos minutos. Si el problema persiste p\xf3ngase en contacto con administraci\xf3n.",showConfirmButton:!0}),console.log(T)}});return function(N){return d.apply(this,arguments)}}();const _=(new Date).getFullYear();for(let d=2022;d<=_;d++)this.years.push(d)}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getAllBusiness(),this.ratesService.getCLP.subscribe({next:e=>{this.rates=e.data},error:e=>{c().close(),c().fire({title:"\xa1Ups!",icon:"error",text:"No se logr\xf3 obtener el valor de la UF",showConfirmButton:!0}),console.log(e)}}),this.ratesService.getUF.subscribe({next:e=>{this.ratesUF=e.data},error:e=>{c().close(),c().fire({title:"\xa1Ups!",icon:"error",text:"No se logr\xf3 obtener el valor de la UF",showConfirmButton:!0}),console.log(e)}})}getAllBusiness(){this.businesService.getAllBusiness().subscribe({next:e=>{this.listBusiness=e.status},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}loadStatements(e){this.productorService.getAllStatementByYear(e).subscribe(i=>{i.status&&(this.listStatements=i.data.res_business.sort((a,r)=>a.STATE===r.STATE?a.ID_BUSINESS-r.ID_BUSINESS:r.STATE-a.STATE),this.filteredListBusiness=this.listBusiness.filter(a=>!this.listStatements.some(r=>r.ID_BUSINESS===a.ID)))})}setFormato(e){const i="string"==typeof e?parseFloat(e.replace(/,/g,"")):e,a=Math.round(100*i)/100,[r,s]=a.toString().split("."),_=r.replace(/\B(?=(\d{3})+(?!\d))/g,".");return s&&"0"!==s?`${_},${s.padEnd(2,"0")}`:_}setDeclaration(e){const{RECYCLABILITY:i,TYPE_RESIDUE:a,HAZARD:r,PRECEDENCE:s,VALUE:_,AMOUNT:d}=e;1==i?(1==a?1==r?1==s?this.R_PapelCarton_P=_:2==s?this.R_PapelCarton_Sec=_:this.R_PapelCarton_Ter=_:this.R_PapelCarton_NP=_:2==a?1==r?1==s?this.R_Metal_P=_:2==s?this.R_Metal_Sec=_:this.R_Metal_Ter=_:this.R_Metal_NP=_:3==a?1==r?1==s?this.R_Plastico_P=_:2==s?this.R_Plastico_Sec=_:this.R_Plastico_Ter=_:this.R_Plastico_NP=_:4==a&&(1==r?1==s?this.R_Madera_P=_:2==s?this.R_Madera_Sec=_:this.R_Madera_Ter=_:this.R_Madera_NP=_),this.R_Total_Ton+=_,4!=a&&(this.R_Total_UF+=d)):2==i?(1==a?1==r?1==s?this.NR_PapelCarton_P=_:2==s?this.NR_PapelCarton_Sec=_:this.NR_PapelCarton_Ter=_:this.NR_PapelCarton_NP=_:2==a?1==r?1==s?this.NR_Metal_P=_:2==s?this.NR_Metal_Sec=_:this.NR_Metal_Ter=_:this.NR_Metal_NP=_:3==a?1==r?1==s?this.NR_Plastico_P=_:2==s?this.NR_Plastico_Sec=_:this.NR_Plastico_Ter=_:this.NR_Plastico_NP=_:4==a?1==r?1==s?this.NR_Madera_P=_:2==s?this.NR_Madera_Sec=_:this.NR_Madera_Ter=_:this.NR_Madera_NP=_:5==a&&(1==r?1==s?this.NR_Compuestos_P=_:2==s?this.NR_Compuestos_Sec=_:this.NR_Compuestos_Ter=_:this.NR_Compuestos_NP=_),this.NR_Total_Ton+=_,4!=a&&(this.NR_Total_UF+=d)):(1==a?1==r?1==s?this.RET_PapelCarton_P=_:2==s?this.RET_PapelCarton_Sec=_:this.RET_PapelCarton_Ter=_:this.RET_PapelCarton_NP=_:2==a?1==r?1==s?this.RET_Metal_P=_:2==s?this.RET_Metal_Sec=_:this.RET_Metal_Ter=_:this.RET_Metal_NP=_:3==a?1==r?1==s?this.RET_Plastico_P=_:2==s?this.RET_Plastico_Sec=_:this.RET_Plastico_Ter=_:this.RET_Plastico_NP=_:4==a&&(1==r?1==s?this.RET_Madera_P=_:2==s?this.RET_Madera_Sec=_:this.RET_Madera_Ter=_:this.RET_Madera_NP=_),this.RET_Total_Ton+=_,this.RET_Total_UF+=d)}resetDatos(){this.R_PapelCarton_NP=0,this.R_PapelCarton_P=0,this.R_PapelCarton_Sec=0,this.R_PapelCarton_Ter=0,this.R_Metal_NP=0,this.R_Metal_P=0,this.R_Metal_Sec=0,this.R_Metal_Ter=0,this.R_Plastico_NP=0,this.R_Plastico_P=0,this.R_Plastico_Sec=0,this.R_Plastico_Ter=0,this.R_Madera_NP=0,this.R_Madera_P=0,this.R_Madera_Sec=0,this.R_Madera_Ter=0,this.R_Total_Ton=0,this.R_Total_UF=0,this.NR_PapelCarton_NP=0,this.NR_PapelCarton_P=0,this.NR_PapelCarton_Sec=0,this.NR_PapelCarton_Ter=0,this.NR_Metal_P=0,this.NR_Metal_NP=0,this.NR_Metal_Sec=0,this.NR_Metal_Ter=0,this.NR_Plastico_NP=0,this.NR_Plastico_P=0,this.NR_Plastico_Sec=0,this.NR_Plastico_Ter=0,this.NR_Madera_NP=0,this.NR_Madera_P=0,this.NR_Madera_Sec=0,this.NR_Madera_Ter=0,this.NR_Compuestos_NP=0,this.NR_Compuestos_P=0,this.NR_Compuestos_Sec=0,this.NR_Compuestos_Ter=0,this.NR_Total_Ton=0,this.NR_Total_UF=0,this.RET_PapelCarton_NP=0,this.RET_PapelCarton_P=0,this.RET_PapelCarton_Sec=0,this.RET_PapelCarton_Ter=0,this.RET_Metal_NP=0,this.RET_Metal_P=0,this.RET_Metal_Sec=0,this.RET_Metal_Ter=0,this.RET_Plastico_NP=0,this.RET_Plastico_P=0,this.RET_Plastico_Sec=0,this.RET_Plastico_Ter=0,this.RET_Madera_NP=0,this.RET_Madera_P=0,this.RET_Madera_Sec=0,this.RET_Madera_Ter=0,this.RET_Total_Ton=0,this.RET_Total_UF=0,this.Total_EyE=0,this.TotalBruto=0,this.TotalBruto_IVA=0,this.R_PapelCarton_Total=0,this.R_Metal_Total=0,this.R_Plastico_Total=0,this.R_Madera_Total=0,this.NR_PapelCarton_Total=0,this.NR_Metal_Total=0,this.NR_Plastico_Total=0,this.NR_Madera_Total=0,this.NR_Compuestos_Total=0,this.RET_PapelCarton_Total=0,this.RET_Metal_Total=0,this.RET_Plastico_Total=0,this.RET_Madera_Total=0,this.EyE_PapelCarton_Rec=0,this.EyE_Metal_Rec=0,this.EyE_Plastico_Rec=0,this.EyE_NR=0,this.EyE_Ret=0,this.PapelCarton_Rec_Uf=0,this.Metal_Rec_Uf=0,this.Plastico_Rec_Uf=0,this.NR_Uf=0,this.Total_Uf=0,this.PapelCarton_Neto=0,this.Metal_Neto=0,this.Plastico_Neto=0,this.NR_Neto=0,this.PapelCarton_Bruto=0,this.Metal_Bruto=0,this.Plastico_Bruto=0,this.NR_Bruto=0,this.PapelCarton_IVA=0,this.Metal_IVA=0,this.Plastico_IVA=0,this.NR_IVA=0,this.totalIVA=0}calculoAjustes(e="",i){""!=e&&(this.ratesUF=this.allUF.find(a=>a.date==e)),this.R_PapelCarton_Total=this.R_PapelCarton_P+this.R_PapelCarton_Sec+this.R_PapelCarton_Ter+this.R_PapelCarton_NP,this.R_Metal_Total=this.R_Metal_P+this.R_Metal_Sec+this.R_Metal_Ter+this.R_Metal_NP,this.R_Plastico_Total=this.R_Plastico_P+this.R_Plastico_Sec+this.R_Plastico_Ter+this.R_Plastico_NP,this.R_Madera_Total=this.R_Madera_P+this.R_Madera_Sec+this.R_Madera_Ter+this.R_Madera_NP,this.NR_PapelCarton_Total=this.NR_PapelCarton_P+this.NR_PapelCarton_Sec+this.NR_PapelCarton_Ter+this.NR_PapelCarton_NP,this.NR_Metal_Total=this.NR_Metal_P+this.NR_Metal_Sec+this.NR_Metal_Ter+this.NR_Metal_NP,this.NR_Plastico_Total=this.NR_Plastico_P+this.NR_Plastico_Sec+this.NR_Plastico_Ter+this.NR_Plastico_NP,this.NR_Madera_Total=this.NR_Madera_P+this.NR_Madera_Sec+this.NR_Madera_Ter+this.NR_Madera_NP,this.NR_Compuestos_Total=this.NR_Compuestos_P+this.NR_Compuestos_Sec+this.NR_Compuestos_Ter+this.NR_Compuestos_NP,this.RET_PapelCarton_Total=this.RET_PapelCarton_P+this.RET_PapelCarton_Sec+this.RET_PapelCarton_Ter+this.RET_PapelCarton_NP,this.RET_Metal_Total=this.RET_Metal_P+this.RET_Metal_Sec+this.RET_Metal_Ter+this.RET_Metal_NP,this.RET_Plastico_Total=this.RET_Plastico_P+this.RET_Plastico_Sec+this.RET_Plastico_Ter+this.RET_Plastico_NP,this.RET_Madera_Total=this.RET_Madera_P+this.RET_Madera_Sec+this.RET_Madera_Ter+this.RET_Madera_NP,this.EyE_PapelCarton_Rec=this.R_PapelCarton_Total,this.EyE_Metal_Rec=this.R_Metal_Total,this.EyE_Plastico_Rec=this.R_Plastico_Total,this.EyE_NR=this.NR_PapelCarton_Total+this.NR_Metal_Total+this.NR_Plastico_Total+this.NR_Compuestos_Total,this.EyE_Ret=this.RET_Total_Ton,this.Total_EyE=this.EyE_PapelCarton_Rec+this.EyE_Metal_Rec+this.EyE_Plastico_Rec+this.EyE_NR,this.PapelCarton_Rec_Uf=this.EyE_PapelCarton_Rec*this.rates[0].price,this.Metal_Rec_Uf=this.EyE_Metal_Rec*this.rates[1].price,this.Plastico_Rec_Uf=this.EyE_Plastico_Rec*this.rates[2].price,this.NR_Uf=this.EyE_NR*this.rates[3].price,this.Total_Uf=this.PapelCarton_Rec_Uf+this.Metal_Rec_Uf+this.Plastico_Rec_Uf+this.NR_Uf,this.PapelCarton_Neto=(this.PapelCarton_Rec_Uf*this.ratesUF.data).toFixed(0),this.Metal_Neto=(this.Metal_Rec_Uf*this.ratesUF.data).toFixed(0),this.Plastico_Neto=(this.Plastico_Rec_Uf*this.ratesUF.data).toFixed(0),this.NR_Neto=(this.NR_Uf*this.ratesUF.data).toFixed(0),this.PapelCarton_IVA=this.PapelCarton_Rec_Uf*this.ratesUF.data*1.19-this.PapelCarton_Rec_Uf*this.ratesUF.data,this.Metal_IVA=this.Metal_Rec_Uf*this.ratesUF.data*1.19-this.Metal_Rec_Uf*this.ratesUF.data,this.Plastico_IVA=this.Plastico_Rec_Uf*this.ratesUF.data*1.19-this.Plastico_Rec_Uf*this.ratesUF.data,this.NR_IVA=this.NR_Uf*this.ratesUF.data*1.19-this.NR_Uf*this.ratesUF.data,this.PapelCarton_Bruto=(this.PapelCarton_Rec_Uf*this.ratesUF.data*1.19).toFixed(0),this.Metal_Bruto=(this.Metal_Rec_Uf*this.ratesUF.data*1.19).toFixed(0),this.Plastico_Bruto=(this.Plastico_Rec_Uf*this.ratesUF.data*1.19).toFixed(0),this.NR_Bruto=(this.NR_Uf*this.ratesUF.data*1.19).toFixed(0),this.totalIVA=this.PapelCarton_IVA+this.Metal_IVA+this.Plastico_IVA+this.NR_IVA,this.TotalBruto=parseInt(this.PapelCarton_Neto)+parseInt(this.Metal_Neto)+parseInt(this.Plastico_Neto)+parseInt(this.NR_Neto),this.TotalBruto_IVA=parseInt(this.PapelCarton_Bruto)+parseInt(this.Metal_Bruto)+parseInt(this.Plastico_Bruto)+parseInt(this.NR_Bruto),0!=i&&(this.valores[0]=this.valores[0]+parseFloat(this.Total_EyE)+parseFloat(this.EyE_Ret),this.valores[1]=this.valores[1]+parseFloat(this.Total_EyE),this.valores[2]=this.valores[2]+parseFloat(this.R_PapelCarton_Total)+parseFloat(this.NR_PapelCarton_Total)+parseFloat(this.RET_PapelCarton_Total),this.valores[3]=this.valores[3]+parseFloat(this.R_Metal_Total)+parseFloat(this.NR_Metal_Total)+parseFloat(this.RET_Metal_Total),this.valores[4]=this.valores[4]+parseFloat(this.R_Plastico_Total)+parseFloat(this.NR_Plastico_Total)+parseFloat(this.RET_Plastico_Total),this.valores[5]=this.valores[5]+parseFloat(this.R_Madera_Total)+parseFloat(this.NR_Madera_Total)+parseFloat(this.RET_Madera_Total),this.valores[6]=this.valores[6]+parseFloat(this.R_PapelCarton_Total)+parseFloat(this.NR_PapelCarton_Total),this.valores[7]=this.valores[7]+parseFloat(this.R_Metal_Total)+parseFloat(this.NR_Metal_Total),this.valores[8]=this.valores[8]+parseFloat(this.R_Plastico_Total)+parseFloat(this.NR_Plastico_Total),this.valores[9]=this.valores[9]+parseFloat(this.R_Madera_Total)+parseFloat(this.NR_Madera_Total),this.valores[10]=this.valores[10]+parseFloat(this.NR_Compuestos_Total),this.valores[11]=this.valores[11]+parseFloat(this.R_PapelCarton_Total),this.valores[12]=this.valores[12]+parseFloat(this.R_Metal_Total),this.valores[13]=this.valores[13]+parseFloat(this.R_Plastico_Total),this.valores[14]=this.valores[14]+parseFloat(this.NR_PapelCarton_Total)+parseFloat(this.NR_Metal_Total)+parseFloat(this.NR_Plastico_Total)+parseFloat(this.NR_Compuestos_Total),this.valores[15]=this.valores[15]+parseFloat(this.R_PapelCarton_NP)+parseFloat(this.R_Metal_NP)+parseFloat(this.R_Plastico_NP)+parseFloat(this.R_Madera_NP)+parseFloat(this.NR_PapelCarton_NP)+parseFloat(this.NR_Metal_NP)+parseFloat(this.NR_Plastico_NP)+parseFloat(this.NR_Madera_NP)+parseFloat(this.NR_Compuestos_NP),this.valores[16]=this.valores[16]+parseFloat(this.R_PapelCarton_P)+parseFloat(this.R_Metal_P)+parseFloat(this.R_Plastico_P)+parseFloat(this.R_Madera_P)+parseFloat(this.NR_PapelCarton_P)+parseFloat(this.NR_Metal_P)+parseFloat(this.NR_Plastico_P)+parseFloat(this.NR_Madera_P)+parseFloat(this.NR_Compuestos_P),this.valores[17]=this.valores[17]+parseFloat(this.R_PapelCarton_Sec)+parseFloat(this.R_Metal_Sec)+parseFloat(this.R_Plastico_Sec)+parseFloat(this.R_Madera_Sec)+parseFloat(this.NR_PapelCarton_Sec)+parseFloat(this.NR_Metal_Sec)+parseFloat(this.NR_Plastico_Sec)+parseFloat(this.NR_Madera_Sec)+parseFloat(this.NR_Compuestos_Sec),this.valores[18]=this.valores[18]+parseFloat(this.R_PapelCarton_Ter)+parseFloat(this.R_Metal_Ter)+parseFloat(this.R_Plastico_Ter)+parseFloat(this.R_Madera_Ter)+parseFloat(this.NR_PapelCarton_Ter)+parseFloat(this.NR_Metal_Ter)+parseFloat(this.NR_Plastico_Ter)+parseFloat(this.NR_Madera_Ter)+parseFloat(this.NR_Compuestos_Ter),this.valores[19]=this.valores[19]+parseFloat(this.PapelCarton_Rec_Uf),this.valores[20]=this.valores[20]+parseFloat(this.Metal_Rec_Uf),this.valores[21]=this.valores[21]+parseFloat(this.Plastico_Rec_Uf),this.valores[22]=this.valores[22]+parseFloat(this.NR_Uf),this.valores[23]=this.valores[23]+parseFloat(this.Total_Uf),this.valores[24]=this.valores[24]+parseFloat(this.PapelCarton_Neto),this.valores[25]=this.valores[25]+parseFloat(this.Metal_Neto),this.valores[26]=this.valores[26]+parseFloat(this.Plastico_Neto),this.valores[27]=this.valores[27]+parseFloat(this.NR_Neto),this.valores[28]=this.valores[28]+parseFloat(this.TotalBruto),this.valores[29]=this.valores[29]+parseFloat(this.TotalBruto_IVA))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.m),t.Y36(ti.u),t.Y36(Y),t.Y36(L.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-maintainer-declarations-productor"]],decls:28,vars:3,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"declaracion"],[1,"d-sm-flex","justify-content-between","mb-3","mb-md-0"],[1,"box","box-form","mb-4"],[1,"row","align-items-end"],[1,"col-12","col-xl-8","mb-5","mb-xl-0"],[1,"form-label"],[1,"input-group"],["id","f_year",1,"form-select","col-12","w-100",3,"ngModel","ngModelChange"],["value","-1","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-xl-4","mb-3","mb-xl-0"],[1,"row"],[1,"col-12"],[1,"btn","btn-primary","col-12","btn-lg",3,"disabled","click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),t._UZ(5,"i",5),t._uU(6," Inicio"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Declaraciones productores"),t.qZA()()(),t.TgZ(9,"section",7)(10,"h1"),t._uU(11,"Declaraciones productores"),t.qZA(),t._UZ(12,"div",8),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),t._uU(17,"A\xf1o:"),t.qZA(),t.TgZ(18,"div",13)(19,"select",14),t.NdJ("ngModelChange",function(r){return i.selectedYear=r}),t.TgZ(20,"option",15),t._uU(21,"Seleccionar a\xf1o de declaraci\xf3n"),t.qZA(),t.YNc(22,ii,2,2,"option",16),t.qZA()()(),t.TgZ(23,"div",17)(24,"div",18)(25,"div",19)(26,"button",20),t.NdJ("click",function(){return i.generarExcel("Declaraciones_productores")}),t._uU(27," Generar Excel "),t.qZA()()()()()()()()),2&e&&(t.xp6(19),t.Q6J("ngModel",i.selectedYear),t.xp6(3),t.Q6J("ngForOf",i.years),t.xp6(4),t.Q6J("disabled",-1===i.selectedYear||"-1"===i.selectedYear.toString()))},dependencies:[h.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On],styles:["[_nghost-%COMP%]{width:40%!important;padding:1%}"]}),o})();var si=p(3813);function ai(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",15)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",44)(9,"button",45),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return s.getManager(r.ID),t.KtG(s.index=r.ID)}),t._uU(10,"Materiales/Regi\xf3n"),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.CODE_BUSINESS),t.xp6(2),t.Oqu(e.NAME),t.xp6(2),t.Oqu(e.LOC_ADDRESS)}}const Q=function(o,n){return{"btn-info":o,"btn-primary":n}};function ri(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"button",46),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw();return t.KtG(s.pagTo(r))}),t._uU(2),t.qZA()()}if(2&o){const e=n.index,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(2,Q,i.pos==e+1,i.pos!=e+1)),t.xp6(1),t.Oqu(e+1)}}function ni(o,n){if(1&o&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e)}}function li(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"Debe seleccionar algun material."),t.qZA())}function _i(o,n){if(1&o&&(t.TgZ(0,"div",47),t.YNc(1,li,2,0,"p",43),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.MATERIAL.errors.required)}}function ci(o,n){if(1&o&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e)}}function ui(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"Debe seleccionar alguna regi\xf3n."),t.qZA())}function di(o,n){if(1&o&&(t.TgZ(0,"div",47),t.YNc(1,ui,2,0,"p",43),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userForm.controls.REGION.errors.required)}}function pi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",15)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteManager(r.ID_MANAGER))}),t._uU(7," X "),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.MATERIAL),t.xp6(2),t.Oqu(e.REGION)}}function mi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"button",46),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.pagTo2(r))}),t._uU(2),t.qZA()()}if(2&o){const e=n.index,i=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(2,Q,i.pos2==e+1,i.pos2!=e+1)),t.xp6(1),t.Oqu(e+1)}}function hi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",48),t.TgZ(2,"div",6)(3,"div",7)(4,"label"),t._uU(5,"Filtro:"),t.qZA(),t.TgZ(6,"input",8),t.NdJ("keyup",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.filterForm(a.target))}),t.qZA()()(),t.TgZ(7,"table",14)(8,"thead")(9,"tr",15)(10,"th"),t._uU(11,"Material"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Regi\xf3n"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Eliminar"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,pi,8,2,"tr",16),t.qZA()(),t.TgZ(18,"nav",17)(19,"ul",18)(20,"li")(21,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.pagTo2(0))}),t._uU(22,"Primero"),t.qZA()(),t.TgZ(23,"li")(24,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.previus2())}),t._uU(25,"Anterior"),t.qZA()(),t.YNc(26,mi,3,5,"li",20),t.TgZ(27,"li")(28,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.next2())}),t._uU(29,"Siguiente"),t.qZA()(),t.TgZ(30,"li")(31,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.pagTo2(a.cant2-1))}),t._uU(32,"\xdaltimo"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(17),t.Q6J("ngForOf",e.db2),t.xp6(9),t.Q6J("ngForOf",e.setArrayFromNumber2())}}const gi=[{path:"",component:K.$,children:[{path:"home",component:$},{path:"profile",component:de},{path:"business",component:ue},{path:"establishment",component:Re},{path:"users",component:Xe},{path:"declarations",component:oi},{path:"faq",component:We.v},{path:"managers",component:(()=>{class o{constructor(e,i,a){this.businesService=e,this.managerService=i,this.fb=a,this.listRegiones=["Regi\xf3n de Arica y Parinacota","Regi\xf3n de Tarapac\xe1","Regi\xf3n de Antofagasta","Regi\xf3n de Atacama","Regi\xf3n de Coquimbo","Regi\xf3n de Valpara\xedso","Regi\xf3n Metropolitana","Regi\xf3n de O\u2019Higgins","Regi\xf3n del Maule","Regi\xf3n del \xd1uble","Regi\xf3n del Biob\xedo","Regi\xf3n de La Araucan\xeda","Regi\xf3n de Los R\xedos","Regi\xf3n de Los Lagos","Regi\xf3n de Ays\xe9n","Regi\xf3n de Magallanes"],this.listMateriales=[],this.filteredList=[],this.filteredForm=[],this.listBusiness=[],this.pos=1,this.db=[],this.cant=0,this.managerStatus=[],this.pos2=1,this.db2=[],this.cant2=0,this.index=0,this.MATERIAL="",this.REGION=""}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getAllBusiness(),this.getMaterials(),this.userForm=this.fb.group({MATERIAL:["",[l.kI.required]],REGION:["",[l.kI.required]]})}getAllBusiness(){this.businesService.getAllBusiness().subscribe({next:e=>{this.listBusiness=e.status,this.filteredList=e.status,this.cant=Math.ceil(this.listBusiness.length/10),this.db=this.listBusiness.slice(0,10).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT)},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}getMaterials(){this.managerService.getAllMaterials().subscribe({next:e=>{this.listMateriales=e.status.map(i=>i.MATERIAL)},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}getManager(e){this.managerService.getManager(e).subscribe({next:i=>{i.status?(this.managerStatus=i.status,this.filteredForm=i.status,this.cant2=Math.ceil(this.managerStatus.length/10),this.db2=this.managerStatus.slice(0,10).sort((a,r)=>r.ID_MANAGER-a.ID_MANAGER)):this.managerStatus=[],this.reset()},error:i=>{c().close(),c().fire({icon:"error",text:i.msg,title:"\xa1Ups!"}),this.reset()}})}getMaterialID(e){const i=this.listMateriales.find(s=>s===e),a=this.listMateriales.indexOf(i);return a>=0?a+1:null}addManager(e){if(this.verificarEstablecimiento()){const i=this.getMaterialID(this.userForm.value.MATERIAL),{REGION:a}=this.userForm.value;this.managerStatus.push(e),this.managerService.addManager(i,a,e).subscribe({next:r=>{r.status&&(this.pagTo2(0),c().fire({title:"Gestor agregado",text:"El gestor fue agregado exitosamente",icon:"success"})),this.getManager(e)},error:r=>{c().fire({title:"Error",text:"Error al agregar el Gestor",icon:"error"})}})}else c().fire({title:"Material y Regi\xf3n ya se encuentran registrados",text:"",icon:"error"})}deleteManager(e){c().fire({title:"\xbfEst\xe1s seguro que quieres eliminar el gestor?",showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.pagTo2(0),this.managerService.deleteManager(e).subscribe({next:a=>{a.status?(c().fire({title:"Gestor Eliminado",text:"",icon:"error"}),this.getManager(this.index)):c().fire({title:"Validar informaci\xf3n",text:a.msg,icon:"error"})},error:a=>{c().fire({title:"Formato inv\xe1lido",text:"",icon:"error"})}}))})}pagTo(e){this.pos=e+1,this.db=this.filteredList.slice(10*e,10*(e+1)).sort((i,a)=>a.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.filteredList.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.filteredList.slice(10*(this.pos-1),10*this.pos).sort((e,i)=>i.YEAR_STATEMENT-e.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}pagTo2(e){this.pos2=e+1,this.db2=this.filteredForm.slice(10*e,10*(e+1)).sort((i,a)=>i.ID_MANAGER-a.ID_MANAGER)}next2(){this.pos2>=this.cant2||(this.pos2++,this.db2=this.filteredForm.slice(10*(this.pos2-1),10*this.pos2).sort((e,i)=>e.ID_MANAGER-i.ID_MANAGER))}previus2(){this.pos2-1<=0||this.pos2>=this.cant2+1||(this.pos2=this.pos2-1,this.db2=this.filteredForm.slice(10*(this.pos2-1),10*this.pos2).sort((e,i)=>e.ID_MANAGER-i.ID_MANAGER))}setArrayFromNumber2(){return new Array(this.cant2)}reset(){this.pagTo2(0),this.userForm.reset(),this.userForm.patchValue({MATERIAL:"",REGION:""})}verificarEstablecimiento(){const{MATERIAL:e,REGION:i}=this.userForm.value;let a=!1;const r=e.trim();for(let s=0;s<this.managerStatus.length;s++)if(this.managerStatus[s].MATERIAL.toLowerCase()===r.toLowerCase()&&this.managerStatus[s].REGION===i){a=!0;break}return!a}filter(e){const i=e.value?.toLowerCase();this.pos=1;const a=[];return""!=e.value?(this.cant=1,this.db=this.listBusiness.filter(r=>{(r.NAME?.toLowerCase().indexOf(i)>-1||r.CODE_BUSINESS?.toLowerCase().indexOf(i)>-1||r.LOC_ADDRESS?.toLowerCase().indexOf(i)>-1)&&a.push(r)}),this.filteredList=a,this.db=a.slice(0,10),this.cant=Math.ceil(a.length/10),this.db):(this.filteredList=this.listBusiness,this.db=this.listBusiness.slice(0,10),this.cant=Math.ceil(this.listBusiness.length/10),this.db)}filterForm(e){const i=e.value?.toLowerCase();this.pos2=1;const a=[];return""!=e.value?(this.cant2=1,this.db2=this.managerStatus.filter(r=>{(r.MATERIAL?.toLowerCase().indexOf(i)>-1||r.REGION?.toLowerCase().indexOf(i)>-1)&&a.push(r)}),this.filteredForm=a,this.db2=a.slice(0,10),this.cant2=Math.ceil(a.length/10),this.db2):(this.filteredForm=this.managerStatus,this.db2=this.managerStatus.slice(0,10),this.cant2=Math.ceil(this.managerStatus.length/10),this.db2)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.m),t.Y36(si.b),t.Y36(l.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-maintainer-managers"]],decls:89,vars:9,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],[2,"height","30px"],[1,"row","mb-3"],[1,"col-md-12"],["type","text","placeholder","Filtro de b\xfasqueda",1,"form-control",3,"keyup"],[1,"table-responsive","mb-4"],[1,"row","w-100"],["id","table",1,"w-100"],["table1",""],[1,"w-100"],[1,"table-container","table","table-even","table-section","table-borderless","table-border","table-radius","d-lg-table"],[1,"text-center","w-100"],["class","text-center w-100",4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container"],[3,"formGroup"],["miFormulario","ngForm"],[1,"row"],[1,"col-md-6"],["for","inp_nom"],["formControlName","MATERIAL","id","inp_nom","required","",1,"form-select"],["value",""],["class","text-danger pl-0",4,"ngIf"],["for","inp_region"],["formControlName","REGION","id","inp_region","required","",1,"form-select"],[1,"modal-footer"],["type","button","id","btnCloseModal","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[2,"visibility","hidden"],[4,"ngIf"],[1,"btn-group"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-success","btn-sm","rounded-pill",3,"click"],[1,"border","btn","btn-sm",3,"ngClass","click"],[1,"text-danger","pl-0"],[2,"height","50px"],["type","button",1,"btn","btn-danger","btn-sm","rounded-pill",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()(),t.TgZ(6,"li",2)(7,"a",3),t._uU(8,"Mantenedor Gestores"),t.qZA()()()(),t._UZ(9,"div",5),t.TgZ(10,"h1"),t._uU(11,"Gestores"),t.qZA(),t.TgZ(12,"div",6)(13,"div",7)(14,"label"),t._uU(15,"Filtro:"),t.qZA(),t.TgZ(16,"input",8),t.NdJ("keyup",function(r){return i.filter(r.target)}),t.qZA()()(),t.TgZ(17,"div",9)(18,"section")(19,"div",10)(20,"div",11,12)(22,"div",13)(23,"table",14)(24,"thead")(25,"tr",15)(26,"th"),t._uU(27,"C\xd3DIGO EMPRESA "),t.qZA(),t.TgZ(28,"th"),t._uU(29,"NOMBRE "),t.qZA(),t.TgZ(30,"th"),t._uU(31,"DIRECCI\xd3N "),t.qZA(),t.TgZ(32,"th"),t._uU(33,"MATERIALES/REGI\xd3N "),t.qZA()()(),t.TgZ(34,"tbody"),t.YNc(35,ai,11,3,"tr",16),t.qZA()(),t.TgZ(36,"nav",17)(37,"ul",18)(38,"li")(39,"button",19),t.NdJ("click",function(){return i.pagTo(0)}),t._uU(40,"Primero"),t.qZA()(),t.TgZ(41,"li")(42,"button",19),t.NdJ("click",function(){return i.previus()}),t._uU(43,"Anterior"),t.qZA()(),t.YNc(44,ri,3,5,"li",20),t.TgZ(45,"li")(46,"button",19),t.NdJ("click",function(){return i.next()}),t._uU(47,"Siguiente"),t.qZA()(),t.TgZ(48,"li")(49,"button",19),t.NdJ("click",function(){return i.pagTo(i.cant-1)}),t._uU(50,"\xdaltimo"),t.qZA()()()()()()()()(),t.TgZ(51,"div",21)(52,"div",22)(53,"div",23)(54,"div",24)(55,"h1",25),t._uU(56,"Formulario Gestores"),t.qZA(),t._UZ(57,"button",26),t.qZA(),t.TgZ(58,"div",27)(59,"div",28)(60,"form",29,30)(62,"div",31)(63,"div",32)(64,"label",33),t._uU(65,"MATERIAL"),t.qZA(),t.TgZ(66,"select",34)(67,"option",35),t._uU(68,"Selecciona Material"),t.qZA(),t.YNc(69,ni,2,1,"option",20),t.qZA(),t.YNc(70,_i,2,1,"div",36),t.qZA(),t.TgZ(71,"div",32)(72,"label",37),t._uU(73,"REGI\xd3N"),t.qZA(),t.TgZ(74,"select",38)(75,"option",35),t._uU(76,"Selecciona Regi\xf3n"),t.qZA(),t.YNc(77,ci,2,1,"option",20),t.qZA(),t.YNc(78,di,2,1,"div",36),t.qZA()(),t.TgZ(79,"div",39)(80,"button",40),t.NdJ("click",function(){return i.reset()}),t._uU(81,"Cerrar"),t.qZA(),t.TgZ(82,"button",41),t.NdJ("click",function(){return i.addManager(i.index)}),t._uU(83,"Agregar"),t.qZA()(),t.TgZ(84,"div",42),t._uU(85,"a"),t.qZA(),t.TgZ(86,"div",42),t._uU(87,"a"),t.qZA(),t.YNc(88,hi,33,2,"div",43),t.qZA()()()()()()),2&e){const a=t.MAs(61);t.xp6(35),t.Q6J("ngForOf",i.db),t.xp6(9),t.Q6J("ngForOf",i.setArrayFromNumber()),t.xp6(16),t.Q6J("formGroup",i.userForm),t.xp6(9),t.Q6J("ngForOf",i.listMateriales),t.xp6(1),t.Q6J("ngIf",i.userForm.controls.MATERIAL.errors&&i.userForm.controls.MATERIAL.touched),t.xp6(7),t.Q6J("ngForOf",i.listRegiones),t.xp6(1),t.Q6J("ngIf",i.userForm.controls.REGION.errors&&i.userForm.controls.REGION.touched),t.xp6(4),t.Q6J("disabled",a.invalid),t.xp6(6),t.Q6J("ngIf",i.managerStatus&&i.managerStatus.length>0)}},dependencies:[h.mk,h.sg,h.O5,l._Y,l.YN,l.Kr,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u],styles:["[_nghost-%COMP%]{width:70%!important;padding:1%}"]}),o})()},{path:"logs",component:(()=>{class o{constructor(e){this.ls=e}ngOnInit(){}generarExcel(){const e=document.getElementById("ds").value,i=document.getElementById("de").value;""!=e?""!=i?new Date(e)>new Date(i)?c().fire({icon:"error",text:"Fecha de inicio debe ser menor a la fecha de t\xe9rmino"}):(c().fire({icon:"info",text:"Generando Excel",timerProgressBar:!0,showConfirmButton:!1,allowEscapeKey:!1,allowOutsideClick:!1}),c().showLoading(),this.ls.downloadExcel(e,i).subscribe(s=>{if(c().close(),s){const _=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});let d=document.createElement("a");d.href=window.URL.createObjectURL(_),d.download="logs_prorep",document.body.appendChild(d),d.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),d.remove(),window.URL.revokeObjectURL(d.href),document.getElementById("ds").value="",document.getElementById("de").value=""}})):c().fire({icon:"error",text:"Debe ingresar fecha de t\xe9rmino"}):c().fire({icon:"error",text:"Debe ingresar fecha de inicio"})}validaBtn(){const e=document.getElementById("ds").value,i=document.getElementById("de").value;return""==e||""==i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-logs"]],decls:30,vars:1,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"declaracion"],[1,"d-sm-flex","justify-content-between","mb-3","mb-md-0"],[1,"box","box-form","mb-4"],[1,"row","align-items-end"],[1,"col-12","col-xl-8","mb-5","mb-xl-0"],[1,"form-label"],[1,"input-group"],["type","date","name","","id","ds",1,"form-control"],["type","date","name","","id","de",1,"form-control"],[1,"col-12","col-xl-4","mb-3","mb-xl-0"],[1,"row"],[1,"col-12"],[1,"btn","btn-primary","col-12","btn-lg",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),t._UZ(5,"i",5),t._uU(6," Inicio"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Logs"),t.qZA()()(),t.TgZ(9,"section",7)(10,"h1"),t._uU(11,"Logs de Sistema "),t.qZA(),t._UZ(12,"div",8),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),t._uU(17,"Fecha Inicio:"),t.qZA(),t.TgZ(18,"div",13),t._UZ(19,"input",14),t.qZA()(),t.TgZ(20,"div",11)(21,"label",12),t._uU(22,"Fecha Fin:"),t.qZA(),t.TgZ(23,"div",13),t._UZ(24,"input",15),t.qZA()(),t.TgZ(25,"div",16)(26,"div",17)(27,"div",18)(28,"button",19),t.NdJ("click",function(){return i.generarExcel()}),t._uU(29," Generar Excel "),t.qZA()()()()()()()()),2&e&&(t.xp6(28),t.Q6J("disabled",i.validaBtn()))},styles:["[_nghost-%COMP%]{width:40%!important;padding:1%}"]}),o})()},{path:"**",redirectTo:"home",pathMatch:"full"}]}];let bi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[P.Bz.forChild(gi),P.Bz]}),o})();var Ei=p(4466);let Ai=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,bi,l.u5,l.UX,w.q4,Ei.m]}),o})()}}]);