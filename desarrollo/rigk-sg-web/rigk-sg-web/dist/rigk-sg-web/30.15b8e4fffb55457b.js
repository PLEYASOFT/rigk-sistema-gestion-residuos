"use strict";(self.webpackChunkrigk_sg_web=self.webpackChunkrigk_sg_web||[]).push([[30],{5030:(gt,x,_)=>{_.r(x),_.d(x,{ProductorStatementModule:()=>pt});var p=_(6895),Z=_(2045),C=_(5226),c=_.n(C),t=_(8256),m=_(433),b=_(371),q=_(8195),w=_(4351),A=_(574),E=_(2227);const B=["table1"];function M(i,s){if(1&i&&(t.TgZ(0,"tr",14)(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t._uU(4,"0"),t.qZA(),t.TgZ(5,"td",30),t._uU(6,"0"),t.qZA(),t.TgZ(7,"td",30),t._uU(8,"0"),t.qZA(),t.TgZ(9,"td",31),t._uU(10,"0 "),t.qZA()()),2&i){const e=s.$implicit,a=s.index;t.xp6(2),t.Oqu(e),t.xp6(1),t.MGl("id","last_weight_",a+1,""),t.xp6(2),t.MGl("id","actual_weight_",a+1,""),t.xp6(2),t.MGl("id","ajuste_",a+1,""),t.xp6(2),t.MGl("id","total_category_weight_",a+1,"")}}function N(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t._uU(4,"0"),t.qZA(),t.TgZ(5,"td",30),t._uU(6,"0"),t.qZA(),t.TgZ(7,"td",30),t._uU(8,"0"),t.qZA(),t.TgZ(9,"td",31),t._uU(10,"0 "),t.qZA(),t.TgZ(11,"td",31),t._uU(12,"$0"),t.qZA(),t.BQk()),2&i){const e=t.oxw(),a=e.$implicit,n=e.index;t.xp6(2),t.Oqu(a),t.xp6(1),t.MGl("id","actual_amount_",n,""),t.xp6(2),t.MGl("id","amount_anual_",n,""),t.xp6(2),t.MGl("id","amount_corregido_",n,""),t.xp6(2),t.MGl("id","total_category_amount_",n,""),t.xp6(2),t.MGl("id","uf_clp_",n,"")}}function Y(i,s){if(1&i&&(t.TgZ(0,"tr",14),t.YNc(1,N,13,6,"ng-container",32),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf","Retornables"!==e)}}let F=(()=>{class i{constructor(e,a,n,o){this.fb=e,this.productorService=a,this.actived=n,this.ratesService=o,this.tablas=["Reciclable","No Reciclable","Retornables / Reutilizables"],this.residuos=["Papel/Cart\xf3n Reciclable","Metal Reciclable","Pl\xe1stico Reciclable","No Reciclables","Retornables"],this.isSubmited=!1,this.isEdited=!1,this.id_business=0,this.year_statement=0,this.id_statement=null,this.detail=this.fb.group({precedence:[],hazard:[],recyclability:[1],type_residue:[1],value:[],amount:[]}),this.detailForm=[],this.headLastForm={},this.detailLastForm=[],this.tonSums={tonSum:Array.from({length:5},()=>0),l_tonSum:Array.from({length:5},()=>0)},this.tonNoReciclable=0,this.tonRetornable=0,this.l_tonNoReciclable=0,this.l_tonRetornable=0,this.result="",this.dif=Array.from({length:5},()=>0),this.ajuste=Array.from({length:5},()=>0),this.costoAnual=Array.from({length:5},()=>0),this.sumaAmount=0,this.sumaAjuste=0,this.amountAnual=0,this.actived.queryParams.subscribe(r=>{this.id_business=r.id_business,this.year_statement=r.year})}ngAfterViewInit(){this.generateForm()}ngOnInit(){}generateForm(){this.detailLastForm=JSON.parse(sessionStorage.getItem("detailLastForm")),this.detailForm=JSON.parse(sessionStorage.getItem("detailForm"));for(let e=0;e<this.detailForm.length;e++){const a=this.detailForm[e];1==a.recyclability?(this.tonSums.tonSum[a?.type_residue-1]=this.tonSums.tonSum[a?.type_residue-1]+parseFloat(a?.value),this.result=this.verifyNumber(this.tonSums.tonSum[a?.type_residue-1]),4!=a?.type_residue&&(document.getElementById(`actual_weight_${a?.type_residue}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.costoAnual[a?.type_residue-1]=parseFloat(this.result))):2==a.recyclability?4!=a?.type_residue&&(this.tonNoReciclable=this.tonNoReciclable+parseFloat(a?.value),this.result=this.verifyNumber(this.tonNoReciclable),document.getElementById("actual_weight_4").innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.costoAnual[3]=parseFloat(this.result)):3==a.recyclability&&(this.tonRetornable=this.tonRetornable+parseFloat(a?.value),this.result=this.verifyNumber(this.tonRetornable),document.getElementById("actual_weight_5").innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.costoAnual[4]=parseFloat(this.result))}for(let e=0;e<this.detailLastForm.length;e++){const a=this.detailLastForm[e];1==a.RECYCLABILITY?(this.tonSums.l_tonSum[a?.TYPE_RESIDUE-1]=this.tonSums.l_tonSum[a?.TYPE_RESIDUE-1]+parseFloat(a?.VALUE),this.result=this.verifyNumber(this.tonSums.l_tonSum[a?.TYPE_RESIDUE-1]),4!=a?.TYPE_RESIDUE&&(document.getElementById(`last_weight_${a?.TYPE_RESIDUE}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."))):2==a.RECYCLABILITY?4!=a?.TYPE_RESIDUE&&(this.l_tonNoReciclable=this.l_tonNoReciclable+parseFloat(a?.VALUE),this.result=this.verifyNumber(this.l_tonNoReciclable),document.getElementById("last_weight_4").innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,".")):3==a.RECYCLABILITY&&(this.l_tonRetornable=this.l_tonRetornable+parseFloat(a?.VALUE),this.result=this.verifyNumber(this.l_tonRetornable),document.getElementById("last_weight_5").innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."))}for(let e=1;e<=5;e++)e<=3?(this.result=this.verifyNumber(this.tonSums.tonSum[e-1]-this.tonSums.l_tonSum[e-1]),document.getElementById(`ajuste_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.ajuste[e-1]=parseFloat(this.result),0==this.tonSums.l_tonSum[e-1]?(document.getElementById(`total_category_weight_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById(`ajuste_${e}`).innerHTML="0",this.ajuste[e-1]=0,this.sumaAmount=this.sumaAmount+parseFloat(this.result)):(this.result=this.verifyNumber(this.tonSums.tonSum[e-1]+(this.tonSums.tonSum[e-1]-this.tonSums.l_tonSum[e-1])),document.getElementById(`total_category_weight_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.sumaAmount=this.sumaAmount+parseFloat(this.result))):4==e?(this.result=this.verifyNumber(this.tonNoReciclable-this.l_tonNoReciclable),document.getElementById(`ajuste_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.ajuste[e-1]=parseFloat(this.result),0==this.l_tonNoReciclable?(document.getElementById(`total_category_weight_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById(`ajuste_${e}`).innerHTML="0",this.ajuste[e-1]=0,this.sumaAmount=this.sumaAmount+parseFloat(this.result)):(this.result=this.verifyNumber(this.tonNoReciclable+(this.tonNoReciclable-this.l_tonNoReciclable)),document.getElementById(`total_category_weight_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.sumaAmount=this.sumaAmount+parseFloat(this.result))):(this.result=this.verifyNumber(this.tonRetornable-this.l_tonRetornable),document.getElementById(`ajuste_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.ajuste[e-1]=parseFloat(this.result),0==this.l_tonRetornable?(document.getElementById(`total_category_weight_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById(`ajuste_${e}`).innerHTML="0",this.ajuste[e-1]=0,this.sumaAmount=this.sumaAmount+parseFloat(this.result)):(this.result=this.verifyNumber(this.tonRetornable+(this.tonRetornable-this.l_tonRetornable)),document.getElementById(`total_category_weight_${e}`).innerHTML=this.result.replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.sumaAmount=this.sumaAmount+parseFloat(this.result)));document.getElementById("total_ton").innerHTML=this.verifyNumber(this.sumaAmount).replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById("pom_total").innerHTML=document.getElementById("total_ton").innerHTML,this.ratesService.getCLP.pipe((0,w.b)(e=>{this.sumaAmount=0;for(let a=0;a<4;a++)document.getElementById(`actual_amount_${a}`).innerHTML=e.data[a].price.toString(),document.getElementById(`amount_anual_${a}`).innerHTML=(e.data[a].price*this.costoAnual[a]).toFixed(2).replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById(`amount_corregido_${a}`).innerHTML=(e.data[a].price*this.ajuste[a]).toFixed(2).replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById(`total_category_amount_${a}`).innerHTML=(parseFloat((e.data[a].price*this.costoAnual[a]).toFixed(2))+parseFloat((e.data[a].price*this.ajuste[a]).toFixed(2))).toFixed(2).replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.sumaAmount=this.sumaAmount+parseFloat((e.data[a].price*this.costoAnual[a]).toFixed(2))+parseFloat((e.data[a].price*this.ajuste[a]).toFixed(2)),this.dif[a]=e.data[a].price*this.costoAnual[a]+e.data[a].price*this.ajuste[a],this.sumaAjuste=this.sumaAjuste+e.data[a].price*this.ajuste[a],this.amountAnual=this.amountAnual+e.data[a].price*this.costoAnual[a];return document.getElementById("anual_amount").innerHTML=this.amountAnual.toFixed(2).replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById("ajuste_amount").innerHTML=this.sumaAjuste.toFixed(2).replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById("total_amount").innerHTML=this.sumaAmount.toFixed(2).replace(/[.]/g,",").replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.getElementById("amount_total").innerHTML=document.getElementById("total_amount").innerHTML,this.ratesService.getUF})).subscribe(e=>{this.sumaAmount=0;for(let a=0;a<4;a++)this.sumaAmount=parseInt((this.sumaAmount+this.dif[a]*e.data*1.19).toFixed(0)),document.getElementById(`uf_clp_${a}`).innerHTML="$"+(this.dif[a]*e.data*1.19).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,".");document.getElementById("total_uf_clp").innerHTML="$"+this.sumaAmount.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,".")})}tableToExcel(){const e=A.P6.table_to_sheet(this.table.nativeElement,{raw:!0}),a=A.P6.book_new();A.P6.book_append_sheet(a,e,"Sheet1"),A.NC(a,"Tabla-Resumen.xlsx")}verifyNumber(e){return Number.isInteger(e)?e.toString():e.toFixed(2)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.qu),t.Y36(b.u),t.Y36(Z.gz),t.Y36(E.z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-summary-statement"]],viewQuery:function(e,a){if(1&e&&t.Gf(B,5),2&e){let n;t.iGM(n=t.CRH())&&(a.table=n.first)}},decls:130,vars:14,consts:[[1,"d-md-flex","justify-content-end"],[1,"btn",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o","fa-fw","fa-lg"],[1,"table-responsive","mb-4"],["table1",""],[1,"row","w-100"],[1,"w-100"],[1,"w-100","table-responsive-md"],[1,"table","table-even","table-section","table-borderless","table-align-middle","table-border","table-radius","d-lg-table","table-statement"],["colspan","13",2,"margin-bottom","100px"],[1,"text-center","w-100"],[1,"mi-columna",2,"background-color","rgb(8, 148, 110)","color","white"],[1,"columna-doble",2,"background-color","rgb(8, 148, 110)","color","white"],["class","text-end w-100",4,"ngFor","ngForOf"],[1,"text-end","w-100"],["colspan","4",1,"text-start",2,"background-color","rgb(8, 148, 110)","color","white"],["id","total_ton",2,"background-color","rgb(8, 148, 110)","color","white"],["colspan","13"],["id","table",1,"w-100"],["colspan","2",1,"text-start",2,"background-color","rgb(8, 148, 110)","color","white"],["id","anual_amount",2,"background-color","rgb(8, 148, 110)","color","white"],["id","ajuste_amount",2,"background-color","rgb(8, 148, 110)","color","white"],["id","total_amount",2,"background-color","rgb(8, 148, 110)","color","white"],["id","total_uf_clp",2,"background-color","rgb(8, 148, 110)","color","white"],["id","mi-tabla"],["colspan","2"],[2,"background-color","rgb(8, 148, 110)","color","white"],[1,"text-start"],["id","pom_total"],["id","amount_total"],[3,"id"],[2,"background-color","rgb(217, 217, 217)",3,"id"],[4,"ngIf"]],template:function(e,a){1&e&&(t.TgZ(0,"h1"),t._uU(1),t.qZA(),t.TgZ(2,"div",0)(3,"a",1),t.NdJ("click",function(){return a.tableToExcel()}),t._uU(4,"Exportar Excel "),t._UZ(5,"i",2),t.qZA()(),t.TgZ(6,"div",3,4)(8,"section")(9,"div",5)(10,"div",6)(11,"div",7)(12,"table",8)(13,"thead")(14,"tr")(15,"th",9),t._uU(16,"Resumen de EyE por subcategor\xeda"),t.qZA()()(),t._UZ(17,"p"),t.TgZ(18,"thead")(19,"tr",10)(20,"th",11),t._uU(21,"Subcategor\xeda"),t.qZA(),t.TgZ(22,"th",11),t._uU(23),t.qZA(),t.TgZ(24,"th",11),t._uU(25),t.qZA(),t.TgZ(26,"th",11),t._uU(27),t.qZA(),t.TgZ(28,"th",12),t._uU(29,"Total Neto (Ton)"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,M,11,5,"tr",13),t.qZA(),t.TgZ(32,"tfoot")(33,"tr",14)(34,"td",15),t._uU(35,"Total (Peso)"),t.qZA(),t.TgZ(36,"td",16),t._uU(37,"0"),t.qZA()()()()()()(),t.TgZ(38,"tr")(39,"td",17),t._uU(40," No se considera los EyE de madera "),t.qZA()(),t._UZ(41,"p"),t.TgZ(42,"tr")(43,"td",17),t._uU(44," En el primer a\xf1o de ejercicio (2023) no hay correcci\xf3n de lo proyectado vs datos reales debido a que no existen datos hist\xf3ricos"),t.qZA()(),t._UZ(45,"p"),t.TgZ(46,"div",5)(47,"div",18,4)(49,"div",7)(50,"table",8)(51,"thead")(52,"tr")(53,"th",9),t._uU(54),t.qZA()()(),t._UZ(55,"p"),t.TgZ(56,"thead")(57,"tr",10)(58,"th",11),t._uU(59,"Subcategor\xeda"),t.qZA(),t.TgZ(60,"th",11),t._uU(61),t.qZA(),t.TgZ(62,"th",11),t._uU(63),t.qZA(),t.TgZ(64,"th",11),t._uU(65),t.qZA(),t.TgZ(66,"th",11),t._uU(67,"Total corregido (UF)"),t.qZA(),t.TgZ(68,"th",11),t._uU(69,"Total Bruto (CLP) + IVA "),t.qZA()()(),t.TgZ(70,"tbody"),t.YNc(71,Y,2,1,"tr",13),t.qZA(),t.TgZ(72,"tfoot")(73,"tr",14)(74,"td",19),t._uU(75,"Total (Costo)"),t.qZA(),t.TgZ(76,"td",20),t._uU(77,"0"),t.qZA(),t.TgZ(78,"td",21),t._uU(79,"0"),t.qZA(),t.TgZ(80,"td",22),t._uU(81,"0"),t.qZA(),t.TgZ(82,"td",23),t._uU(83,"$0"),t.qZA()()()()()()(),t._UZ(84,"p"),t._uU(85," La factura se enviar\xe1 con el valor de la UF al momento de enviar la declaraci\xf3n. "),t._UZ(86,"p"),t.TgZ(87,"div",24)(88,"table",8)(89,"thead")(90,"tr")(91,"th",25),t._uU(92),t.qZA()()(),t._UZ(93,"p"),t.TgZ(94,"thead")(95,"tr",10)(96,"th",26),t._uU(97,"Total Subcategor\xedas de EyE"),t.qZA(),t.TgZ(98,"th",26),t._uU(99,"Total EyE"),t.qZA()()(),t.TgZ(100,"tbody")(101,"tr",10)(102,"td",27),t._uU(103,"Total EyE"),t.qZA(),t.TgZ(104,"td",28),t._uU(105,"0"),t.qZA()()()()(),t._UZ(106,"p")(107,"p"),t.TgZ(108,"div",24)(109,"table",8)(110,"thead")(111,"tr")(112,"th",25),t._uU(113),t.qZA()()(),t._UZ(114,"p"),t.TgZ(115,"thead")(116,"tr",10)(117,"th",26),t._uU(118,"Material"),t.qZA(),t.TgZ(119,"th",26),t._uU(120,"Total UF"),t.qZA()()(),t.TgZ(121,"tbody")(122,"tr",10)(123,"td",27),t._uU(124,"Costo Total"),t.qZA(),t.TgZ(125,"td",29),t._uU(126,"0"),t.qZA()()()()(),t.TgZ(127,"tr")(128,"td",17),t._uU(129," El Costo Total en $CL se factura con el valor de la UF al momento de enviar la declaraci\xf3n. A ese Monto Neto se le agrega el IVA. "),t.qZA()()()()),2&e&&(t.xp6(1),t.hij(" Tabla Resumen ",+a.year_statement," "),t.xp6(22),t.Oqu(a.year_statement-1),t.xp6(2),t.Oqu(a.year_statement),t.xp6(2),t.AsE("Ajuste ",a.year_statement-1," vs ",a.year_statement," (Ton)"),t.xp6(4),t.Q6J("ngForOf",a.residuos),t.xp6(23),t.hij("Resumen de costos (UF) ",+a.year_statement+1,""),t.xp6(7),t.hij("Ecotarifa ",+a.year_statement+1," (UF)"),t.xp6(2),t.hij("Costo Anual ",a.year_statement," (UF)"),t.xp6(2),t.AsE("Ajuste ",a.year_statement-1," vs ",a.year_statement," (UF)"),t.xp6(6),t.Q6J("ngForOf",a.residuos),t.xp6(21),t.hij("Total EyE declarados ",a.year_statement," (Ton)"),t.xp6(21),t.hij("Costo total ",+a.year_statement+1,""))},dependencies:[p.sg,p.O5],styles:[".d-none[_ngcontent-%COMP%]{display:none}#mi-tabla[_ngcontent-%COMP%]{width:25%!important}.mi-columna[_ngcontent-%COMP%]{width:100px}.columna-doble[_ngcontent-%COMP%]{width:200px}"]}),i})();function L(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t._uU(1),t.qZA(),t.TgZ(2,"td",16),t._uU(3,"0"),t.qZA(),t.TgZ(4,"td")(5,"input",17),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw().index,r=t.oxw().index,u=t.oxw();return t.KtG(u.updateValue(r+1,o+1,1,2,n.target))}),t.qZA()(),t.TgZ(6,"td",16),t._uU(7,"0"),t.qZA(),t.TgZ(8,"td")(9,"input",18),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw().index,r=t.oxw().index,u=t.oxw();return t.KtG(u.updateValue(r+1,o+1,1,1,n.target))}),t.qZA()(),t.TgZ(10,"td",16),t._uU(11,"0"),t.qZA(),t.TgZ(12,"td")(13,"input",18),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw().index,r=t.oxw().index,u=t.oxw();return t.KtG(u.updateValue(r+1,o+1,2,1,n.target))}),t.qZA()(),t.TgZ(14,"td",16),t._uU(15,"0"),t.qZA(),t.TgZ(16,"td"),t._UZ(17,"input",19),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"input",20),t.qZA(),t.TgZ(20,"td"),t._UZ(21,"input",19),t.qZA()}if(2&i){const e=t.oxw(),a=e.$implicit,n=e.index,o=t.oxw().index;t.xp6(1),t.Oqu(a),t.xp6(1),t.hYB("id","inp_l_",o+1,"_",n+1,"_1_2"),t.xp6(3),t.hYB("id","inp_",o+1,"_",n+1,"_1_2"),t.xp6(1),t.hYB("id","inp_l_",o+1,"_",n+1,"_1_1"),t.xp6(3),t.hYB("id","inp_",o+1,"_",n+1,"_1_1"),t.xp6(1),t.hYB("id","inp_l_",o+1,"_",n+1,"_2_1"),t.xp6(3),t.hYB("id","inp_",o+1,"_",n+1,"_2_1"),t.xp6(1),t.hYB("id","last_weight_",o+1,"_",n+1,""),t.xp6(3),t.hYB("id","actual_weight_",o+1,"_",n+1,""),t.xp6(2),t.hYB("id","actual_dif_",o+1,"_",n+1,""),t.xp6(2),t.hYB("id","actual_amount_",o+1,"_",n+1,"")}}function R(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",21),t._uU(1,"0"),t.qZA(),t.TgZ(2,"td",22)(3,"input",17),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw().index,r=t.oxw().index,u=t.oxw();return t.KtG(u.updateValue(r+1,o+1,1,2,n.target))}),t.qZA()(),t.TgZ(4,"td",21),t._uU(5,"0"),t.qZA(),t.TgZ(6,"td",22)(7,"input",18),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw().index,r=t.oxw().index,u=t.oxw();return t.KtG(u.updateValue(r+1,o+1,1,1,n.target))}),t.qZA()(),t.TgZ(8,"td",21),t._uU(9,"0"),t.qZA(),t.TgZ(10,"td",22)(11,"input",18),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw().index,r=t.oxw().index,u=t.oxw();return t.KtG(u.updateValue(r+1,o+1,2,1,n.target))}),t.qZA()(),t.TgZ(12,"td",21),t._uU(13,"0"),t.qZA(),t.TgZ(14,"td",22),t._UZ(15,"input",23),t.qZA(),t.TgZ(16,"td",22),t._UZ(17,"input",23),t.qZA(),t.TgZ(18,"td",22),t._UZ(19,"input",23),t.qZA()}if(2&i){const e=t.oxw().index,a=t.oxw().index;t.hYB("id","inp_l_",a+1,"_",e+1,"_1_2"),t.xp6(3),t.hYB("id","inp_",a+1,"_",e+1,"_1_2"),t.xp6(1),t.hYB("id","inp_l_",a+1,"_",e+1,"_1_1"),t.xp6(3),t.hYB("id","inp_",a+1,"_",e+1,"_1_1"),t.xp6(1),t.hYB("id","inp_l_",a+1,"_",e+1,"_2_1"),t.xp6(3),t.hYB("id","inp_",a+1,"_",e+1,"_2_1"),t.xp6(1),t.hYB("id","last_weight_",a+1,"_",e+1,""),t.xp6(3),t.hYB("id","actual_weight_",a+1,"_",e+1,""),t.xp6(2),t.hYB("id","actual_dif_",a+1,"_",e+1,""),t.xp6(2),t.hYB("id","actual_amount_",a+1,"_",e+1,"")}}function O(i,s){if(1&i&&(t.TgZ(0,"tr",14),t.ynx(1),t.YNc(2,L,22,21,"ng-template",15),t.YNc(3,R,20,20,"ng-template",15),t.BQk(),t.qZA()),2&i){const e=s.$implicit,a=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf","Envases compuestos"!==e||"Envases compuestos"===e&&"EyE No Reciclables"===a),t.xp6(1),t.Q6J("ngIf",!("Envases compuestos"!==e||"Envases compuestos"===e&&"EyE No Reciclables"===a))}}function P(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),t._uU(5),t.qZA()()(),t.TgZ(6,"tbody")(7,"tr",4)(8,"td",5),t._uU(9),t.qZA(),t.TgZ(10,"td",6),t._uU(11,"Primarios No Peligrosos"),t.qZA(),t.TgZ(12,"td",6),t._uU(13,"Primarios Peligrosos"),t.qZA(),t.TgZ(14,"td",6),t._uU(15,"Secundarios/Terciarios"),t.qZA(),t.TgZ(16,"td",6),t._uU(17,"Peso Total"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21,"Monto (UF)"),t.qZA()(),t.TgZ(22,"tr",7)(23,"td",8),t._uU(24),t.qZA(),t.TgZ(25,"td",9),t._uU(26),t.qZA(),t.TgZ(27,"td",8),t._uU(28),t.qZA(),t.TgZ(29,"td",9),t._uU(30),t.qZA(),t.TgZ(31,"td",8),t._uU(32),t.qZA(),t.TgZ(33,"td",9),t._uU(34),t.qZA(),t.TgZ(35,"td",8),t._uU(36),t.qZA(),t.TgZ(37,"td",9),t._uU(38),t.qZA(),t._UZ(39,"td",8),t.TgZ(40,"td",9),t._uU(41),t.qZA()(),t.YNc(42,O,4,2,"tr",10),t.qZA(),t.TgZ(43,"tfoot")(44,"tr"),t._UZ(45,"td",11),t.TgZ(46,"td",6)(47,"div",12)(48,"span"),t._uU(49,"Peso (ton):"),t.qZA(),t._UZ(50,"span",13),t.qZA()(),t.TgZ(51,"td",6)(52,"div",12)(53,"span"),t._uU(54,"Total:"),t.qZA(),t._UZ(55,"span",13),t.qZA()()()()()()),2&i){const e=s.$implicit,a=s.index,n=t.oxw();t.xp6(5),t.AsE("Declaraci\xf3n REP ",e," a\xf1o ",n.year_statement," en toneladas"),t.xp6(4),t.Oqu(e),t.xp6(10),t.AsE("Dif. ",n.year_statement-1," vs ",n.year_statement," (ton)"),t.xp6(5),t.Oqu(n.year_statement-1),t.xp6(2),t.Oqu(n.year_statement),t.xp6(2),t.Oqu(n.year_statement-1),t.xp6(2),t.Oqu(n.year_statement),t.xp6(2),t.Oqu(n.year_statement-1),t.xp6(2),t.Oqu(n.year_statement),t.xp6(2),t.Oqu(n.year_statement-1),t.xp6(2),t.Oqu(n.year_statement),t.xp6(3),t.Oqu(n.year_statement),t.xp6(1),t.Q6J("ngForOf",n.residuos),t.xp6(8),t.MGl("id","total_weight_",a+1,""),t.xp6(5),t.MGl("id","total_amount_",a+1,"")}}let D=(()=>{class i{constructor(e,a,n,o,r,u){this.fb=e,this.productorService=a,this.router=n,this.actived=o,this.ratesService=r,this.currencyPipe=u,this.tablas=["EyE Reciclables","EyE No Reciclables","EyE Retornables / Reutilizables"],this.residuos=["Papel/Cart\xf3n","Metal","Pl\xe1stico","Madera","Envases compuestos"],this.showOtherEnvInNoRecyclableTable=!1,this.isSubmited=!1,this.isEdited=!1,this.id_business="",this.year_statement=0,this.id_statement=null,this.detail=this.fb.group({precedence:[],hazard:[],recyclability:[1],type_residue:[1],value:[],amount:[]}),this.detailForm=[],this.headLastForm={},this.detailLastForm=[],this.rates=[],this.actived.queryParams.subscribe(l=>{this.id_business=l.id_business,this.year_statement=l.year})}ngOnDestroy(){}ngOnInit(){c().fire({title:"Cargando Datos",text:"Se est\xe1 recuperando datos",timerProgressBar:!0,showConfirmButton:!1}),c().showLoading(),this.ratesService.getCLP.subscribe({next:e=>{this.rates=e.data,this.getDraftStatement(),this.getValueStatementByYear()},error:e=>{c().close(),c().fire({title:"\xa1Ups!",icon:"error",text:"No se logr\xf3 obtener el valor de la UF",showConfirmButton:!0}),console.log(e)}})}ngAfterViewChecked(){this.calculateDiff()}calculateDiff(){let e=0,a=0,n=0,o=0,r=0,u=0;for(let l=1;l<=5;l++){const d=parseFloat(document.getElementById(`actual_weight_1_${l}`).value),I=parseFloat(document.getElementById(`actual_weight_2_${l}`).value),g=parseFloat(document.getElementById(`actual_weight_3_${l}`).value),U=parseFloat(document.getElementById(`last_weight_1_${l}`).innerHTML),T=parseFloat(document.getElementById(`last_weight_2_${l}`).innerHTML),f=parseFloat(document.getElementById(`last_weight_3_${l}`).innerHTML);let h=d-U,v=I-T,S=g-f;0==U&&(h=0),0==T&&(v=0),0==f&&(S=0),e+=parseFloat(document.getElementById(`actual_amount_1_${l}`).value.replace(",","."))||0,a+=parseFloat(document.getElementById(`actual_amount_2_${l}`).value.replace(",","."))||0,n+=parseFloat(document.getElementById(`actual_amount_3_${l}`).value.replace(",","."))||0,o+=parseFloat(document.getElementById(`actual_weight_1_${l}`).value.replace(",","."))||0,r+=parseFloat(document.getElementById(`actual_weight_2_${l}`).value.replace(",","."))||0,u+=parseFloat(document.getElementById(`actual_weight_3_${l}`).value.replace(",","."))||0,document.getElementById(`actual_dif_1_${l}`).value=`${h==1/0?100:h.toFixed(2)||0}`,document.getElementById(`actual_dif_2_${l}`).value=`${v==1/0?100:v.toFixed(2)||0}`,document.getElementById(`actual_dif_3_${l}`).value=`${S==1/0?100:S.toFixed(2)||0}`}document.getElementById("total_amount_1").innerHTML=e.toFixed(2).replace(".",","),document.getElementById("total_amount_2").innerHTML=a.toFixed(2).replace(".",","),document.getElementById("total_amount_3").innerHTML=n.toFixed(2).replace(".",","),document.getElementById("total_weight_1").innerHTML=o.toString(),document.getElementById("total_weight_2").innerHTML=r.toString(),document.getElementById("total_weight_3").innerHTML=u.toString()}getDraftStatement(){this.detailForm=[],this.productorService.getValueStatementByYear(this.id_business,this.year_statement,1).subscribe({next:e=>{if(e.status){e.data.header.STATE&&this.router.navigate(["/productor/home"]),this.id_statement=e.data.header.ID,sessionStorage.setItem("isEdited","true"),sessionStorage.setItem("id_statement",this.id_statement?.toString()||"null");for(let a=0;a<e.data.detail.length;a++){const n=e.data.detail[a],o=this.toLowerKeys(n);if(0==n?.VALUE)continue;document.getElementById(`inp_${n?.RECYCLABILITY}_${n?.TYPE_RESIDUE}_${n?.PRECEDENCE}_${n?.HAZARD}`).value=n?.VALUE.toString().replace(".",",");const r=(parseFloat(document.getElementById(`actual_weight_${n?.RECYCLABILITY}_${n?.TYPE_RESIDUE}`).value)||0)+parseFloat(n?.VALUE);let u=0;u=1==n.RECYCLABILITY&&n.TYPE_RESIDUE<=3?n?.VALUE*this.rates[n.TYPE_RESIDUE-1].price:2==n.RECYCLABILITY&&(n.TYPE_RESIDUE<=3||5==n.TYPE_RESIDUE)?n?.VALUE*this.rates[3].price:0;const l=document.getElementById(`actual_amount_${n?.RECYCLABILITY}_${n?.TYPE_RESIDUE}`).value.replace("$","").replace(",","."),d=(parseFloat(l)||0)+u;o.amount=u,this.detailForm.push(o),document.getElementById(`actual_weight_${n?.RECYCLABILITY}_${n?.TYPE_RESIDUE}`).value=r.toFixed(2).replace(".",","),document.getElementById(`actual_amount_${n?.RECYCLABILITY}_${n?.TYPE_RESIDUE}`).value=d.toFixed(2).replace(".",",")||""}sessionStorage.setItem("detailForm",JSON.stringify(this.detailForm))}},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}toLowerKeys(e){const a=Object.entries(e);return Object.fromEntries(a.map(([n,o])=>[n.toLowerCase(),o]))}updateValue(e,a,n,o,r){sessionStorage.setItem("isEdited","true");let u,l=0,d=0;/^[0-9]+(,[0-9]+)?$/.test(r.value)||(r.value=0);let g=parseFloat(r.value.replace(",","."));(!r.value||isNaN(g)||g<0)&&(g=0,r.value=0);for(let f=0;f<this.detailForm.length;f++){const h=this.detailForm[f];h.type_residue==a&&h.recyclability==e&&(l+=parseFloat(h.value||0)),h.type_residue==a&&h.precedence==n&&h.hazard==o&&h.recyclability==e&&(u=h)}if(0==this.detailForm.length&&(l=0),u){const f=this.detailForm.indexOf(u);l-={...this.detailForm[f]}.value,this.detailForm[f].value=g,l+=parseFloat(this.detailForm[f].value),d=1==e&&a<=3?g*this.rates[a-1].price:2==e&&(a<=3||5==a)?g*this.rates[3].price:0,this.detailForm[f].amount=d}else l+=g,d=1==e&&a<=3?g*this.rates[a-1].price:2==e&&(a<=3||5==a)?g*this.rates[3].price:0,this.detailForm.push({precedence:n,hazard:o,value:g,type_residue:a,amount:d,recyclability:e});d=1==e&&a<=3?(this.rates[a-1].price*l).toString():2==e&&(a<=3||5==a)?(this.rates[3].price*l).toString():"0",sessionStorage.setItem("detailForm",JSON.stringify(this.detailForm)),document.getElementById(`actual_weight_${e}_${a}`).value=`${l.toFixed(2).replace(".",",")}`,document.getElementById(`actual_amount_${e}_${a}`).value=parseFloat(d).toFixed(2).replace(".",",");const T=l-parseFloat(document.getElementById(`last_weight_${e}_${a}`).innerHTML.replace(",","."));document.getElementById(`actual_dif_${e}_${a}`).value=`${T==1/0?100:T.toFixed(2).replace(".",",")||0} `,this.calculateDiff()}getValueStatementByYear(){this.productorService.getValueStatementByYear(this.id_business,this.year_statement-1,0).subscribe({next:a=>{a.status||(c().close(),c().fire({title:"Tuvimos problemas",text:a.msg,icon:"error"}).then(n=>{n.isConfirmed&&this.router.navigate(["/productor/home"])})),this.detailLastForm=a.data.detail,sessionStorage.setItem("detailLastForm",JSON.stringify(this.detailLastForm)||'""'),this.headLastForm=a.data.health,c().close(),this.detailLastForm?.forEach(n=>{document.getElementById(`inp_l_${n?.RECYCLABILITY}_${n?.TYPE_RESIDUE}_${n?.PRECEDENCE}_${n?.HAZARD}`).innerHTML=n?.VALUE.toFixed(2).replace(".",",");const o=(parseFloat(document.getElementById(`last_weight_${n?.RECYCLABILITY}_${n?.TYPE_RESIDUE}`).innerHTML.replace(",","."))||0)+parseFloat(n?.VALUE);document.getElementById(`last_weight_${n?.RECYCLABILITY}_${n.TYPE_RESIDUE}`).innerHTML=o.toFixed(2).replace(".",",")})},error:a=>{c().close(),c().fire({icon:"error",text:a.msg,title:"\xa1Ups!"})}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.qu),t.Y36(b.u),t.Y36(Z.F0),t.Y36(Z.gz),t.Y36(E.z),t.Y36(p.H9))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-form-statement"]],decls:1,vars:1,consts:[["class","table-responsive mb-4",4,"ngFor","ngForOf"],[1,"table-responsive","mb-4"],[1,"table","table-even","table-section","table-borderless","table-align-middle","table-border","table-radius","table-statement"],["colspan","13"],[1,"text-center","fw-bold","bg-green-light"],["width","16%","rowspan","2",1,"text-start","bg-green","color-white",2,"font-size","18px"],["colspan","2"],[1,"text-center","bg-green-light-2"],["width","7%",1,"color-red"],["width","7%"],["class","text-end",4,"ngFor","ngForOf"],["colspan","7"],[1,"d-flex","justify-content-between"],[3,"id"],[1,"text-end"],[3,"ngIf"],[1,"bg-grey-light",3,"id"],["value","0","type","text","min","0",1,"form-control",3,"id","change"],["value","0","type","text","min","0",1,"form-control","form-control-sm",3,"id","change"],["value","0","readonly","",2,"border","none","background-color","transparent","text-align","center",3,"id"],["value","0","readonly","","type","text",2,"border","none","background-color","transparent","text-align","center",3,"id"],[1,"bg-grey-light",2,"display","none",3,"id"],[2,"display","none"],["value","0","readonly","","type","text",1,"form-control","form-control-sm",3,"id"]],template:function(e,a){1&e&&t.YNc(0,P,56,17,"div",0),2&e&&t.Q6J("ngForOf",a.tablas)},dependencies:[p.sg,p.O5],styles:[".table-statement[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:20px 20px 0 0!important}"]}),i})(),$=(()=>{class i{constructor(e,a,n,o,r){this.businessService=e,this.productorService=a,this.rateService=n,this.router=o,this.actived=r,this.year_statement=0,this.id_business="",this.name_business="",this.rut="",this.loc_address="",this.phone="",this.email="",this.am_first_name="",this.am_last_name="",this.giro="",this.invoice_name="",this.invoice_email="",this.invoice_phone="",this.amountString="$0",this.amount_current_year=0,this.amount_previous_year=0,this.uf=0,this.totalCLP="",this.porcentajeDiff="",this.actived.queryParams.subscribe(u=>{this.id_business=u.id_business,this.year_statement=u.year})}ngOnInit(){this.getUf(),this.getBusiness(),this.getAmountDiff(),this.totalCLP=sessionStorage.getItem("totalCLP"),this.porcentajeDiff=sessionStorage.getItem("porcentajeDiff")}getUf(){this.rateService.getUF.subscribe(e=>{this.uf=e.data})}getBusiness(){this.businessService.getBusiness(this.id_business).subscribe({next:e=>{e.status&&(this.name_business=e.status[0].NAME,this.rut=e.status[0].VAT,this.loc_address=e.status[0].LOC_ADDRESS,this.phone=e.status[0].PHONE,this.email=e.status[0].EMAIL,this.am_first_name=e.status[0].AM_FIRST_NAME,this.am_last_name=e.status[0].AM_LAST_NAME,this.invoice_name=e.status[0].INVOICE_NAME,this.invoice_email=e.status[0].INVOICE_EMAIL,this.invoice_phone=e.status[0].INVOICE_PHONE,this.giro=e.status[0].GIRO)},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}getAmountDiff(){this.amount_previous_year=0,this.amount_current_year=0,this.productorService.getValueStatementByYear(this.id_business,this.year_statement-1,0).subscribe({next:e=>{if(e.status&&e.data.detail.length>0){for(let a=0;a<e.data.detail.length;a++){const n=e.data.detail[a];0!=n.AMOUNT&&(this.amount_previous_year=this.amount_previous_year+parseFloat(n.AMOUNT)*this.uf)}this.amount_previous_year=this.amount_previous_year*parseFloat(this.porcentajeDiff)*.01*1.19,this.amountString="$"+this.amount_previous_year.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}}),this.productorService.getValueStatementByYear(this.id_business,this.year_statement,1).subscribe({next:e=>{if(e.status&&e.data.detail.length>0){for(let a=0;a<e.data.detail.length;a++){const n=e.data.detail[a];0!=n.AMOUNT&&(this.amount_current_year=this.amount_current_year+parseFloat(n.AMOUNT)*this.uf)}this.amount_current_year=this.amount_current_year*parseFloat(this.porcentajeDiff)*.01*1.19}},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.m),t.Y36(b.u),t.Y36(E.z),t.Y36(Z.F0),t.Y36(Z.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-send-statement"]],decls:149,vars:7,consts:[["id","content",1,"w-100"],[1,"consulta-declaracion"],[1,"row"],[1,"col-12","col-lg-6","col-xl-4","d-flex"],[1,"box","box-semiradius","box-semiradius-secondary","box-header","mb-4","w-100"],[1,"box-header-h1"],[1,"list","list-data","list-data-tit-text-col","list-unstyled"],[1,"list-data__title"],["aria-hidden","true",1,"fa","fa-building","fa-fw","fa-lg"],[1,"list-data__text","flex-grow-1","ps-0"],["aria-hidden","true",1,"fa","fa-map-marker","fa-fw","fa-lg"],["aria-hidden","true",1,"fa","fa-envelope","fa-fw","fa-lg"],["aria-hidden","true",1,"fa","fa-user","fa-fw","fa-lg"],["aria-hidden","true",1,"fa","fa-phone","fa-fw","fa-lg"],[1,"d-flex"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6,"Informaci\xf3n ProREP"),t.qZA(),t.TgZ(7,"ul",6)(8,"li")(9,"span",7),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"span",9)(12,"strong"),t._uU(13,"Nombre SG:"),t.qZA(),t._UZ(14,"br"),t._uU(15,"Corporaci\xf3n PROREP para la Gesti\xf3n de Residuos "),t.qZA()(),t.TgZ(16,"li")(17,"span",7),t._UZ(18,"i",8),t.qZA(),t.TgZ(19,"span",9)(20,"strong"),t._uU(21,"Rut:"),t.qZA(),t._UZ(22,"br"),t._uU(23,"65.216.268-1 "),t.qZA()(),t.TgZ(24,"li")(25,"span",7),t._UZ(26,"i",10),t.qZA(),t.TgZ(27,"span",9)(28,"strong"),t._uU(29,"Direcci\xf3n:"),t.qZA(),t._UZ(30,"br"),t._uU(31,"Avda. Andr\xe9s Bello 2777, of. 501, Las Condes, Santiago "),t.qZA()(),t.TgZ(32,"li")(33,"span",7),t._UZ(34,"i",8),t.qZA(),t.TgZ(35,"span",9)(36,"strong"),t._uU(37,"Giro:"),t.qZA(),t._UZ(38,"br"),t._uU(39,"Gesti\xf3n de Residuos de Envases y Embalajes no Domiciliarios "),t.qZA()(),t.TgZ(40,"li")(41,"span",7),t._UZ(42,"i",11),t.qZA(),t.TgZ(43,"span",9)(44,"strong"),t._uU(45,"Correo:"),t.qZA(),t._UZ(46,"br"),t._uU(47,"admin@prorep.cl "),t.qZA()(),t.TgZ(48,"li")(49,"span",7),t._UZ(50,"i",8),t.qZA(),t.TgZ(51,"span",9)(52,"strong"),t._uU(53,"Asunto:"),t.qZA(),t._UZ(54,"br"),t._uU(55,"Pago cumplimiento Ley REP y nombre del socio "),t.qZA()(),t.TgZ(56,"li")(57,"span",7),t._UZ(58,"i",12),t.qZA(),t.TgZ(59,"span",9)(60,"strong"),t._uU(61,"Encargada de facturaci\xf3n:"),t.qZA(),t._UZ(62,"br"),t._uU(63,"Lorena Calder\xf3n "),t.qZA()(),t.TgZ(64,"li")(65,"span",7),t._UZ(66,"i",8),t.qZA(),t.TgZ(67,"span",9)(68,"strong"),t._uU(69,"Banco:"),t.qZA(),t._UZ(70,"br"),t._uU(71,"Santander "),t.qZA()(),t.TgZ(72,"li")(73,"span",7),t._UZ(74,"i",8),t.qZA(),t.TgZ(75,"span",9)(76,"strong"),t._uU(77,"Cuenta Corriente"),t.qZA(),t._UZ(78,"br"),t._uU(79,"89412617 "),t.qZA()()()()(),t.TgZ(80,"div",3)(81,"div",4)(82,"h2",5),t._uU(83,"Informaci\xf3n para Facturaci\xf3n"),t.qZA(),t.TgZ(84,"ul",6)(85,"li")(86,"span",7),t._UZ(87,"i",8),t.qZA(),t.TgZ(88,"span",9)(89,"strong"),t._uU(90,"Nombre Empresa:"),t.qZA(),t._UZ(91,"br"),t._uU(92),t.qZA()(),t.TgZ(93,"li")(94,"span",7),t._UZ(95,"i",8),t.qZA(),t.TgZ(96,"span",9)(97,"strong"),t._uU(98,"Rut:"),t.qZA(),t._UZ(99,"br"),t._uU(100),t.qZA()(),t.TgZ(101,"li")(102,"span",7),t._UZ(103,"i",8),t.qZA(),t.TgZ(104,"span",9)(105,"strong"),t._uU(106,"Giro:"),t.qZA(),t._UZ(107,"br"),t._uU(108),t.qZA()(),t.TgZ(109,"li")(110,"span",7),t._UZ(111,"i",10),t.qZA(),t.TgZ(112,"span",9)(113,"strong"),t._uU(114,"Direcci\xf3n:"),t.qZA(),t._UZ(115,"br"),t._uU(116),t._UZ(117,"br"),t.qZA()()()()(),t.TgZ(118,"div",3)(119,"div",4)(120,"h2",5),t._uU(121,"Contraparte Finanzas"),t.qZA(),t.TgZ(122,"ul",6)(123,"li")(124,"span",7),t._UZ(125,"i",12),t.qZA(),t.TgZ(126,"span",9)(127,"strong"),t._uU(128,"Nombre:"),t.qZA(),t._UZ(129,"br"),t._uU(130),t.qZA()(),t.TgZ(131,"li")(132,"span",7),t._UZ(133,"i",11),t.qZA(),t.TgZ(134,"span",9)(135,"strong"),t._uU(136,"Correo:"),t.qZA(),t._UZ(137,"br"),t._uU(138),t.qZA()(),t.TgZ(139,"li")(140,"span",7),t._UZ(141,"i",13),t.qZA(),t.TgZ(142,"span",9)(143,"strong"),t._uU(144,"Tel\xe9fono:"),t.qZA(),t._UZ(145,"br"),t._uU(146),t.qZA()()()()(),t.TgZ(147,"div",14),t._uU(148," En caso de que la informaci\xf3n se\xf1alada est\xe9 err\xf3nea o desactualizada por favor contactarse al correo de soporte de plataforma ProREP: soporte@prorep.cl "),t.qZA()()()()),2&e&&(t.xp6(92),t.hij("",a.name_business," "),t.xp6(8),t.hij("",a.rut," "),t.xp6(8),t.hij("",a.giro," "),t.xp6(8),t.Oqu(a.loc_address),t.xp6(14),t.hij("",a.invoice_name," "),t.xp6(8),t.hij("",a.invoice_email," "),t.xp6(8),t.hij("",a.invoice_phone," "))}}),i})();function H(i,s){if(1&i&&(t.TgZ(0,"p",11),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("Borrador guardado a las: ",t.xi3(2,1,e.hour,"HH:mm:ss"),"")}}function k(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeStep(-1))}),t._uU(1,"Atr\xe1s"),t.qZA()}}function j(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeStep(1))}),t._uU(1,"Siguiente"),t.qZA()}}function J(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updateFormState())}),t._uU(1,"Enviar"),t.qZA()}}function V(i,s){1&i&&t._UZ(0,"app-form-statement")}function G(i,s){1&i&&t._UZ(0,"app-summary-statement")}function Q(i,s){1&i&&t._UZ(0,"app-send-statement")}const y=function(i){return{active:i}};let z=(()=>{class i{constructor(e,a,n,o,r){this.fb=e,this.productorService=a,this.businessService=n,this.router=o,this.actived=r,this.tablas=["Reciclable","No Reciclable","Retornables / Reutilizados"],this.residuos=["Papel Cart\xf3n","Metal","Pl\xe1stico","Madera**","Envases compuestos"],this.position=1,this.hour=null,this.isSubmited=!1,this.isEdited=!1,this.id_business=0,this.name_business="",this.rut_business="",this.year_statement=0,this.id_statement=null,this.detailForm=[],this.actived.queryParams.subscribe(u=>{this.id_business=u.id_business,this.year_statement=u.year}),this.getNameBusiness()}ngOnDestroy(){this.isSubmited||this.saveDraft(),sessionStorage.removeItem("id_statement"),sessionStorage.removeItem("detailForm"),sessionStorage.removeItem("saving"),sessionStorage.removeItem("detailLastForm")}ngOnInit(){}getNameBusiness(){this.businessService.getBusiness(this.id_business.toString()).subscribe({next:e=>{e.status&&(this.name_business=e.status[0].NAME,this.rut_business=e.status[0].VAT)},error:e=>{c().close(),c().fire({icon:"error",text:e.msg,title:"\xa1Ups!"})}})}saveDraft(){const e=sessionStorage.getItem("saving")||!1,a=sessionStorage.getItem("isEdited")||!1;this.id_statement=parseInt(sessionStorage.getItem("id_statement"))||null;const n=sessionStorage.getItem("detailForm"),o=JSON.parse(n||"[]");let r=!0;for(let l=0;l<o.length;l++)0!=o[l].value&&(r=!1);const u={id_business:this.id_business,year_statement:this.year_statement,state:!1,id_statement:this.id_statement};if(r)o.push({precedence:1,hazard:1,recyclability:1,type_residue:1,value:0,amount:0}),c().fire({icon:"question",title:"\xbfFormulario vacio?",text:"El formulario tiene todos los valores en cero. \xbfEstas seguro de guardar borrador?",showConfirmButton:!0,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Guardar"}).then(l=>{if(l.isConfirmed)if(c().fire({title:"Guardando Datos",text:"Se est\xe1n guardando datos",timerProgressBar:!0,showConfirmButton:!1}),c().showLoading(),null!=this.id_statement||e){if(e)return;this.productorService.updateValuesStatement(this.id_statement,o,u).subscribe(d=>{d.status&&(this.hour=new Date,c().close())})}else sessionStorage.setItem("saving","true"),this.productorService.saveForm({header:u,detail:o}).subscribe(d=>{this.hour=new Date,d.status&&(sessionStorage.setItem("id_statement",d.data),c().close()),sessionStorage.removeItem("isEdited"),sessionStorage.removeItem("saving")});else this.position=1});else{if(!a)return void(this.hour=new Date);if(null!=this.id_statement||e){if(e)return;this.productorService.updateValuesStatement(this.id_statement,o,u).subscribe(l=>{l.status&&(this.hour=new Date)})}else sessionStorage.setItem("saving","true"),this.productorService.saveForm({header:u,detail:o}).subscribe(l=>{this.hour=new Date,l.status&&sessionStorage.setItem("id_statement",l.data),sessionStorage.removeItem("saving"),sessionStorage.removeItem("isEdited")})}}updateFormState(){this.id_statement=parseInt(sessionStorage.getItem("id_statement"))||null,c().fire({icon:"question",title:"Confirmaci\xf3n Env\xedo",text:"Usted est\xe1 a punto de enviar su declaraci\xf3n. Una vez enviada, no podr\xe1 realizar modificaciones sobre la misma. \xbfEsta seguro de realizar el env\xedo?",showConfirmButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0}).then(e=>{e.isConfirmed&&this.productorService.updateStateStatement(this.id_statement,!0).subscribe(a=>{c().fire({title:"Exito",text:"La declaraci\xf3n fue enviada exitosamente",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0}).then(n=>{sessionStorage.removeItem("id_statement"),sessionStorage.removeItem("isEdited"),this.isSubmited=!0,this.router.navigate(["/productor/home"])})})})}changeStep(e){0!=this.position?(this.position>=1&&this.position<3&&e>0&&this.saveDraft(),e>0?this.position<3&&(this.position+=e):this.position>1&&(this.position+=e)):this.position=1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.qu),t.Y36(b.u),t.Y36(q.m),t.Y36(Z.F0),t.Y36(Z.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-form"]],decls:36,vars:19,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],["style","text-align: right;",4,"ngIf"],[1,"w-100",2,"width","100% !important"],[1,"table-responsive","mb-2","mb-lg-4"],[1,"list","list-process","list-unstyled"],[1,"list-process__dot",3,"ngClass"],[2,"text-align","right"],["class","btn btn-warning",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()(),t.TgZ(6,"li",2)(7,"a",3),t._uU(8,"Consulta de Declaraci\xf3n"),t.qZA()(),t.TgZ(9,"li",5),t._uU(10),t.qZA()()(),t.TgZ(11,"h1"),t._uU(12,"Formulario"),t.qZA(),t._UZ(13,"hr")(14,"br")(15,"br"),t.YNc(16,H,3,4,"p",6),t.TgZ(17,"div",7)(18,"div",8)(19,"ul",9)(20,"li",10)(21,"a"),t._uU(22,"Formulario"),t.qZA()(),t.TgZ(23,"li",10)(24,"a"),t._uU(25,"Resumen"),t.qZA()(),t.TgZ(26,"li",10)(27,"a"),t._uU(28,"Facturaci\xf3n"),t.qZA()()()()(),t.TgZ(29,"div",11),t.YNc(30,k,2,0,"button",12),t.YNc(31,j,2,0,"button",13),t.YNc(32,J,2,0,"button",13),t.qZA(),t.YNc(33,V,1,0,"app-form-statement",14),t.YNc(34,G,1,0,"app-summary-statement",14),t.YNc(35,Q,1,0,"app-send-statement",14)),2&e&&(t.xp6(10),t.lnq("Declaraci\xf3n ",a.year_statement," - ",a.name_business,"(",a.rut_business,") "),t.xp6(6),t.Q6J("ngIf",null!=a.hour),t.xp6(4),t.Q6J("ngClass",t.VKq(13,y,1==a.position)),t.xp6(3),t.Q6J("ngClass",t.VKq(15,y,2==a.position)),t.xp6(3),t.Q6J("ngClass",t.VKq(17,y,3==a.position)),t.xp6(4),t.Q6J("ngIf",a.position>1),t.xp6(1),t.Q6J("ngIf",a.position<3),t.xp6(1),t.Q6J("ngIf",3==a.position),t.xp6(1),t.Q6J("ngIf",1==a.position),t.xp6(1),t.Q6J("ngIf",2==a.position),t.xp6(1),t.Q6J("ngIf",3==a.position))},dependencies:[p.mk,p.O5,F,D,$,p.uU],styles:["[_nghost-%COMP%]{width:90%!important;padding:1%}"]}),i})();function K(i,s){if(1&i&&(t.TgZ(0,"li")(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.price)}}let X=(()=>{class i{constructor(e){this.ratesService=e,this.types=["EyE reciclables de papel/cart\xf3n","EyE reciclables de metal","EyE reciclables de pl\xe1sticos","EyE no reciclables"],this.year=(new Date).getFullYear(),this.rates=[]}ngOnInit(){this.ratesService.getRates(this.year).subscribe(e=>{e.status&&e.data.forEach(a=>{this.rates.push({name:this.types[a.type-1],price:a.price})})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E.z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-home"]],decls:43,vars:1,consts:[["id","content"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item"],["aria-hidden","true",1,"fa","fa-home"],[1,"inicio"],[1,"box","box-inicio"],[1,"row"],[1,"col-12","col-md-7"],[1,"h1"],["href","mailto:soporte@prorep.cl"],["href","tel:+56979168394",1,"color-white"],[1,"col-12","col-md-5"],[1,"pt-4","pt-md-0","mt-3","mt-md-0","border-top","border-top-md-0"],[1,"list","list-tarifas","list-unstyled"],[1,"text-end","d-block","bg-blue","color-white"],[4,"ngFor","ngForOf"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3),t._UZ(4,"i",4),t._uU(5," Inicio"),t.qZA()()(),t.TgZ(6,"section",5)(7,"h1"),t._uU(8,"Inicio"),t.qZA(),t.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"h2",9),t._uU(13,"Bienvenida a mi declaraci\xf3n"),t.qZA(),t.TgZ(14,"p"),t._uU(15,"Como parte de las obligaciones que establece la Ley REP, los Productores deben informar la cantidad de EyE no domiciliarios (POM) puestos en el mercado el a\xf1o anterior."),t.qZA(),t.TgZ(16,"p"),t._uU(17,"ProREP pone a disposici\xf3n de sus socios la plataforma de declaraci\xf3n que dar\xe1 cumplimiento a la obligaci\xf3n de informar sus EyE."),t.qZA(),t.TgZ(18,"p"),t._uU(19,"La declaraci\xf3n de los EyE introducidos en el mercado el a\xf1o anterior deber\xe1 ser subida y enviada antes del 20 de marzo de cada a\xf1o"),t.qZA(),t.TgZ(20,"p"),t._uU(21,"En caso de problemas, errores, correcciones o dudas espec\xedficas contactarse con el \xc1rea de Soporte en el siguiente mail: "),t.TgZ(22,"a",10),t._uU(23,"soporte@prorep.cl"),t.qZA()(),t.TgZ(24,"h2",9),t._uU(25,"Contacto:"),t.qZA(),t.TgZ(26,"p")(27,"strong"),t._uU(28,"\xbfAlguna pregunta?"),t.qZA(),t._uU(29," P\xf3ngase en contacto con nuestro equipo de atenci\xf3n al cliente."),t.qZA(),t.TgZ(30,"p"),t._uU(31,"Celular "),t.TgZ(32,"strong")(33,"a",11),t._uU(34,"+56 9 7916 8394"),t.qZA()()()(),t.TgZ(35,"div",12)(36,"div",13)(37,"p"),t._uU(38,"Las tarifas por subcategor\xeda son de car\xe1cter anual por lo que estar\xe1n vigentes por todo el a\xf1o 2023."),t.qZA(),t.TgZ(39,"ul",14)(40,"li",15),t._uU(41,"Tarifas por tonelada (UF)"),t.qZA(),t.YNc(42,K,5,2,"li",16),t.qZA()()()()()()()),2&e&&(t.xp6(42),t.Q6J("ngForOf",a.rates))},dependencies:[p.sg]}),i})();var W=_(4135),tt=_(263);let et=(()=>{class i{constructor(e,a,n){this.fb=e,this.authService=a,this.router=n,this.pos="right",this.horaIngreso=new Date,this.formData=this.fb.group({actual:["",[m.kI.required]],password:["",[m.kI.required,m.kI.minLength(3)]],repeatPassword:["",[m.kI.required,m.kI.minLength(3)]]})}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.horaIngreso=new Date(sessionStorage.getItem("horaIngreso"))}btnrecovery(){const{actual:e,password:a,repeatPassword:n}=this.formData.value;this.authService.modifyPassword(a,n,e).subscribe({next:o=>{o.status?(c().fire({title:"Cambio de contrase\xf1a",text:"La contrase\xf1a fue cambiada exitosamente",icon:"success"}),this.router.navigate(["/auth/login"])):(c().fire({title:"Validar informaci\xf3n",text:o.msg,icon:"error"}),this.formData.reset())},error:o=>{c().fire({title:"Formato inv\xe1lido",text:"Contrase\xf1a debe contener al menos 8 caracteres",icon:"error"})}})}displayModifyPassword(){this.pos="right"==this.pos?"down":"right"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.qu),t.Y36(tt.e),t.Y36(Z.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-profile"]],decls:81,vars:16,consts:[[1,"container","mt-4"],[1,"mi-perfil"],[1,"box","box-mi-perfil","mb-5","d-flex","align-items-start"],[1,"list","list-data","list-data-title-green","column-md-2","gap-0","list-unstyled"],[1,"list-data__title"],[1,"list-data__text"],[1,"color-verde"],[1,"list","list-links","list-unstyled"],["id","accordionPanelsStayOpenExample",1,"accordion","accordion-flush"],[1,"accordion-item"],["id","panelsStayOpen-headingOne",1,"accordion-header"],["data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne",3,"click"],["aria-hidden","true"],["id","panelsStayOpen-collapseOne","aria-labelledby","panelsStayOpen-headingOne",1,"accordion-collapse","collapse"],[1,"accordion-body"],["autocomplete","off",1,"form-recovery",3,"formGroup"],[1,"mb-4"],[1,"input-group"],[1,"input-group-text","input-group-text-left"],["aria-hidden","true",1,"fa","fa-lock","fa-fw"],["type","password","id","password","formControlName","actual","placeholder","Contrase\xf1a actual",1,"form-control"],["type","password","id","password","formControlName","password","placeholder","Nueva contrase\xf1a",1,"form-control"],["type","password","id","repeatPassword","formControlName","repeatPassword","placeholder","Repetir contrase\xf1a",1,"form-control"],["type","button",1,"btn","btn-primary","btn-fa","w-100",3,"click"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-fw"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"h1"),t._uU(3,"Mi Perfil"),t.qZA(),t.TgZ(4,"div",2)(5,"ul",3)(6,"li")(7,"span",4),t._uU(8,"Nombre Usuario"),t.qZA(),t.TgZ(9,"span",5),t._uU(10),t.qZA()(),t.TgZ(11,"li")(12,"span",4),t._uU(13,"Perfil"),t.qZA(),t.TgZ(14,"span",5),t._uU(15),t.qZA()(),t.TgZ(16,"li")(17,"span",4),t._uU(18,"Tel\xe9fono M\xf3vil"),t.qZA(),t.TgZ(19,"span",5),t._uU(20),t.qZA()(),t.TgZ(21,"li")(22,"span",4),t._uU(23,"Correo"),t.qZA(),t.TgZ(24,"span",5),t._uU(25),t.qZA()(),t.TgZ(26,"li")(27,"span",4),t._uU(28,"Instituci\xf3n"),t.qZA(),t.TgZ(29,"span",5),t._uU(30),t.qZA()(),t.TgZ(31,"li")(32,"span",4),t._uU(33,"Cargo"),t.qZA(),t.TgZ(34,"span",5),t._uU(35),t.qZA()(),t.TgZ(36,"li")(37,"span",4),t._uU(38,"Tel\xe9fono Oficina"),t.qZA(),t.TgZ(39,"span",5),t._uU(40),t.qZA()(),t.TgZ(41,"li")(42,"span",4)(43,"b"),t._uU(44,"Fecha/ Hora ingreso"),t.qZA()(),t.TgZ(45,"span",5),t._uU(46),t.ALo(47,"date"),t.qZA()()()(),t.TgZ(48,"h2",6),t._uU(49,"Acciones"),t.qZA(),t.TgZ(50,"ul",7)(51,"div",8)(52,"div",9)(53,"h2",10)(54,"li",11),t.NdJ("click",function(){return a.displayModifyPassword()}),t.TgZ(55,"a")(56,"span"),t._uU(57,"Cambio de contrase\xf1a"),t.qZA(),t._UZ(58,"i",12),t.qZA()()(),t.TgZ(59,"div",13)(60,"div",14)(61,"form",15)(62,"div",16)(63,"div",17)(64,"button",18),t._UZ(65,"i",19),t.qZA(),t._UZ(66,"input",20),t.qZA()(),t.TgZ(67,"div",16)(68,"div",17)(69,"button",18),t._UZ(70,"i",19),t.qZA(),t._UZ(71,"input",21),t.qZA()(),t.TgZ(72,"div",16)(73,"div",17)(74,"button",18),t._UZ(75,"i",19),t.qZA(),t._UZ(76,"input",22),t.qZA()(),t.TgZ(77,"div",16)(78,"button",23),t.NdJ("click",function(){return a.btnrecovery()}),t._uU(79," Enviar "),t._UZ(80,"i",24),t.qZA()()()()()()()()()()),2&e&&(t.xp6(10),t.AsE("",a.userData.FIRST_NAME," ",a.userData.LAST_NAME,""),t.xp6(5),t.Oqu(a.userData.ROL_NAME),t.xp6(5),t.Oqu(a.userData.PHONE),t.xp6(5),t.Oqu(a.userData.EMAIL),t.xp6(5),t.Oqu(a.userData.BUSINESS),t.xp6(5),t.Oqu(a.userData.POSITION),t.xp6(5),t.Oqu(a.userData.PHONE_OFFICE),t.xp6(6),t.Oqu(t.xi3(47,13,a.horaIngreso,"dd-MM-yyyy H:mm:s")),t.xp6(12),t.Gre("fa fa-chevron-",a.pos,""),t.xp6(3),t.Q6J("formGroup",a.formData))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,p.uU],styles:[".accordion[_ngcontent-%COMP%]{border:none!important}.accordion-item[_ngcontent-%COMP%]{border:none}.accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]:last-child{border:none}.accordion[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{border:none}a[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]:hover{color:#09a57b}.swal-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]}),i})();function at(i,s){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function nt(i,s){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function it(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,o=t.oxw();return t.KtG(o.downloadPDF(n.CODE_BUSINESS,n.YEAR_STATEMENT))}),t._UZ(1,"i",37),t.qZA()}}function ot(i,s){if(1&i&&(t.TgZ(0,"a",38),t._UZ(1,"i",39),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("href","#/productor/form?year="+e.YEAR_STATEMENT+"&id_business="+e.CODE_BUSINESS,t.LSH)}}function st(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td",33),t.YNc(15,it,2,0,"button",34),t.YNc(16,ot,2,1,"a",35),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.CODE_BUSINESS),t.xp6(2),t.Oqu(e.NAME_BUSINESS),t.xp6(2),t.Oqu(e.YEAR_STATEMENT),t.xp6(2),t.Oqu(1==e.STATE?"Enviada":"Borrador"),t.xp6(2),t.Oqu(e.AMOUNT.toFixed(2).replace(".",",")),t.xp6(2),t.Oqu(t.xi3(13,8,e.UPDATED_AT,"dd-MM-yyyy H:mm:ss")),t.xp6(3),t.Q6J("ngIf",1==e.STATE),t.xp6(1),t.Q6J("ngIf",0==e.STATE)}}const rt=function(i,s){return{"btn-info":i,"btn-primary":s}};function lt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"button",40),t.NdJ("click",function(){const o=t.CHM(e).index,r=t.oxw();return t.KtG(r.pagTo(o))}),t._uU(2),t.qZA()()}if(2&i){const e=s.index,a=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(2,rt,a.pos==e+1,a.pos!=e+1)),t.xp6(1),t.Oqu(e+1)}}let ut=(()=>{class i{constructor(e){this.productorService=e,this.dbStatements=[],this.db=[],this.pos=1,this.business_name=[],this.years=[],this.cant=0}ngOnInit(){this.loadStatements()}loadStatements(){this.productorService.getStatementByUser.subscribe(e=>{e.status&&(e.data=e.data.sort((a,n)=>n.YEAR_STATEMENT-a.YEAR_STATEMENT),e.data.forEach(a=>{-1==this.business_name.indexOf(a.NAME_BUSINESS)&&this.business_name.push(a.NAME_BUSINESS),-1==this.years.indexOf(a.YEAR_STATEMENT)&&this.years.push(a.YEAR_STATEMENT)}),this.years.sort((a,n)=>n-a),this.dbStatements=e.data,this.cant=Math.ceil(this.dbStatements.length/10),this.db=this.dbStatements.slice(0,10).sort((a,n)=>n.YEAR_STATEMENT-a.YEAR_STATEMENT))})}filter(){const e=document.getElementById("f_name").value,a=document.getElementById("f_year").value,n=this.dbStatements.filter(o=>{if("-1"!=e&&o.NAME_BUSINESS==e){if("-1"==a)return o;if(o.YEAR_STATEMENT==a)return o}if("-1"==e){if("-1"==a)return o;if(o.YEAR_STATEMENT==a)return o}});this.db=n.slice(0,10).sort((o,r)=>r.YEAR_STATEMENT-o.YEAR_STATEMENT),this.cant=Math.ceil(n.length/10)}reset(){this.loadStatements()}pagTo(e){this.pos=e+1,this.db=this.dbStatements.slice(10*e,10*(e+1)).sort((a,n)=>n.YEAR_STATEMENT-a.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.dbStatements.slice(10*(this.pos-1),10*this.pos).sort((e,a)=>a.YEAR_STATEMENT-e.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.dbStatements.slice(10*(this.pos-1),10*this.pos).sort((e,a)=>a.YEAR_STATEMENT-e.YEAR_STATEMENT))}downloadPDF(e,a){c().fire({title:"Espere",text:"Generando PDF",showConfirmButton:!1}),c().showLoading(),this.productorService.downloadPDF(e,a).subscribe(n=>{const o=new Blob([n],{type:"application/pdf"});let r=document.createElement("a");r.href=window.URL.createObjectURL(o),r.download=`Reporte_${a}`,document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),r.remove(),window.URL.revokeObjectURL(r.href),c().close()})}setArrayFromNumber(){return new Array(this.cant)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.u))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-statements"]],decls:74,vars:4,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"declaracion"],[1,"d-sm-flex","justify-content-between","mb-3","mb-md-0"],[1,"box","box-form","mb-4"],[1,"row","align-items-end"],[1,"col-12","col-xl-4","mb-3","mb-xl-0"],[1,"form-label"],[1,"input-group"],["id","f_name",1,"form-select"],["value","-1","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-xl-1","text-xl-center","mb-3","mb-xl-0"],[1,"mb-xl-2"],[1,"col-12","col-xl-3","mb-5","mb-xl-0"],["id","f_year",1,"form-select"],[1,"row"],[1,"col-6"],[1,"btn","btn-primary","col-12",3,"click"],[1,"table-responsive"],[1,"table","table-even","table-section","table-borderless","table-radius"],[1,"vertical-middle"],[1,"text-uppercase","text-center","text-nowrap"],[4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[1,"btn","btn-primary",3,"click"],[3,"value"],[1,"text-center","text-nowrap"],["class","btn",3,"click",4,"ngIf"],[3,"href",4,"ngIf"],[1,"btn",3,"click"],["aria-hidden","true",1,"fa","fa-file-pdf-o","fa-fw","fa-lg","color-blue"],[3,"href"],["aria-hidden","true",1,"fa","fa-file-text-o","fa-fw","fa-lg","color-red"],[1,"border","btn","btn-sm",3,"ngClass","click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),t._UZ(5,"i",5),t._uU(6," Inicio"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Registro de Declaraci\xf3n"),t.qZA()()(),t.TgZ(9,"section",7)(10,"h1"),t._uU(11,"Consulta Declaraciones"),t.qZA(),t._UZ(12,"div",8),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),t._uU(17,"Empresa:"),t.qZA(),t.TgZ(18,"div",13)(19,"select",14)(20,"option",15),t._uU(21,"Todos"),t.qZA(),t.YNc(22,at,2,2,"option",16),t.qZA()()(),t.TgZ(23,"div",17)(24,"div",18),t._uU(25,"y/o"),t.qZA()(),t.TgZ(26,"div",19)(27,"label",12),t._uU(28,"A\xf1o:"),t.qZA(),t.TgZ(29,"div",13)(30,"select",20)(31,"option",15),t._uU(32,"Todos"),t.qZA(),t.YNc(33,nt,2,2,"option",16),t.qZA()()(),t.TgZ(34,"div",11)(35,"div",21)(36,"div",22)(37,"button",23),t.NdJ("click",function(){return a.filter()}),t._uU(38,"Mostrar"),t.qZA()()()()()(),t.TgZ(39,"div",24)(40,"table",25)(41,"thead",26)(42,"tr")(43,"th"),t._uU(44,"ID Empresa"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Nombre Empresa"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"A\xf1o Declaraci\xf3n"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Estado"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Monto Total (UF)"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Fecha Env\xedo"),t.qZA(),t.TgZ(55,"th",27),t._uU(56,"Acci\xf3n"),t.qZA()()(),t.TgZ(57,"tbody"),t.YNc(58,st,17,11,"tr",28),t.qZA()()(),t.TgZ(59,"nav",29)(60,"ul",30)(61,"li")(62,"button",31),t.NdJ("click",function(){return a.pagTo(0)}),t._uU(63,"Primero"),t.qZA()(),t.TgZ(64,"li")(65,"button",31),t.NdJ("click",function(){return a.previus()}),t._uU(66,"Anterior"),t.qZA()(),t.YNc(67,lt,3,5,"li",28),t.TgZ(68,"li")(69,"button",31),t.NdJ("click",function(){return a.next()}),t._uU(70,"Siguiente"),t.qZA()(),t.TgZ(71,"li")(72,"button",31),t.NdJ("click",function(){return a.pagTo(a.cant-1)}),t._uU(73,"\xdaltimo"),t.qZA()()()()()()),2&e&&(t.xp6(22),t.Q6J("ngForOf",a.business_name),t.xp6(11),t.Q6J("ngForOf",a.years),t.xp6(25),t.Q6J("ngForOf",a.db),t.xp6(9),t.Q6J("ngForOf",a.setArrayFromNumber()))},dependencies:[p.mk,p.sg,p.O5,m.YN,m.Kr,p.uU],styles:["[_nghost-%COMP%]{width:90%!important;padding:1%}"]}),i})();var ct=_(9314);const dt=[{path:"",component:W.$,children:[{path:"home",component:X},{path:"form",component:z},{path:"profile",component:et},{path:"statements",component:ut},{path:"summary",component:F},{path:"faq",component:ct.v},{path:"**",redirectTo:"home",pathMatch:"full"}]}];let mt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.Bz.forChild(dt),Z.Bz]}),i})();var _t=_(4466);let pt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[p.H9],imports:[p.ez,mt,_t.m,m.u5,m.UX]}),i})()}}]);