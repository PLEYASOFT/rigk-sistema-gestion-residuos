(self.webpackChunkrigk_sg_web=self.webpackChunkrigk_sg_web||[]).push([[180],{1180:(D,A,p)=>{"use strict";p.r(A),p.d(A,{MantainerModule:()=>Vt});var h=p(6895),S=p(2045),d=p(4135),e=p(8256),f=p(2227);let g=(()=>{class s{constructor(t){this.ratesService=t,this.types=["EyE reciclables cart\xf3n","EyE reciclable de metal","EyE de pl\xe1stico","EyE no reciclables","EyE reutilizables","EyE de madera"],this.year=(new Date).getFullYear(),this.rates=[]}ngOnInit(){this.ratesService.getRates(this.year).subscribe(t=>{console.log(t.data),t.data.forEach(i=>{this.rates.push({name:this.types[i.type-1],price:i.price})}),console.log(this.rates)})}getValueRates(){}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(f.z))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-home"]],decls:22,vars:0,consts:[["id","content"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item"],["aria-hidden","true",1,"fa","fa-home"],[1,"inicio"],[1,"box","box-inicio"],[1,"row"],[1,"col-12","col-md-8"],[1,"h1"],[2,"visibility","hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3),e._UZ(4,"i",4),e._uU(5," Inicio"),e.qZA()()(),e.TgZ(6,"section",5)(7,"h1"),e._uU(8,"Inicio"),e.qZA(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"h2",9),e._uU(13,"Bienvenido a m\xf3dulo de administraci\xf3n"),e.qZA(),e.TgZ(14,"p",10),e._uU(15,"Como parte de las obligaciones que establece la Ley REP, los Productores deben informar la cantidad de EyE no domiciliarios (POM) puestos en el mercado el a\xf1o anterior."),e.qZA(),e.TgZ(16,"p",10),e._uU(17,"ProREP pone a disposici\xf3n de sus socios la plataforma de declaraci\xf3n que dar\xe1 cumplimiento a la obligaci\xf3n de informar sus EyE."),e.qZA(),e.TgZ(18,"p",10),e._uU(19,"La informaci\xf3n deber\xe1 subirse en los meses de enero y febrero."),e.qZA(),e.TgZ(20,"p",10),e._uU(21,"En caso de tener dudas con respecto a su declaraci\xf3n puede ver los tutoriales y preguntas frecuentes."),e.qZA()()()()()())}}),s})();var l=p(433),q=p(5226),c=p.n(q),F=p(3224),C=p(8195);function J(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"tr",23)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td")(26,"div",24)(27,"button",25),e.NdJ("click",function(){const o=e.CHM(t),n=o.$implicit,_=o.index,r=e.oxw();return r.popupModify=!r.popupModify,r.id=n.ID,r.index=_,e.KtG(r.existingCode=n.CODE_BUSINESS)}),e._uU(28,"Modificar"),e.qZA()()(),e.TgZ(29,"td")(30,"div",24)(31,"button",26),e.NdJ("click",function(){const n=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.btnDeleteBusiness(n.ID))}),e._uU(32,"Eliminar"),e.qZA()()()()}if(2&s){const t=a.$implicit;e.xp6(2),e.Oqu(t.CODE_BUSINESS),e.xp6(2),e.Oqu(t.NAME),e.xp6(2),e.Oqu(t.VAT),e.xp6(2),e.Oqu(t.LOC_ADDRESS),e.xp6(2),e.Oqu(t.PHONE),e.xp6(2),e.Oqu(t.EMAIL),e.xp6(2),e.Oqu(t.AM_FIRST_NAME),e.xp6(2),e.Oqu(t.AM_LAST_NAME),e.xp6(2),e.Oqu(t.INVOICE_NAME),e.xp6(2),e.Oqu(t.INVOICE_EMAIL),e.xp6(2),e.Oqu(t.INVOICE_PHONE),e.xp6(2),e.Oqu(t.GIRO)}}const L=function(s,a){return{"btn-info":s,"btn-primary":a}};function Y(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"li")(1,"button",27),e.NdJ("click",function(){const n=e.CHM(t).index,_=e.oxw();return e.KtG(_.pagTo(n))}),e._uU(2),e.qZA()()}if(2&s){const t=a.index,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(2,L,i.pos==t+1,i.pos!=t+1)),e.xp6(1),e.Oqu(t+1)}}function k(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El c\xf3digo de la empresa es requerido."),e.qZA())}function Q(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El c\xf3digo de empresa ya existe."),e.qZA())}function j(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,k,2,0,"p",61),e.YNc(2,Q,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.code_business.errors.required),e.xp6(1),e.Q6J("ngIf",""!=t.formData.controls.code_business.value&&t.formData.controls.code_business.errors.code_business)}}function H(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre de la empresa es requerido."),e.qZA())}function G(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,H,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.name_business.errors.required)}}function V(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El rut de la empresa es requerido."),e.qZA())}function K(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del RUT es inv\xe1lido (Sin puntos y con gui\xf3n)."),e.qZA())}function $(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El digito verificador es incorrecto."),e.qZA())}function z(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,V,2,0,"p",61),e.YNc(2,K,2,0,"p",61),e.YNc(3,$,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.rut.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.rut.errors.pattern),e.xp6(1),e.Q6J("ngIf",t.formData.controls.rut.errors.rut)}}function X(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"La direcci\xf3n de la empresa es requerida."),e.qZA())}function W(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,X,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.loc_address.errors.required)}}function ee(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El n\xfamero de Tel\xe9fono/Celular de la empresa es requerido (7 - 12 d\xedgitos)."),e.qZA())}function te(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del Tel\xe9fono/Celular es inv\xe1lido (7 - 12 d\xedgitos)."),e.qZA())}function oe(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,ee,2,0,"p",61),e.YNc(2,te,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.phone.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.phone.errors.pattern)}}function ie(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El correo de la empresa es requerido (ejemplo@correo.com)."),e.qZA())}function se(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),e.qZA())}function ne(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,ie,2,0,"p",61),e.YNc(2,se,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.email.errors.email)}}function ae(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre del account manager es requerido."),e.qZA())}function re(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,ae,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.am_first_name.errors.required)}}function le(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El apellido del account manager es requerido."),e.qZA())}function _e(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,le,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.am_last_name.errors.required)}}function ce(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre contacto de facturaci\xf3n es requerido."),e.qZA())}function ue(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,ce,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_name.errors.required)}}function de(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El email contacto de facturaci\xf3n es requerido (ejemplo@correo.com)."),e.qZA())}function pe(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),e.qZA())}function me(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,de,2,0,"p",61),e.YNc(2,pe,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_email.errors.email)}}function he(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El tel\xe9fono de facturaci\xf3n es requerido (entre 7 y 12 d\xedgitos)."),e.qZA())}function Te(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del tel\xe9fono es inv\xe1lido (entre 7 y 12 d\xedgitos)."),e.qZA())}function fe(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,he,2,0,"p",61),e.YNc(2,Te,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_phone.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_phone.errors.pattern)}}function ge(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El giro de la empresa es requerido."),e.qZA())}function Ne(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,ge,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.giro.errors.required)}}function be(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"div",28)(1,"form",29,30)(3,"div",31)(4,"label",32)(5,"strong"),e._uU(6,"C\xf3digo de la empresa"),e.qZA()(),e.TgZ(7,"div",33),e._UZ(8,"input",34),e.qZA(),e.YNc(9,j,3,2,"div",35),e.qZA(),e.TgZ(10,"div",31)(11,"label",36)(12,"strong"),e._uU(13,"Nombre de la empresa"),e.qZA()(),e.TgZ(14,"div",33),e._UZ(15,"input",37),e.qZA(),e.YNc(16,G,2,1,"div",35),e.qZA(),e.TgZ(17,"div",31)(18,"label",38)(19,"strong"),e._uU(20,"Rut de la empresa"),e.qZA()(),e.TgZ(21,"div",33),e._UZ(22,"input",39),e.qZA(),e.YNc(23,z,4,3,"div",35),e.qZA(),e.TgZ(24,"div",31)(25,"label",40)(26,"strong"),e._uU(27,"Direcci\xf3n de la empresa"),e.qZA()(),e.TgZ(28,"div",33),e._UZ(29,"input",41),e.qZA(),e.YNc(30,W,2,1,"div",35),e.qZA(),e.TgZ(31,"div",31)(32,"label",42)(33,"strong"),e._uU(34,"Tel\xe9fono/Celular de la empresa"),e.qZA()(),e.TgZ(35,"div",33),e._UZ(36,"input",43),e.qZA(),e.YNc(37,oe,3,2,"div",35),e.qZA(),e.TgZ(38,"div",31)(39,"label",44)(40,"strong"),e._uU(41,"Correo de la empresa"),e.qZA()(),e.TgZ(42,"div",33),e._UZ(43,"input",45),e.qZA(),e.YNc(44,ne,3,2,"div",35),e.qZA(),e.TgZ(45,"div",31)(46,"label",46)(47,"strong"),e._uU(48,"Nombre Account Manager"),e.qZA()(),e.TgZ(49,"div",33),e._UZ(50,"input",47),e.qZA(),e.YNc(51,re,2,1,"div",35),e.qZA(),e.TgZ(52,"div",31)(53,"label",48)(54,"strong"),e._uU(55,"Apellido Account Manager"),e.qZA()(),e.TgZ(56,"div",33),e._UZ(57,"input",49),e.qZA(),e.YNc(58,_e,2,1,"div",35),e.qZA(),e.TgZ(59,"div",31)(60,"label",50)(61,"strong"),e._uU(62,"Nombre contacto facturaci\xf3n"),e.qZA()(),e.TgZ(63,"div",33),e._UZ(64,"input",51),e.qZA(),e.YNc(65,ue,2,1,"div",35),e.qZA(),e.TgZ(66,"div",31)(67,"label",52)(68,"strong"),e._uU(69,"Correo contacto facturaci\xf3n"),e.qZA()(),e.TgZ(70,"div",33),e._UZ(71,"input",53),e.qZA(),e.YNc(72,me,3,2,"div",35),e.qZA(),e.TgZ(73,"div",31)(74,"label",54)(75,"strong"),e._uU(76,"Tel\xe9fono/Celular contacto facturaci\xf3n"),e.qZA()(),e.TgZ(77,"div",33),e._UZ(78,"input",55),e.qZA(),e.YNc(79,fe,3,2,"div",35),e.qZA(),e.TgZ(80,"div",31)(81,"label",56)(82,"strong"),e._uU(83,"Giro empresa"),e.qZA()(),e.TgZ(84,"div",33),e._UZ(85,"input",57),e.qZA(),e.YNc(86,Ne,2,1,"div",35),e.qZA(),e.TgZ(87,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.btnAddBusiness(),e.KtG(o.pagTo(0))}),e._uU(88,"Aceptar"),e.qZA(),e.TgZ(89,"button",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.popupVisible=!o.popupVisible,e.KtG(o.formData.reset())}),e._uU(90,"Cancelar"),e.qZA()()()}if(2&s){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.formData),e.xp6(8),e.Q6J("ngIf",i.formData.controls.code_business.errors&&i.formData.controls.code_business.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.name_business.errors&&i.formData.controls.name_business.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.rut.errors&&i.formData.controls.rut.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.loc_address.errors&&i.formData.controls.loc_address.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.phone.errors&&i.formData.controls.phone.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.email.errors&&i.formData.controls.email.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.am_first_name.errors&&i.formData.controls.am_first_name.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.am_last_name.errors&&i.formData.controls.am_last_name.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.invoice_name.errors&&i.formData.controls.invoice_name.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.invoice_email.errors&&i.formData.controls.invoice_email.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.invoice_phone.errors&&i.formData.controls.invoice_phone.touched),e.xp6(7),e.Q6J("ngIf",i.formData.controls.giro.errors&&i.formData.controls.giro.touched),e.xp6(1),e.Q6J("disabled",t.invalid)}}function Ee(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El c\xf3digo de la empresa es requerido."),e.qZA())}function Ae(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El c\xf3digo de empresa ya existe."),e.qZA())}function Me(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Ee,2,0,"p",61),e.YNc(2,Ae,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.code_business.errors.required),e.xp6(1),e.Q6J("ngIf",""!=t.formData.controls.code_business.value&&!t.formData.controls.code_business.errors.verifyCode)}}function Re(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre de la empresa es requerido."),e.qZA())}function Ce(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Re,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.name_business.errors.required)}}function Pe(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El rut de la empresa es requerido."),e.qZA())}function Ze(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del RUT es inv\xe1lido (Sin puntos y con gui\xf3n)."),e.qZA())}function ve(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El digito verificador es incorrecto."),e.qZA())}function xe(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Pe,2,0,"p",61),e.YNc(2,Ze,2,0,"p",61),e.YNc(3,ve,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.rut.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.rut.errors.pattern),e.xp6(1),e.Q6J("ngIf",t.formData.controls.rut.errors.rut)}}function Se(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"La direcci\xf3n de la empresa es requerida."),e.qZA())}function qe(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Se,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.loc_address.errors.required)}}function Ue(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El n\xfamero de Tel\xe9fono/Celular de la empresa es requerido (7 - 12 d\xedgitos)."),e.qZA())}function Ie(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del Tel\xe9fono/Celular es inv\xe1lido (7 - 12 d\xedgitos)."),e.qZA())}function Fe(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Ue,2,0,"p",61),e.YNc(2,Ie,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.phone.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.phone.errors.pattern)}}function Oe(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El correo de la empresa es requerido (ejemplo@correo.com)."),e.qZA())}function De(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),e.qZA())}function Be(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Oe,2,0,"p",61),e.YNc(2,De,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.email.errors.email)}}function ye(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre del account manager es requerido."),e.qZA())}function we(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,ye,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.am_first_name.errors.required)}}function Je(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El apellido del account manager es requerido."),e.qZA())}function Le(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Je,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.am_last_name.errors.required)}}function Ye(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre contacto de facturaci\xf3n es requerido."),e.qZA())}function ke(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Ye,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_name.errors.required)}}function Qe(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El email contacto de facturaci\xf3n es requerido (ejemplo@correo.com)."),e.qZA())}function je(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),e.qZA())}function He(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Qe,2,0,"p",61),e.YNc(2,je,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_email.errors.email)}}function Ge(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El tel\xe9fono de facturaci\xf3n es requerido (7 - 12 d\xedgitos)."),e.qZA())}function Ve(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del tel\xe9fono es inv\xe1lido (7 - 12 d\xedgitos)."),e.qZA())}function Ke(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Ge,2,0,"p",61),e.YNc(2,Ve,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_phone.errors.required),e.xp6(1),e.Q6J("ngIf",t.formData.controls.invoice_phone.errors.pattern)}}function $e(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El giro de la empresa es requerido."),e.qZA())}function ze(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,$e,2,0,"p",61),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formData.controls.giro.errors.required)}}function Xe(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"div",28)(1,"form",29,62)(3,"div",31)(4,"label",32)(5,"strong"),e._uU(6,"C\xf3digo de la empresa"),e.qZA()(),e.TgZ(7,"div",33)(8,"input",63),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].CODE_BUSINESS=o)}),e.qZA()(),e.YNc(9,Me,3,2,"div",35),e.qZA(),e.TgZ(10,"div",31)(11,"label",36)(12,"strong"),e._uU(13,"Nombre de la empresa"),e.qZA()(),e.TgZ(14,"div",33)(15,"input",64),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].NAME=o)}),e.qZA()(),e.YNc(16,Ce,2,1,"div",35),e.qZA(),e.TgZ(17,"div",31)(18,"label",38)(19,"strong"),e._uU(20,"Rut de la empresa"),e.qZA()(),e.TgZ(21,"div",33)(22,"input",65),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].VAT=o)}),e.qZA()(),e.YNc(23,xe,4,3,"div",35),e.qZA(),e.TgZ(24,"div",31)(25,"label",40)(26,"strong"),e._uU(27,"Direcci\xf3n de la empresa"),e.qZA()(),e.TgZ(28,"div",33)(29,"input",66),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].LOC_ADDRESS=o)}),e.qZA()(),e.YNc(30,qe,2,1,"div",35),e.qZA(),e.TgZ(31,"div",31)(32,"label",42)(33,"strong"),e._uU(34,"Tel\xe9fono/Celular de la empresa"),e.qZA()(),e.TgZ(35,"div",33)(36,"input",67),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].PHONE=o)}),e.qZA()(),e.YNc(37,Fe,3,2,"div",35),e.qZA(),e.TgZ(38,"div",31)(39,"label",44)(40,"strong"),e._uU(41,"Correo de la empresa"),e.qZA()(),e.TgZ(42,"div",33)(43,"input",68),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].EMAIL=o)}),e.qZA()(),e.YNc(44,Be,3,2,"div",35),e.qZA(),e.TgZ(45,"div",31)(46,"label",46)(47,"strong"),e._uU(48,"Nombre Account Manager"),e.qZA()(),e.TgZ(49,"div",33)(50,"input",69),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].AM_FIRST_NAME=o)}),e.qZA()(),e.YNc(51,we,2,1,"div",35),e.qZA(),e.TgZ(52,"div",31)(53,"label",48)(54,"strong"),e._uU(55,"Apellido Account Manager"),e.qZA()(),e.TgZ(56,"div",33)(57,"input",70),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].AM_LAST_NAME=o)}),e.qZA()(),e.YNc(58,Le,2,1,"div",35),e.qZA(),e.TgZ(59,"div",31)(60,"label",50)(61,"strong"),e._uU(62,"Nombre contacto facturaci\xf3n"),e.qZA()(),e.TgZ(63,"div",33)(64,"input",71),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].INVOICE_NAME=o)}),e.qZA()(),e.YNc(65,ke,2,1,"div",35),e.qZA(),e.TgZ(66,"div",31)(67,"label",52)(68,"strong"),e._uU(69,"Correo contacto facturaci\xf3n"),e.qZA()(),e.TgZ(70,"div",33)(71,"input",72),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].INVOICE_EMAIL=o)}),e.qZA()(),e.YNc(72,He,3,2,"div",35),e.qZA(),e.TgZ(73,"div",31)(74,"label",54)(75,"strong"),e._uU(76,"Tel\xe9fono/Celular contacto facturaci\xf3n"),e.qZA()(),e.TgZ(77,"div",33)(78,"input",73),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].INVOICE_PHONE=o)}),e.qZA()(),e.YNc(79,Ke,3,2,"div",35),e.qZA(),e.TgZ(80,"div",31)(81,"label",56)(82,"strong"),e._uU(83,"Giro empresa"),e.qZA()(),e.TgZ(84,"div",33)(85,"input",74),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.db[n.index].GIRO=o)}),e.qZA()(),e.YNc(86,ze,2,1,"div",35),e.qZA(),e.TgZ(87,"button",75),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.btnUpdateBusiness(o.id),o.getAllBusiness(),e.KtG(o.pagTo(0))}),e._uU(88,"Aceptar"),e.qZA(),e.TgZ(89,"button",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupModify=!o.popupModify)}),e._uU(90,"Cancelar"),e.qZA()()()}if(2&s){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.formData),e.xp6(7),e.Q6J("ngModel",i.db[i.index].CODE_BUSINESS),e.xp6(1),e.Q6J("ngIf",i.formData.controls.code_business.errors&&i.formData.controls.code_business.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].NAME),e.xp6(1),e.Q6J("ngIf",i.formData.controls.name_business.errors&&i.formData.controls.name_business.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].VAT),e.xp6(1),e.Q6J("ngIf",i.formData.controls.rut.errors&&i.formData.controls.rut.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].LOC_ADDRESS),e.xp6(1),e.Q6J("ngIf",i.formData.controls.loc_address.errors&&i.formData.controls.loc_address.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].PHONE),e.xp6(1),e.Q6J("ngIf",i.formData.controls.phone.errors&&i.formData.controls.phone.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].EMAIL),e.xp6(1),e.Q6J("ngIf",i.formData.controls.email.errors&&i.formData.controls.email.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].AM_FIRST_NAME),e.xp6(1),e.Q6J("ngIf",i.formData.controls.am_first_name.errors&&i.formData.controls.am_first_name.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].AM_LAST_NAME),e.xp6(1),e.Q6J("ngIf",i.formData.controls.am_last_name.errors&&i.formData.controls.am_last_name.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].INVOICE_NAME),e.xp6(1),e.Q6J("ngIf",i.formData.controls.invoice_name.errors&&i.formData.controls.invoice_name.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].INVOICE_EMAIL),e.xp6(1),e.Q6J("ngIf",i.formData.controls.invoice_email.errors&&i.formData.controls.invoice_email.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].INVOICE_PHONE),e.xp6(1),e.Q6J("ngIf",i.formData.controls.invoice_phone.errors&&i.formData.controls.invoice_phone.touched),e.xp6(6),e.Q6J("ngModel",i.db[i.index].GIRO),e.xp6(1),e.Q6J("ngIf",i.formData.controls.giro.errors&&i.formData.controls.giro.touched),e.xp6(1),e.Q6J("disabled",t.invalid)}}let We=(()=>{class s{constructor(t,i){this.fb=t,this.businessService=i,this.listBusiness=[],this.pos=1,this.db=[],this.cant=0,this.existingCode="",this.popupVisible=!1,this.popupModify=!1,this.id="",this.index=0,this.id_business=[],this.name_business=[],this.rut=[],this.loc_address=[],this.phone=[],this.email=[],this.am_first_name=[],this.am_last_name=[],this.invoice_name=[],this.invoice_email=[],this.invoice_phone=[],this.code_business=[],this.giro=[],this.verifyCode=o=>{const n=o.value;return n&&this.code_business.map(r=>r.toLowerCase()).includes(n.toLowerCase())&&n.toLowerCase()!==this.existingCode.toLowerCase()?{code_business:!0}:null}}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getAllBusiness(),this.formData=this.fb.group({code_business:["",[l.kI.required,this.verifyCode]],name_business:["",[l.kI.required]],rut:["",[l.kI.required,l.kI.pattern("^[0-9]{1,2}[0-9]{3}[0-9]{3}-[0-9Kk]{1}$"),this.verifyRut]],loc_address:["",[l.kI.required]],phone:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],email:["",[l.kI.required,l.kI.email]],am_first_name:["",[l.kI.required]],am_last_name:["",[l.kI.required]],invoice_name:["",[l.kI.required]],invoice_email:["",[l.kI.required,l.kI.email]],invoice_phone:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],giro:["",[l.kI.required]]})}getAllBusiness(){this.id_business=[],this.name_business=[],this.rut=[],this.loc_address=[],this.phone=[],this.email=[],this.am_first_name=[],this.am_last_name=[],this.invoice_name=[],this.invoice_email=[],this.invoice_phone=[],this.code_business=[],this.giro=[],this.businessService.getAllBusiness().subscribe({next:t=>{if(this.listBusiness=t.status,this.cant=Math.ceil(this.listBusiness.length/10),this.db=this.listBusiness.slice(0,10).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT),t.status)for(let i=0;i<t.status.length;i++)this.id_business.push(t.status[i].ID),this.name_business.push(t.status[i].NAME),this.rut.push(t.status[i].VAT),this.loc_address.push(t.status[i].LOC_ADDRESS),this.phone.push(t.status[i].PHONE),this.email.push(t.status[i].EMAIL),this.am_first_name.push(t.status[i].AM_FIRST_NAME),this.am_last_name.push(t.status[i].AM_LAST_NAME),this.invoice_name.push(t.status[i].INVOICE_NAME),this.invoice_email.push(t.status[i].INVOICE_EMAIL),this.invoice_phone.push(t.status[i].INVOICE_PHONE),this.code_business.push(t.status[i].CODE_BUSINESS),this.giro.push(t.status[i].GIRO)},error:t=>{c().close(),c().fire({icon:"error",text:t.msg,title:"\xa1Ups!"})}})}btnAddBusiness(){const{name_business:t,rut:i,loc_address:o,phone:n,email:_,am_first_name:r,am_last_name:m,invoice_name:E,invoice_email:N,invoice_phone:P,code_business:U,giro:Z}=this.formData.value;if(this.formData.invalid)return c().fire({title:"Validar informaci\xf3n",text:"Debe completar todos los campos",icon:"error"}),void this.getAllBusiness();this.businessService.postBusiness(t,i,o,n,_,r,m,E,N,P,U,Z).subscribe({next:M=>{M.status&&(c().fire({title:"Empresa agregada",text:"La empresa fue agregada exitosamente",icon:"success"}),this.popupVisible=!1,this.getAllBusiness(),this.formData.reset())},error:M=>{c().fire({title:"Error",text:"Error al agregar la empresa",icon:"error"})}})}btnDeleteBusiness(t){c().fire({title:"\xbfEst\xe1s seguro que quieres eliminar la empresa?",showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.businessService.deleteBusiness(t).subscribe({next:o=>{o.status?(c().fire({title:"Empresa Eliminada",text:"",icon:"error"}),this.getAllBusiness(),this.pagTo(0)):c().fire({title:"Validar informaci\xf3n",text:o.msg,icon:"error"})},error:o=>{c().fire({title:"Formato inv\xe1lido",text:"",icon:"error"})}})})}btnUpdateBusiness(t){const{name_business:i,rut:o,loc_address:n,phone:_,email:r,am_first_name:m,am_last_name:E,invoice_name:N,invoice_email:P,invoice_phone:U,code_business:Z,giro:M}=this.formData.value;this.formData.invalid?c().fire({title:"Validar informaci\xf3n",text:"Debe completar todos los campos",icon:"error"}):this.businessService.updateBusiness(t,i,o,n,_,r,m,E,N,P,U,Z,M).subscribe({next:v=>{v.status&&(c().fire({title:"Empresa Modificada",text:"",icon:"success"}),this.formData.reset(),this.popupModify=!1,this.getAllBusiness())},error:v=>{c().fire({title:"Error",text:"",icon:"error"})}})}verifyRut(t){return(0,F.validate)(t.value)?null:{rut:!0}}pagTo(t){this.pos=t+1,this.db=this.listBusiness.slice(10*t,10*(t+1)).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.listBusiness.slice(10*(this.pos-1),10*this.pos).sort((t,i)=>i.YEAR_STATEMENT-t.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.listBusiness.slice(10*(this.pos-1),10*this.pos).sort((t,i)=>i.YEAR_STATEMENT-t.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}filter(t){const i=t.value?.toLowerCase();this.pos=1;const o=[];return""!=t.value?(this.cant=1,this.db=this.listBusiness.filter(n=>{(n.NAME?.toLowerCase().indexOf(i)>-1||n.CODE_BUSINESS?.toLowerCase().indexOf(i)>-1||n.LOC_ADDRESS?.toLowerCase().indexOf(i)>-1||n.VAT?.toLowerCase().indexOf(i)>-1||n.PHONE?.toLowerCase().indexOf(i)>-1||n.EMAIL?.toLowerCase().indexOf(i)>-1||n.GIRO?.toLowerCase().indexOf(i)>-1||n.AM_FIRST_NAME?.toLowerCase().indexOf(i)>-1||n.AM_LAST_NAME?.toLowerCase().indexOf(i)>-1||n.INVOICE_NAME?.toLowerCase().indexOf(i)>-1||n.INVOICE_EMAIL?.toLowerCase().indexOf(i)>-1||n.INVOICE_PHONE?.toLowerCase().indexOf(i)>-1)&&o.push(n)}),this.db=o.slice(0,10),this.cant=Math.ceil(o.length/10),this.db):(this.db=this.listBusiness.slice(0,10),this.cant=Math.ceil(this.listBusiness.length/10),this.db)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.qu),e.Y36(C.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-maintainer-business"]],decls:74,vars:4,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],[1,"buttonRight"],[1,"btn","btn-primary",3,"click"],[2,"height","50px"],[1,"row","mb-3"],[1,"col-md-12"],["type","text","placeholder","Filtro de b\xfasqueda",1,"form-control",3,"keyup"],[1,"table-responsive","mb-4"],[1,"row","w-100"],["id","table",1,"w-100"],["table1",""],[1,"w-100"],[1,"table-container","table","table-even","table-section","table-borderless","table-border","table-radius","d-lg-table"],[1,"text-center","w-100"],["class","text-end w-100",4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[4,"ngFor","ngForOf"],["class","dark-background ",4,"ngIf"],[1,"text-end","w-100"],[1,"btn-group"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"border","btn","btn-sm",3,"ngClass","click"],[1,"dark-background"],["autocomplete","off",1,"popup",2,"overflow-y","scroll","scroll-behavior","smooth","height","800px",3,"formGroup"],["miFormulario","ngForm"],[1,"mb-4"],["for","code_business",2,"color","rgb(0, 138, 92)"],[1,"input-group"],["type","code_business","id","code_business","formControlName","code_business","placeholder","C\xf3digo de la empresa",1,"form-control"],["class","text-danger pl-0",4,"ngIf"],["for","name_business",2,"color","rgb(0, 138, 92)"],["type","name_business","id","name_business","formControlName","name_business","placeholder","Nombre",1,"form-control"],["for","rut",2,"color","rgb(0, 138, 92)"],["type","rut","id","rut","formControlName","rut","placeholder","Rut",1,"form-control"],["for","loc_address",2,"color","rgb(0, 138, 92)"],["type","loc_address","id","loc_address","formControlName","loc_address","placeholder","Direcci\xf3n",1,"form-control"],["for","phone",2,"color","rgb(0, 138, 92)"],["type","phone","id","phone","formControlName","phone","placeholder","Tel\xe9fono/Celular",1,"form-control"],["for","email",2,"color","rgb(0, 138, 92)"],["type","email","id","email","formControlName","email","placeholder","E-mail",1,"form-control"],["for","am_first_name",2,"color","rgb(0, 138, 92)"],["type","am_first_name","id","am_first_name","formControlName","am_first_name","placeholder","Nombre Account Manager",1,"form-control"],["for","am_last_name",2,"color","rgb(0, 138, 92)"],["type","am_last_name","id","am_last_name","formControlName","am_last_name","placeholder","Apellido Account Manager",1,"form-control"],["for","invoice_name",2,"color","rgb(0, 138, 92)"],["type","invoice_name","id","invoice_name","formControlName","invoice_name","placeholder","Nombre contacto facturaci\xf3n",1,"form-control"],["for","invoice_email",2,"color","rgb(0, 138, 92)"],["type","invoice_email","id","invoice_email","formControlName","invoice_email","placeholder","Correo contacto facturaci\xf3n",1,"form-control"],["for","invoice_phone",2,"color","rgb(0, 138, 92)"],["type","invoice_phone","id","invoice_phone","formControlName","invoice_phone","placeholder","Tel\xe9fono/Celular contacto facturaci\xf3n",1,"form-control"],["for","giro",2,"color","rgb(0, 138, 92)"],["type","giro","id","giro","formControlName","giro","placeholder","Giro Empresa",1,"form-control"],["type","submit",1,"btn","btn-primary",2,"width","150px","margin-left","400px",3,"disabled","click"],["type","button",1,"btn","btn-secondary","buttonRight",2,"width","150px",3,"click"],[1,"text-danger","pl-0"],[4,"ngIf"],["miFormulari02","ngForm"],["type","code_business","id","code_business","formControlName","code_business","placeholder","C\xf3digo de la empresa",1,"form-control",3,"ngModel","ngModelChange"],["type","name_business","id","name_business","formControlName","name_business","placeholder","Nombre",1,"form-control",3,"ngModel","ngModelChange"],["type","rut","id","rut","formControlName","rut","placeholder","Rut",1,"form-control",3,"ngModel","ngModelChange"],["type","loc_address","id","loc_address","formControlName","loc_address","placeholder","Direcci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","phone","id","phone","formControlName","phone","placeholder","Tel\xe9fono/Celular",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","email","formControlName","email","placeholder","E-mail",1,"form-control",3,"ngModel","ngModelChange"],["type","am_first_name","id","am_first_name","formControlName","am_first_name","placeholder","Nombre Account Manager",1,"form-control",3,"ngModel","ngModelChange"],["type","am_last_name","id","am_last_name","formControlName","am_last_name","placeholder","Apellido Account Manager",1,"form-control",3,"ngModel","ngModelChange"],["type","invoice_name","id","invoice_name","formControlName","invoice_name","placeholder","Nombre contacto facturaci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","invoice_email","id","invoice_email","formControlName","invoice_email","placeholder","Correo contacto facturaci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","invoice_phone","id","invoice_phone","formControlName","invoice_phone","placeholder","Tel\xe9fono/Celular contacto facturaci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","giro","id","giro","formControlName","giro","placeholder","Giro Empresa",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",2,"width","150px","margin-left","400px",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"i",4),e._uU(5," Inicio"),e.qZA()(),e.TgZ(6,"li",2)(7,"a",3),e._uU(8,"Mantener Empresas"),e.qZA()()()(),e.TgZ(9,"h1"),e._uU(10,"Empresas"),e.qZA(),e.TgZ(11,"div",5)(12,"button",6),e.NdJ("click",function(){return i.popupVisible=!i.popupVisible,i.formData.reset()}),e._uU(13,"Agregar Empresa"),e.qZA()(),e._UZ(14,"div",7),e.TgZ(15,"div",8)(16,"div",9)(17,"label"),e._uU(18,"Filtro:"),e.qZA(),e.TgZ(19,"input",10),e.NdJ("keyup",function(n){return i.filter(n.target)}),e.qZA()()(),e.TgZ(20,"div",11)(21,"section")(22,"div",12)(23,"div",13,14)(25,"div",15)(26,"table",16)(27,"thead")(28,"tr",17)(29,"th"),e._uU(30,"C\xd3DIGO EMPRESA"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"NOMBRE"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"RUT"),e.qZA(),e.TgZ(35,"th"),e._uU(36,"DIRECCI\xd3N"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"TEL\xc9FONO"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"E-MAIL"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"NOMBRE ACCOUNT MANAGER"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"APELLIDO ACCOUNT MANAGER"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"NOMBRE CONTACTO FACTURACI\xd3N"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"EMAIL CONTACTO FACTURACI\xd3N"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"TEL\xc9FONO CONTACTO FACTURACI\xd3N"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"GIRO"),e.qZA(),e._UZ(53,"th")(54,"th"),e.qZA()(),e.TgZ(55,"tbody"),e.YNc(56,J,33,12,"tr",18),e.qZA()(),e.TgZ(57,"nav",19)(58,"ul",20)(59,"li")(60,"button",6),e.NdJ("click",function(){return i.pagTo(0)}),e._uU(61,"Primero"),e.qZA()(),e.TgZ(62,"li")(63,"button",6),e.NdJ("click",function(){return i.previus()}),e._uU(64,"Anterior"),e.qZA()(),e.YNc(65,Y,3,5,"li",21),e.TgZ(66,"li")(67,"button",6),e.NdJ("click",function(){return i.next()}),e._uU(68,"Siguiente"),e.qZA()(),e.TgZ(69,"li")(70,"button",6),e.NdJ("click",function(){return i.pagTo(i.cant-1)}),e._uU(71,"\xdaltimo"),e.qZA()()()(),e.YNc(72,be,91,14,"div",22),e.YNc(73,Xe,91,26,"div",22),e.qZA()()()()()),2&t&&(e.xp6(56),e.Q6J("ngForOf",i.db),e.xp6(9),e.Q6J("ngForOf",i.setArrayFromNumber()),e.xp6(7),e.Q6J("ngIf",i.popupVisible),e.xp6(1),e.Q6J("ngIf",i.popupModify))},dependencies:[h.mk,h.sg,h.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],styles:[".list-process__dot[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]{width:100%!important;padding:1%}.red-button[_ngcontent-%COMP%]{background-color:red}.popup[_ngcontent-%COMP%]{position:absolute;top:calc(45% + 10px);left:60%;transform:translate(-50%,-50%);background-color:#fff;border:1px solid rgb(17,165,128);padding:20px;width:800px;border-radius:10px}@media (max-width: 768px){.popup[_ngcontent-%COMP%]{width:100%}}.btnLeft[_ngcontent-%COMP%]{margin-left:400px}@media (max-width: 768px){.btnLeft[_ngcontent-%COMP%]{margin-left:0}}.buttonRight[_ngcontent-%COMP%]{position:absolute;right:40px}.dark-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1}.table-container[_ngcontent-%COMP%]{word-wrap:break-word;table-layout:fixed;width:100%;height:auto;overflow-x:hidden}"]}),s})();var B=p(263);let et=(()=>{class s{constructor(t,i,o){this.fb=t,this.authService=i,this.router=o,this.pos="right",this.horaIngreso=new Date,this.formData=this.fb.group({actual:["",[l.kI.required]],password:["",[l.kI.required,l.kI.minLength(3)]],repeatPassword:["",[l.kI.required,l.kI.minLength(3)]]})}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getProfile(this.userData.EMAIL),this.horaIngreso=new Date(sessionStorage.getItem("horaIngreso"))}btnrecovery(){const{actual:t,password:i,repeatPassword:o}=this.formData.value;this.authService.modifyPassword(i,o,t).subscribe({next:n=>{n.status?(c().fire({title:"Cambio de contrase\xf1a",text:"La contrase\xf1a fue cambiada exitosamente",icon:"success"}),this.router.navigate(["/mantenedor/home"])):(c().fire({title:"Validar informaci\xf3n",text:n.msg,icon:"error"}),this.formData.reset())},error:n=>{c().fire({title:"Formato inv\xe1lido",text:"Contrase\xf1a debe contener al menos 8 caracteres",icon:"error"})}})}displayModifyPassword(){this.pos="right"==this.pos?"down":"right"}getProfile(t){this.authService.getProfile(t).subscribe(i=>{sessionStorage.setItem("user",JSON.stringify(i.data.user)),this.userData=i.data.user})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.qu),e.Y36(B.e),e.Y36(S.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile"]],decls:81,vars:16,consts:[[1,"container","mt-4"],[1,"mi-perfil"],[1,"box","box-mi-perfil","mb-5","d-flex","align-items-start"],[1,"list","list-data","list-data-title-green","column-md-2","gap-0","list-unstyled"],[1,"list-data__title"],[1,"list-data__text"],[1,"color-verde"],[1,"list","list-links","list-unstyled"],["id","accordionPanelsStayOpenExample",1,"accordion","accordion-flush"],[1,"accordion-item"],["id","panelsStayOpen-headingOne",1,"accordion-header"],["data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne",3,"click"],["aria-hidden","true"],["id","panelsStayOpen-collapseOne","aria-labelledby","panelsStayOpen-headingOne",1,"accordion-collapse","collapse"],[1,"accordion-body"],["autocomplete","off",1,"form-recovery",3,"formGroup"],[1,"mb-4"],[1,"input-group"],[1,"input-group-text","input-group-text-left"],["aria-hidden","true",1,"fa","fa-lock","fa-fw"],["type","password","id","password","formControlName","actual","placeholder","Contrase\xf1a actual",1,"form-control"],["type","password","id","password","formControlName","password","placeholder","Nueva contrase\xf1a",1,"form-control"],["type","password","id","repeatPassword","formControlName","repeatPassword","placeholder","Repetir contrase\xf1a",1,"form-control"],["type","button",1,"btn","btn-primary","btn-fa","w-100",3,"click"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-fw"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"h1"),e._uU(3,"Mi Perfil"),e.qZA(),e.TgZ(4,"div",2)(5,"ul",3)(6,"li")(7,"span",4),e._uU(8,"Nombre Usuario"),e.qZA(),e.TgZ(9,"span",5),e._uU(10),e.qZA()(),e.TgZ(11,"li")(12,"span",4),e._uU(13,"Perfil"),e.qZA(),e.TgZ(14,"span",5),e._uU(15),e.qZA()(),e.TgZ(16,"li")(17,"span",4),e._uU(18,"Tel\xe9fono"),e.qZA(),e.TgZ(19,"span",5),e._uU(20),e.qZA()(),e.TgZ(21,"li")(22,"span",4),e._uU(23,"Correo"),e.qZA(),e.TgZ(24,"span",5),e._uU(25),e.qZA()(),e.TgZ(26,"li")(27,"span",4),e._uU(28,"Instituci\xf3n"),e.qZA(),e.TgZ(29,"span",5),e._uU(30),e.qZA()(),e.TgZ(31,"li")(32,"span",4),e._uU(33,"Cargo"),e.qZA(),e.TgZ(34,"span",5),e._uU(35),e.qZA()(),e.TgZ(36,"li")(37,"span",4),e._uU(38,"Tel\xe9fono Oficina"),e.qZA(),e.TgZ(39,"span",5),e._uU(40),e.qZA()(),e.TgZ(41,"li")(42,"span",4)(43,"b"),e._uU(44,"Fecha/ Hora ingreso"),e.qZA()(),e.TgZ(45,"span",5),e._uU(46),e.ALo(47,"date"),e.qZA()()()(),e.TgZ(48,"h2",6),e._uU(49,"Acciones"),e.qZA(),e.TgZ(50,"ul",7)(51,"div",8)(52,"div",9)(53,"h2",10)(54,"li",11),e.NdJ("click",function(){return i.displayModifyPassword()}),e.TgZ(55,"a")(56,"span"),e._uU(57,"Cambio de contrase\xf1a"),e.qZA(),e._UZ(58,"i",12),e.qZA()()(),e.TgZ(59,"div",13)(60,"div",14)(61,"form",15)(62,"div",16)(63,"div",17)(64,"button",18),e._UZ(65,"i",19),e.qZA(),e._UZ(66,"input",20),e.qZA()(),e.TgZ(67,"div",16)(68,"div",17)(69,"button",18),e._UZ(70,"i",19),e.qZA(),e._UZ(71,"input",21),e.qZA()(),e.TgZ(72,"div",16)(73,"div",17)(74,"button",18),e._UZ(75,"i",19),e.qZA(),e._UZ(76,"input",22),e.qZA()(),e.TgZ(77,"div",16)(78,"button",23),e.NdJ("click",function(){return i.btnrecovery()}),e._uU(79," Enviar "),e._UZ(80,"i",24),e.qZA()()()()()()()()()()),2&t&&(e.xp6(10),e.AsE("",i.userData.FIRST_NAME," ",i.userData.LAST_NAME,""),e.xp6(5),e.Oqu(i.userData.ROL_NAME),e.xp6(5),e.Oqu(i.userData.PHONE),e.xp6(5),e.Oqu(i.userData.EMAIL),e.xp6(5),e.Oqu(i.userData.BUSINESS),e.xp6(5),e.Oqu(i.userData.POSITION),e.xp6(5),e.Oqu(i.userData.PHONE_OFFICE),e.xp6(6),e.Oqu(e.xi3(47,13,i.horaIngreso,"dd-MM-yyyy H:mm:s")),e.xp6(12),e.Gre("fa fa-chevron-",i.pos,""),e.xp6(3),e.Q6J("formGroup",i.formData))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,h.uU]}),s})();var tt=p(9821);function ot(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"tr",15)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",45)(9,"button",46),e.NdJ("click",function(){const n=e.CHM(t).$implicit,_=e.oxw();return _.getEstablishment(n.ID),e.KtG(_.index=n.ID)}),e._uU(10,"Establecimientos"),e.qZA()()()()}if(2&s){const t=a.$implicit;e.xp6(2),e.Oqu(t.CODE_BUSINESS),e.xp6(2),e.Oqu(t.NAME),e.xp6(2),e.Oqu(t.LOC_ADDRESS)}}const y=function(s,a){return{"btn-info":s,"btn-primary":a}};function it(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"li")(1,"button",47),e.NdJ("click",function(){const n=e.CHM(t).index,_=e.oxw();return e.KtG(_.pagTo(n))}),e._uU(2),e.qZA()()}if(2&s){const t=a.index,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(2,y,i.pos==t+1,i.pos!=t+1)),e.xp6(1),e.Oqu(t+1)}}function st(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre del establecimiento es requerido."),e.qZA())}function nt(s,a){if(1&s&&(e.TgZ(0,"div",48),e.YNc(1,st,2,0,"p",44),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.FIRST_NAME.errors.required)}}function at(s,a){if(1&s&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&s){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function rt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"Debe seleccionar alguna regi\xf3n."),e.qZA())}function lt(s,a){if(1&s&&(e.TgZ(0,"div",48),e.YNc(1,rt,2,0,"p",44),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.REGION.errors.required)}}function _t(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"tr",15)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",49),e.NdJ("click",function(){const n=e.CHM(t).$implicit,_=e.oxw(2);return e.KtG(_.deleteEstablishment(n.ID_ESTABLISHMENT))}),e._uU(7," X "),e.qZA()()()}if(2&s){const t=a.$implicit;e.xp6(2),e.Oqu(t.NAME_ESTABLISHMENT),e.xp6(2),e.Oqu(t.REGION)}}function ct(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"li")(1,"button",47),e.NdJ("click",function(){const n=e.CHM(t).index,_=e.oxw(2);return e.KtG(_.pagTo2(n))}),e._uU(2),e.qZA()()}if(2&s){const t=a.index,i=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(2,y,i.pos2==t+1,i.pos2!=t+1)),e.xp6(1),e.Oqu(t+1)}}function ut(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"div",5),e.TgZ(2,"div",6)(3,"div",7)(4,"label"),e._uU(5,"Filtro:"),e.qZA(),e.TgZ(6,"input",8),e.NdJ("keyup",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.filterForm(o.target))}),e.qZA()()(),e.TgZ(7,"table",14)(8,"thead")(9,"tr",15)(10,"th"),e._uU(11,"Establecimiento"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Regi\xf3n"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Eliminar"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,_t,8,2,"tr",16),e.qZA()(),e.TgZ(18,"nav",17)(19,"ul",18)(20,"li")(21,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.pagTo2(0))}),e._uU(22,"Primero"),e.qZA()(),e.TgZ(23,"li")(24,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.previus2())}),e._uU(25,"Anterior"),e.qZA()(),e.YNc(26,ct,3,5,"li",20),e.TgZ(27,"li")(28,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.next2())}),e._uU(29,"Siguiente"),e.qZA()(),e.TgZ(30,"li")(31,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.pagTo2(o.cant2-1))}),e._uU(32,"\xdaltimo"),e.qZA()()()()()}if(2&s){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.db2),e.xp6(9),e.Q6J("ngForOf",t.setArrayFromNumber2())}}let dt=(()=>{class s{constructor(t,i,o){this.businesService=t,this.establishmentService=i,this.fb=o,this.listRegiones=["Regi\xf3n de Arica y Parinacota","Regi\xf3n de Tarapac\xe1","Regi\xf3n de Antofagasta","Regi\xf3n de Atacama","Regi\xf3n de Coquimbo","Regi\xf3n de Valpara\xedso","Regi\xf3n Metropolitana","Regi\xf3n de O\u2019Higgins","Regi\xf3n del Maule","Regi\xf3n del \xd1uble","Regi\xf3n del Biob\xedo","Regi\xf3n de La Araucan\xeda","Regi\xf3n de Los R\xedos","Regi\xf3n de Los Lagos","Regi\xf3n de Ays\xe9n","Regi\xf3n de Magallanes"],this.listBusiness=[],this.pos=1,this.db=[],this.cant=0,this.establishmentStatus=[],this.pos2=1,this.db2=[],this.cant2=0,this.index=0,this.FIRST_NAME=[],this.REGION="",this.direction="asc",this.directionEstablishment="asc"}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getAllBusiness(),this.userForm=this.fb.group({FIRST_NAME:[[],[l.kI.required]],REGION:["",[l.kI.required]]})}getAllBusiness(){this.businesService.getAllBusiness().subscribe({next:t=>{this.listBusiness=t.status,this.cant=Math.ceil(this.listBusiness.length/10),this.db=this.listBusiness.slice(0,10).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT)},error:t=>{c().close(),c().fire({icon:"error",text:t.msg,title:"\xa1Ups!"})}})}getEstablishment(t){this.establishmentService.getEstablishment(t).subscribe({next:i=>{i.status?(this.establishmentStatus=i.status,this.cant2=Math.ceil(this.establishmentStatus.length/10),this.db2=this.establishmentStatus.slice(0,10).sort((o,n)=>n.ID_ESTABLISHMENT-o.ID_ESTABLISHMENT)):this.establishmentStatus=[],this.reset()},error:i=>{c().close(),c().fire({icon:"error",text:i.msg,title:"\xa1Ups!"}),this.reset()}})}addEstablishment(t){if(this.verificarEstablecimiento()){const{FIRST_NAME:i,REGION:o}=this.userForm.value;this.establishmentStatus.push(t),this.establishmentService.addEstablishment(i,o,t).subscribe({next:n=>{n.status&&(this.pagTo2(0),c().fire({title:"Establecimiento agregado",text:"El establecimiento fue agregado exitosamente",icon:"success"})),this.getEstablishment(t)},error:n=>{c().fire({title:"Error",text:"Error al agregar el establecimiento",icon:"error"})}})}else c().fire({title:"Establecimiento y Regi\xf3n ya se encuentran registrados",text:"",icon:"error"})}deleteEstablishment(t){c().fire({title:"\xbfEst\xe1s seguro que quieres eliminar el establecimiento?",showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.pagTo2(0),this.establishmentService.deleteEstablishment(t).subscribe({next:o=>{o.status?(c().fire({title:"Establecimiento Eliminado",text:"",icon:"error"}),this.getEstablishment(this.index)):c().fire({title:"Validar informaci\xf3n",text:o.msg,icon:"error"})},error:o=>{c().fire({title:"Formato inv\xe1lido",text:"",icon:"error"})}}))})}pagTo(t){this.pos=t+1,this.db=this.listBusiness.slice(10*t,10*(t+1)).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.listBusiness.slice(10*(this.pos-1),10*this.pos).sort((t,i)=>i.YEAR_STATEMENT-t.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.listBusiness.slice(10*(this.pos-1),10*this.pos).sort((t,i)=>i.YEAR_STATEMENT-t.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}pagTo2(t){this.pos2=t+1,this.db2=this.establishmentStatus.slice(10*t,10*(t+1)).sort((i,o)=>i.ID_ESTABLISHMENT-o.ID_ESTABLISHMENT)}next2(){this.pos2>=this.cant||(this.pos2++,this.db2=this.establishmentStatus.slice(10*(this.pos2-1),10*this.pos2).sort((t,i)=>t.ID_ESTABLISHMENT-i.ID_ESTABLISHMENT))}previus2(){this.pos2-1<=0||this.pos2>=this.cant+1||(this.pos2=this.pos2-1,this.db2=this.establishmentStatus.slice(10*(this.pos2-1),10*this.pos2).sort((t,i)=>t.ID_ESTABLISHMENT-i.ID_ESTABLISHMENT))}setArrayFromNumber2(){return new Array(this.cant2)}reset(){this.userForm.reset(),this.userForm.patchValue({REGION:""})}verificarEstablecimiento(){const{FIRST_NAME:t,REGION:i}=this.userForm.value;let o=!1;const n=t.trim();for(let _=0;_<this.establishmentStatus.length;_++)if(this.establishmentStatus[_].NAME_ESTABLISHMENT.toLowerCase()===n.toLowerCase()&&this.establishmentStatus[_].REGION===i){o=!0;break}return!o}toggleDirection(){this.direction="asc"===this.direction?"desc":"asc",this.listBusiness.reverse(),this.cant=Math.ceil(this.listBusiness.length/10),this.db=this.listBusiness.slice(0,10).sort((t,i)=>i.YEAR_STATEMENT-t.YEAR_STATEMENT)}toggleDirectionEstablishments(){this.directionEstablishment="asc"===this.directionEstablishment?"desc":"asc",this.establishmentStatus.reverse(),this.cant2=Math.ceil(this.establishmentStatus.length/10),this.db2=this.establishmentStatus.slice(0,10).reverse()}filter(t){const i=t.value?.toLowerCase();this.pos=1;const o=[];return""!=t.value?(this.cant=1,this.db=this.listBusiness.filter(n=>{(n.NAME?.toLowerCase().indexOf(i)>-1||n.CODE_BUSINESS?.toLowerCase().indexOf(i)>-1||n.LOC_ADDRESS?.toLowerCase().indexOf(i)>-1)&&o.push(n)}),this.db=o.slice(0,10),this.cant=Math.ceil(o.length/10),this.db):(this.db=this.listBusiness.slice(0,10),this.cant=Math.ceil(this.listBusiness.length/10),this.db)}filterForm(t){const i=t.value?.toLowerCase();this.pos2=1;const o=[];return""!=t.value?(this.cant2=1,this.db2=this.establishmentStatus.filter(n=>{(n.NAME_ESTABLISHMENT?.toLowerCase().indexOf(i)>-1||n.REGION?.toLowerCase().indexOf(i)>-1)&&o.push(n)}),this.db2=o.slice(0,10),this.cant2=Math.ceil(o.length/10),this.db2):(this.db2=this.establishmentStatus.slice(0,10),this.cant2=Math.ceil(this.establishmentStatus.length/10),this.db2)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(C.m),e.Y36(tt.d),e.Y36(l.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-maintainer-establishment"]],decls:87,vars:8,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],[2,"height","50px"],[1,"row","mb-3"],[1,"col-md-12"],["type","text","placeholder","Filtro de b\xfasqueda",1,"form-control",3,"keyup"],[1,"table-responsive","mb-4"],[1,"row","w-100"],["id","table",1,"w-100"],["table1",""],[1,"w-100"],[1,"table-container","table","table-even","table-section","table-borderless","table-border","table-radius","d-lg-table"],[1,"text-center","w-100"],["class","text-center w-100",4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container"],[3,"formGroup"],["miFormulario","ngForm"],[1,"row"],[1,"col-md-6"],["for","inp_nom"],[1,"input-group"],["type","text","formControlName","FIRST_NAME","id","inp_nom","placeholder","Nombre",1,"form-control"],["class","text-danger pl-0",4,"ngIf"],["for","inp_region"],["formControlName","REGION","id","inp_region","required","",1,"form-select"],["value",""],[1,"modal-footer"],["type","button","id","btnCloseModal","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[2,"visibility","hidden"],[4,"ngIf"],[1,"btn-group"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-success","btn-sm","rounded-pill",3,"click"],[1,"border","btn","btn-sm",3,"ngClass","click"],[1,"text-danger","pl-0"],["type","button",1,"btn","btn-danger","btn-sm","rounded-pill",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"i",4),e._uU(5," Inicio"),e.qZA()(),e.TgZ(6,"li",2)(7,"a",3),e._uU(8,"Mantenedor Establecimientos"),e.qZA()()()(),e._UZ(9,"div",5),e.TgZ(10,"div",6)(11,"div",7)(12,"label"),e._uU(13,"Filtro:"),e.qZA(),e.TgZ(14,"input",8),e.NdJ("keyup",function(n){return i.filter(n.target)}),e.qZA()()(),e.TgZ(15,"h1"),e._uU(16,"Establecimientos"),e.qZA(),e.TgZ(17,"div",9)(18,"section")(19,"div",10)(20,"div",11,12)(22,"div",13)(23,"table",14)(24,"thead")(25,"tr",15)(26,"th"),e._uU(27,"C\xd3DIGO EMPRESA "),e.qZA(),e.TgZ(28,"th"),e._uU(29,"NOMBRE "),e.qZA(),e.TgZ(30,"th"),e._uU(31,"DIRECCI\xd3N "),e.qZA(),e.TgZ(32,"th"),e._uU(33,"ESTABLECIMIENTOS "),e.qZA()()(),e.TgZ(34,"tbody"),e.YNc(35,ot,11,3,"tr",16),e.qZA()(),e.TgZ(36,"nav",17)(37,"ul",18)(38,"li")(39,"button",19),e.NdJ("click",function(){return i.pagTo(0)}),e._uU(40,"Primero"),e.qZA()(),e.TgZ(41,"li")(42,"button",19),e.NdJ("click",function(){return i.previus()}),e._uU(43,"Anterior"),e.qZA()(),e.YNc(44,it,3,5,"li",20),e.TgZ(45,"li")(46,"button",19),e.NdJ("click",function(){return i.next()}),e._uU(47,"Siguiente"),e.qZA()(),e.TgZ(48,"li")(49,"button",19),e.NdJ("click",function(){return i.pagTo(i.cant-1)}),e._uU(50,"\xdaltimo"),e.qZA()()()()()()()()(),e.TgZ(51,"div",21)(52,"div",22)(53,"div",23)(54,"div",24)(55,"h1",25),e._uU(56,"Formulario Establecimientos"),e.qZA(),e._UZ(57,"button",26),e.qZA(),e.TgZ(58,"div",27)(59,"div",28)(60,"form",29,30)(62,"div",31)(63,"div",32)(64,"label",33),e._uU(65,"NOMBRE:"),e.qZA(),e.TgZ(66,"div",34),e._UZ(67,"input",35),e.qZA(),e.YNc(68,nt,2,1,"div",36),e.qZA(),e.TgZ(69,"div",32)(70,"label",37),e._uU(71,"REGI\xd3N"),e.qZA(),e.TgZ(72,"select",38)(73,"option",39),e._uU(74,"Selecciona Regi\xf3n"),e.qZA(),e.YNc(75,at,2,1,"option",20),e.qZA(),e.YNc(76,lt,2,1,"div",36),e.qZA()(),e.TgZ(77,"div",40)(78,"button",41),e.NdJ("click",function(){return i.reset()}),e._uU(79,"Cerrar"),e.qZA(),e.TgZ(80,"button",42),e.NdJ("click",function(){return i.addEstablishment(i.index)}),e._uU(81,"Agregar"),e.qZA()(),e.TgZ(82,"div",43),e._uU(83,"a"),e.qZA(),e.TgZ(84,"div",43),e._uU(85,"a"),e.qZA(),e.YNc(86,ut,33,2,"div",44),e.qZA()()()()()()),2&t){const o=e.MAs(61);e.xp6(35),e.Q6J("ngForOf",i.db),e.xp6(9),e.Q6J("ngForOf",i.setArrayFromNumber()),e.xp6(16),e.Q6J("formGroup",i.userForm),e.xp6(8),e.Q6J("ngIf",i.userForm.controls.FIRST_NAME.errors&&i.userForm.controls.FIRST_NAME.touched),e.xp6(7),e.Q6J("ngForOf",i.listRegiones),e.xp6(1),e.Q6J("ngIf",i.userForm.controls.REGION.errors&&i.userForm.controls.REGION.touched),e.xp6(4),e.Q6J("disabled",o.invalid),e.xp6(6),e.Q6J("ngIf",i.establishmentStatus&&i.establishmentStatus.length>0)}},dependencies:[h.mk,h.sg,h.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u],styles:['[_nghost-%COMP%]{width:70%!important;padding:1%}th[_ngcontent-%COMP%]{cursor:pointer}.arrow-up[_ngcontent-%COMP%]:before{content:"\\25b2";display:inline-block;margin-right:5px}.arrow-down[_ngcontent-%COMP%]:before{content:"\\25bc";display:inline-block;margin-right:5px}']}),s})();var w=p(8446);function pt(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"tr",56)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"button",57),e.NdJ("click",function(){const n=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.selectUser(n.ID))}),e._uU(17,"Modificar"),e.qZA(),e.TgZ(18,"button",58),e.NdJ("click",function(){const n=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.deleteUser(n.ID))}),e._uU(19,"Eliminar"),e.qZA()()()}if(2&s){const t=a.$implicit,i=e.oxw();e.xp6(2),e.AsE("",t.FIRST_NAME," ",t.LAST_NAME,""),e.xp6(2),e.Oqu(t.ROL_NAME||"No Asignado"),e.xp6(2),e.Oqu(t.PHONE),e.xp6(2),e.Oqu(t.EMAIL),e.xp6(2),e.Oqu(t.PHONE_OFFICE),e.xp6(2),e.Oqu(t.POSITION||"No Asignado"),e.xp6(2),e.hij("",i.showBusiness(t)||"No Asignado"," ")}}const mt=function(s,a){return{"btn-info":s,"btn-primary":a}};function ht(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"li")(1,"button",59),e.NdJ("click",function(){const n=e.CHM(t).index,_=e.oxw();return e.KtG(_.pagTo(n))}),e._uU(2),e.qZA()()}if(2&s){const t=a.index,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(2,mt,i.pos==t+1,i.pos!=t+1)),e.xp6(1),e.Oqu(t+1)}}function Tt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El nombre del usuario es requerido."),e.qZA())}function ft(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Tt,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.FIRST_NAME.errors.required)}}function gt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El apellido del usuario es requerido."),e.qZA())}function Nt(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,gt,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.LAST_NAME.errors.required)}}function bt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El tel\xe9fono del usuario es requerido."),e.qZA())}function Et(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del tel\xe9fono es inv\xe1lido (entre 7 y 12 d\xedgitos)."),e.qZA())}function At(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,bt,2,0,"p",61),e.YNc(2,Et,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.PHONE.errors.required),e.xp6(1),e.Q6J("ngIf",t.userForm.controls.PHONE.errors.pattern)}}function Mt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El email contacto es requerido (ejemplo@correo.com)."),e.qZA())}function Rt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),e.qZA())}function Ct(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del correo es inv\xe1lido (ejemplo@correo.com)."),e.qZA())}function Pt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El correo ya se encuentra registrado."),e.qZA())}function Zt(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Mt,2,0,"p",61),e.YNc(2,Rt,2,0,"p",61),e.YNc(3,Ct,2,0,"p",61),e.YNc(4,Pt,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.EMAIL.errors.required),e.xp6(1),e.Q6J("ngIf",t.userForm.controls.EMAIL.errors.email),e.xp6(1),e.Q6J("ngIf",t.userForm.controls.EMAIL.errors.pattern),e.xp6(1),e.Q6J("ngIf",t.userForm.controls.EMAIL.errors.used)}}function vt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El tel\xe9fono de la oficina del usuario es requerido (entre 7 y 12 d\xedgitos)."),e.qZA())}function xt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El formato del tel\xe9fono es inv\xe1lido (entre 7 y 12 d\xedgitos)."),e.qZA())}function St(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,vt,2,0,"p",61),e.YNc(2,xt,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.PHONE_OFFICE.errors.required),e.xp6(1),e.Q6J("ngIf",t.userForm.controls.PHONE_OFFICE.errors.pattern)}}function qt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El cargo del usuario es requerido."),e.qZA())}function Ut(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,qt,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.POSITION.errors.required)}}function It(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"Empresa(s) del usuario es requerido."),e.qZA())}function Ft(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,It,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.BUSINESS.errors.required)}}function Ot(s,a){if(1&s&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&s){const t=a.$implicit;e.s9C("value",t.ID),e.xp6(1),e.Oqu(t.NAME)}}function Dt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El rol del usuario es requerido."),e.qZA())}function Bt(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"El rol del usuario es requerido."),e.qZA())}function yt(s,a){if(1&s&&(e.TgZ(0,"div",60),e.YNc(1,Dt,2,0,"p",61),e.YNc(2,Bt,2,0,"p",61),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.controls.ROL.errors.required),e.xp6(1),e.Q6J("ngIf",t.userForm.controls.ROL.errors.min)}}function wt(s,a){if(1&s&&(e.TgZ(0,"span",63),e._uU(1),e.qZA()),2&s){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Oqu(i.showName(t))}}let Jt=(()=>{class s{constructor(t,i,o){this.authService=t,this.businesService=i,this.fb=o,this.verifyEmailMW=n=>{const _=n.value.toLowerCase().trim();if(!_)return null;let r;return r=this.dbTmp.length>0?this.dbTmp.find(m=>m.EMAIL.toLowerCase().trim()==_):this.listUser.find(m=>m.EMAIL.toLowerCase().trim()===_),r&&r.ID!=this.userForm.value.ID?{used:!0}:null},this.emailPattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$",this.showErrorEmail=!1,this.business=[],this.listUser=[],this.listRoles=[],this.isEdit=!1,this.saving=!1,this.userForm=this.fb.group({ID:[],FIRST_NAME:["",[l.kI.required]],LAST_NAME:["",[l.kI.required]],EMAIL:["",[l.kI.required,l.kI.email,this.verifyEmailMW]],ROL:[0,[l.kI.required,l.kI.min(1)]],PHONE:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],PHONE_OFFICE:["",[l.kI.required,l.kI.pattern("^[0-9]{7,12}$")]],POSITION:["",[l.kI.required,l.kI.min(1)]],BUSINESS:[[],[l.kI.required]]}),this.dbTmp=[],this.pos=1,this.db=[],this.cant=0}ngOnInit(){this.loadUsers(),this.loadBusiness(),this.loadRoles()}loadBusiness(){this.businesService.getAllBusiness().subscribe(t=>{t.status&&(this.business=t.status,this.business.map(i=>{i.view_name=`${i.CODE_BUSINESS} | ${i.NAME}`}))})}filter(t){const i=t.value?.toLowerCase().trim();if(this.pos=1,""!=t.value)return this.dbTmp.length>0&&(this.listUser=this.dbTmp),this.cant=1,this.db=this.listUser.filter(o=>{const n=`${o.FIRST_NAME?.toLowerCase()} ${o.LAST_NAME?.toLowerCase()}`;if(o.BUSINESS.filter(r=>r.NAME.toLowerCase().indexOf(i)>-1).length>0||o.FIRST_NAME?.toLowerCase().indexOf(i)>-1||o.LAST_NAME?.toLowerCase().indexOf(i)>-1||o.PHONE?.toLowerCase().indexOf(i)>-1||o.ROL_NAME?.toLowerCase().indexOf(i)>-1||o.EMAIL?.toLowerCase().indexOf(i)>-1||o.PHONE_OFFICE?.toLowerCase().indexOf(i)>-1||o.POSITION?.toLowerCase().indexOf(i)>-1||n.indexOf(i)>-1)return o}),0==this.dbTmp.length&&(this.dbTmp=this.listUser),this.listUser=this.db,this.db=this.db.splice(0,10),void(this.cant=Math.ceil(this.listUser.length/10)||1);this.dbTmp.length>0&&(this.listUser=this.dbTmp),this.db=this.listUser.slice(0,10),this.cant=Math.ceil(this.listUser.length/10)||1}loadRoles(){this.authService.getRoles.subscribe(t=>{t.status&&(this.listRoles=t.data)})}loadUsers(){this.listUser=[],this.dbTmp=[],c().fire({title:"Cargando Datos",text:"Se est\xe1 recuperando datos",timerProgressBar:!0,showConfirmButton:!1,allowEscapeKey:!1,allowOutsideClick:!1}),c().showLoading(),document.getElementById("inp_filter").value="",this.authService.getUsers.subscribe(t=>{t.status&&(this.listUser=t.data,this.dbTmp=t.data,this.cant=Math.ceil(this.listUser.length/10)||1,this.db=this.listUser.slice(0,10).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT),c().close())})}clearFrom(){this.userForm.reset({ROL:0,EMAIL:""})}showBusiness(t){let i=[];return t.BUSINESS.forEach(o=>{i.push(o.NAME.trim())}),i.join(", ")}showName(t){const i=this.business.find(o=>o.ID==t);return`${i.CODE_BUSINESS} | ${i.NAME}`}selectUser(t){this.isEdit=!0;const i=this.db.find(n=>n.ID==t);this.userForm.controls.ID.setValue(i.ID),this.userForm.controls.FIRST_NAME.setValue(i.FIRST_NAME),this.userForm.controls.LAST_NAME.setValue(i.LAST_NAME),this.userForm.controls.EMAIL.setValue(i.EMAIL),this.userForm.controls.PHONE.setValue(i.PHONE),this.userForm.controls.PHONE_OFFICE.setValue(i.PHONE_OFFICE),this.userForm.controls.POSITION.setValue(i.POSITION),this.userForm.controls.ROL.setValue(i.ID_ROL);const o=i.BUSINESS?.map(n=>n.ID_BUSINESS);this.userForm.controls.BUSINESS.setValue(o)}deleteUser(t){const i=this.db.find(o=>o.ID==t);c().fire({icon:"question",text:`\xbfEst\xe1s seguro de eliminar al usuario ${i.FIRST_NAME} ${i.LAST_NAME}?`,showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(o=>{o.isConfirmed&&this.authService.deleteUser(i.ID).subscribe(n=>{n.status&&(c().fire({icon:"success",text:n.msg}),this.loadUsers(),this.pos=1)})})}verifyEmail(){const t=this.userForm.value.EMAIL?.toLowerCase().trim(),i=this.listUser.find(o=>o.EMAIL.toLowerCase().trim()==t);return i&&i.ID!=this.userForm.value.ID?(this.showErrorEmail=!1,!1):(this.showErrorEmail=!0,this.userForm.controls.EMAIL.setErrors({used:!0}),!1)}verifyEmail2(t){return!!t?.notUnique}saveForm(){c().fire({icon:"info",text:"Guardando datos",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}),c().showLoading(),this.saving=!0,!this.userForm.invalid&&(this.isEdit?this.authService.updateUser(this.userForm.value).subscribe({next:t=>{c().close(),t.status&&(this.clearFrom(),document.getElementById("btnCloseModal")?.click(),c().fire({icon:"success",text:t.msg}),this.loadUsers(),this.pos=1,this.saving=!1)},error:t=>{c().close(),c().fire({icon:"error",text:"Algo sali\xf3 mal"})}}):this.authService.registerUser(this.userForm.value).subscribe({next:t=>{c().close(),t.status?(this.clearFrom(),document.getElementById("btnCloseModal")?.click(),c().fire({icon:"success",text:t.msg}),this.loadUsers(),this.pos=1,this.saving=!1):(c().close(),c().fire({icon:"warning",text:t.msg}),this.saving=!1)},error:t=>{c().close(),c().fire({icon:"error",text:"Algo sali\xf3 mal"})}}))}pagTo(t){this.pos=t+1,this.db=this.listUser.slice(10*t,10*(t+1)).sort((i,o)=>o.YEAR_STATEMENT-i.YEAR_STATEMENT)}next(){this.pos>=this.cant||(this.pos++,this.db=this.listUser.slice(10*(this.pos-1),10*this.pos).sort((t,i)=>i.YEAR_STATEMENT-t.YEAR_STATEMENT))}previus(){this.pos-1<=0||this.pos>=this.cant+1||(this.pos=this.pos-1,this.db=this.listUser.slice(10*(this.pos-1),10*this.pos).sort((t,i)=>i.YEAR_STATEMENT-t.YEAR_STATEMENT))}setArrayFromNumber(){return new Array(this.cant)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(B.e),e.Y36(C.m),e.Y36(l.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-mantainer-users"]],decls:127,vars:16,consts:[["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],[1,"buttonRight"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[2,"height","50px"],[1,"row","mb-3"],[1,"col-md-12"],["id","inp_filter","type","text","placeholder","Filtro de b\xfasqueda",1,"form-control",3,"keyup"],[1,"table-responsive","mb-4"],[1,"row","w-100"],["id","table",1,"w-100"],["table1",""],[1,"w-100"],[1,"table-container","table","table-even","table-section","table-borderless","table-border","table-radius","d-lg-table"],[1,"text-center","w-100"],["class","text-end w-100",4,"ngFor","ngForOf"],["aria-label","Navegaci\xf3n resultados"],[1,"pagination"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["for","inp_nom"],["type","text","formControlName","FIRST_NAME","id","inp_nom","placeholder","Nombre",1,"form-control"],["class","text-danger pl-0",4,"ngIf"],["for","inp_ap"],["type","text","formControlName","LAST_NAME","id","inp_ap","placeholder","Apellidos",1,"form-control"],[1,"row","mt-4"],["for","inp_tel"],["type","text","formControlName","PHONE","id","inp_tel","placeholder","912345678",1,"form-control"],["for","inp_email"],["type","text","formControlName","EMAIL","id","inp_email","placeholder","cto@correo.com",1,"form-control"],["type","text","formControlName","PHONE_OFFICE","required","","id","inp_tel","placeholder","912345678",1,"form-control"],["type","text","formControlName","POSITION","id","inp_email","placeholder","Gerente",1,"form-control"],["for",""],["formControlName","BUSINESS","optionLabel","view_name","optionValue","ID","defaultLabel","Seleccione Empresas",3,"options","selectedItemsLabel"],["for","inp_rol"],["formControlName","ROL","id","inp_rol",1,"form-select"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["class","badge bg-primary m-1",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","id","btnCloseModal","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"text-end","w-100"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-info",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"border","btn","btn-sm",3,"ngClass","click"],[1,"text-danger","pl-0"],[4,"ngIf"],[3,"value"],[1,"badge","bg-primary","m-1"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"i",4),e._uU(5," Inicio"),e.qZA()(),e.TgZ(6,"li",2)(7,"a",3),e._uU(8,"Mantener Usuarios"),e.qZA()()()(),e.TgZ(9,"h1"),e._uU(10,"Usuarios"),e.qZA(),e.TgZ(11,"div",5)(12,"button",6),e.NdJ("click",function(){return i.isEdit=!1,i.clearFrom()}),e._uU(13,"Agregar Usuario"),e.qZA()(),e._UZ(14,"div",7),e.TgZ(15,"div",8)(16,"div",9)(17,"label"),e._uU(18,"Filtro:"),e.qZA(),e.TgZ(19,"input",10),e.NdJ("keyup",function(n){return i.filter(n.target)}),e.qZA()()(),e.TgZ(20,"div",11)(21,"section")(22,"div",12)(23,"div",13,14)(25,"div",15)(26,"table",16)(27,"thead")(28,"tr",17)(29,"th"),e._uU(30,"NOMBRE"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"ROL"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"TEL\xc9FONO"),e.qZA(),e.TgZ(35,"th"),e._uU(36,"E-MAIL"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"T\xc9LEFONO OFICINA"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"CARGO"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"EMPRESAS"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"OPCIONES"),e.qZA()()(),e.TgZ(45,"tbody"),e.YNc(46,pt,20,8,"tr",18),e.qZA()(),e.TgZ(47,"nav",19)(48,"ul",20)(49,"li")(50,"button",21),e.NdJ("click",function(){return i.pagTo(0)}),e._uU(51,"Primero"),e.qZA()(),e.TgZ(52,"li")(53,"button",21),e.NdJ("click",function(){return i.previus()}),e._uU(54,"Anterior"),e.qZA()(),e.YNc(55,ht,3,5,"li",22),e.TgZ(56,"li")(57,"button",21),e.NdJ("click",function(){return i.next()}),e._uU(58,"Siguiente"),e.qZA()(),e.TgZ(59,"li")(60,"button",21),e.NdJ("click",function(){return i.pagTo(i.cant-1)}),e._uU(61,"\xdaltimo"),e.qZA()()()()()()()()(),e.TgZ(62,"div",23)(63,"div",24)(64,"div",25)(65,"div",26)(66,"h1",27),e._uU(67,"Formulario Usuario"),e.qZA(),e._UZ(68,"button",28),e.qZA(),e.TgZ(69,"div",29)(70,"div",30)(71,"form",31)(72,"div",32)(73,"div",33)(74,"label",34),e._uU(75,"NOMBRE:"),e.qZA(),e._UZ(76,"input",35),e.YNc(77,ft,2,1,"div",36),e.qZA(),e.TgZ(78,"div",33)(79,"label",37),e._uU(80,"APELLIDOS:"),e.qZA(),e._UZ(81,"input",38),e.YNc(82,Nt,2,1,"div",36),e.qZA()(),e.TgZ(83,"div",39)(84,"div",33)(85,"label",40),e._uU(86,"TEL\xc9FONO"),e.qZA(),e._UZ(87,"input",41),e.YNc(88,At,3,2,"div",36),e.qZA(),e.TgZ(89,"div",33)(90,"label",42),e._uU(91,"E-MAIL"),e.qZA(),e._UZ(92,"input",43),e.YNc(93,Zt,5,4,"div",36),e.qZA()(),e.TgZ(94,"div",39)(95,"div",33)(96,"label",40),e._uU(97,"TEL\xc9FONO OFICINA"),e.qZA(),e._UZ(98,"input",44),e.YNc(99,St,3,2,"div",36),e.qZA(),e.TgZ(100,"div",33)(101,"label",42),e._uU(102,"CARGO"),e.qZA(),e._UZ(103,"input",45),e.YNc(104,Ut,2,1,"div",36),e.qZA()(),e.TgZ(105,"div",39)(106,"div",33)(107,"label",46),e._uU(108,"EMPRESAS"),e.qZA(),e._UZ(109,"br")(110,"p-multiSelect",47),e.YNc(111,Ft,2,1,"div",36),e.qZA(),e.TgZ(112,"div",33)(113,"label",48),e._uU(114,"ROL"),e.qZA(),e.TgZ(115,"select",49)(116,"option",50),e._uU(117,"Selecciona Rol"),e.qZA(),e.YNc(118,Ot,2,2,"option",51),e.qZA(),e.YNc(119,yt,3,2,"div",36),e.qZA(),e.TgZ(120,"div",33),e.YNc(121,wt,2,1,"span",52),e.qZA()()()()(),e.TgZ(122,"div",53)(123,"button",54),e._uU(124,"Cerrar"),e.qZA(),e.TgZ(125,"button",55),e.NdJ("click",function(){return i.saveForm()}),e._uU(126,"Guardar"),e.qZA()()()()()),2&t&&(e.xp6(46),e.Q6J("ngForOf",i.db),e.xp6(9),e.Q6J("ngForOf",i.setArrayFromNumber()),e.xp6(16),e.Q6J("formGroup",i.userForm),e.xp6(6),e.Q6J("ngIf",i.userForm.controls.FIRST_NAME.errors&&i.userForm.controls.FIRST_NAME.touched),e.xp6(5),e.Q6J("ngIf",i.userForm.controls.LAST_NAME.errors&&i.userForm.controls.LAST_NAME.touched),e.xp6(6),e.Q6J("ngIf",i.userForm.controls.PHONE.errors&&i.userForm.controls.PHONE.touched),e.xp6(5),e.Q6J("ngIf",i.userForm.controls.EMAIL.errors&&i.userForm.controls.EMAIL.touched),e.xp6(6),e.Q6J("ngIf",i.userForm.controls.PHONE_OFFICE.errors&&i.userForm.controls.PHONE_OFFICE.touched),e.xp6(5),e.Q6J("ngIf",i.userForm.controls.POSITION.errors&&i.userForm.controls.POSITION.touched),e.xp6(6),e.Q6J("options",i.business)("selectedItemsLabel","{0} Empresas seleccionadas"),e.xp6(1),e.Q6J("ngIf",i.userForm.controls.BUSINESS.errors&&i.userForm.controls.BUSINESS.touched),e.xp6(7),e.Q6J("ngForOf",i.listRoles),e.xp6(1),e.Q6J("ngIf",i.userForm.controls.ROL.errors&&i.userForm.controls.ROL.touched),e.xp6(2),e.Q6J("ngForOf",i.userForm.value.BUSINESS),e.xp6(4),e.Q6J("disabled",i.userForm.invalid||i.saving))},dependencies:[h.mk,h.sg,h.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u,w.NU],styles:["[_nghost-%COMP%]{width:100%!important;padding:1%}.buttonRight[_ngcontent-%COMP%]{position:absolute;right:40px}[_nghost-%COMP%]     .p-multiselect{min-width:15rem;width:100%;border-radius:100px!important}[_nghost-%COMP%]     .p-multiselect .p-multiselect-label{padding:8px!important;border-radius:100px!important;border-color:red!important}"]}),s})();var Lt=p(9314),O=p(5861),I=p(574),Yt=p(371);function kt(s,a){if(1&s&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&s){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const jt=[{path:"",component:d.$,children:[{path:"home",component:g},{path:"profile",component:et},{path:"business",component:We},{path:"establishment",component:dt},{path:"users",component:Jt},{path:"declarations",component:(()=>{class s{constructor(t,i,o){var n=this;this.businesService=t,this.productorService=i,this.ratesService=o,this.datos=[],this.R_PapelCarton_NP=0,this.R_PapelCarton_P=0,this.R_PapelCarton_ST=0,this.R_Metal_NP=0,this.R_Metal_P=0,this.R_Metal_ST=0,this.R_Plastico_NP=0,this.R_Plastico_P=0,this.R_Plastico_ST=0,this.R_Madera_NP=0,this.R_Madera_P=0,this.R_Madera_ST=0,this.R_Total_Ton=0,this.R_Total_UF=0,this.NR_PapelCarton_NP=0,this.NR_PapelCarton_P=0,this.NR_PapelCarton_ST=0,this.NR_Metal_P=0,this.NR_Metal_NP=0,this.NR_Metal_ST=0,this.NR_Plastico_NP=0,this.NR_Plastico_P=0,this.NR_Plastico_ST=0,this.NR_Madera_NP=0,this.NR_Madera_P=0,this.NR_Madera_ST=0,this.NR_Compuestos_NP=0,this.NR_Compuestos_P=0,this.NR_Compuestos_ST=0,this.NR_Total_Ton=0,this.NR_Total_UF=0,this.RET_PapelCarton_NP=0,this.RET_PapelCarton_P=0,this.RET_PapelCarton_ST=0,this.RET_Metal_NP=0,this.RET_Metal_P=0,this.RET_Metal_ST=0,this.RET_Plastico_NP=0,this.RET_Plastico_P=0,this.RET_Plastico_ST=0,this.RET_Madera_NP=0,this.RET_Madera_P=0,this.RET_Madera_ST=0,this.RET_Total_Ton=0,this.RET_Total_UF=0,this.Total_EyE=0,this.Ajuste_PapelCarton_Reciclable_Ton=0,this.Ajuste_Metal_Reciclable_Ton=0,this.Ajuste_Plastico_Reciclable_Ton=0,this.Ajuste_No_Reciclables_Ton=0,this.Ajuste_Retornables_Ton=0,this.Ajuste_PapelCarton_Reciclable_UF=0,this.Ajuste_Metal_Reciclable_UF=0,this.Ajuste_Plastico_Reciclable_UF=0,this.Ajuste_No_Reciclables_UF=0,this.TotalCorregido=0,this.TotalBruto=0,this.TotalBruto_IVA=0,this.l_R_PapelCarton_NP=0,this.l_R_PapelCarton_P=0,this.l_R_PapelCarton_ST=0,this.l_R_Metal_NP=0,this.l_R_Metal_P=0,this.l_R_Metal_ST=0,this.l_R_Plastico_NP=0,this.l_R_Plastico_P=0,this.l_R_Plastico_ST=0,this.l_R_Madera_NP=0,this.l_R_Madera_P=0,this.l_R_Madera_ST=0,this.l_NR_PapelCarton_NP=0,this.l_NR_PapelCarton_P=0,this.l_NR_PapelCarton_ST=0,this.l_NR_Metal_P=0,this.l_NR_Metal_NP=0,this.l_NR_Metal_ST=0,this.l_NR_Plastico_NP=0,this.l_NR_Plastico_P=0,this.l_NR_Plastico_ST=0,this.l_NR_Madera_NP=0,this.l_NR_Madera_P=0,this.l_NR_Madera_ST=0,this.l_NR_Compuestos_NP=0,this.l_NR_Compuestos_P=0,this.l_NR_Compuestos_ST=0,this.l_RET_PapelCarton_NP=0,this.l_RET_PapelCarton_P=0,this.l_RET_PapelCarton_ST=0,this.l_RET_Metal_NP=0,this.l_RET_Metal_P=0,this.l_RET_Metal_ST=0,this.l_RET_Plastico_NP=0,this.l_RET_Plastico_P=0,this.l_RET_Plastico_ST=0,this.l_RET_Madera_NP=0,this.l_RET_Madera_P=0,this.l_RET_Madera_ST=0,this.years=[],this.selectedYear=-1,this.listBusiness=[],this.listStatements=[],this.filteredListBusiness=[],this.delay=r=>new Promise(m=>setTimeout(m,r)),this.generarExcel=function(){var r=(0,O.Z)(function*(m){try{const N=parseInt(document.getElementById("f_year").value),P=yield n.productorService.getAllStatementByYear(N).toPromise();if(P.status){c().fire({title:"Cargando Datos",text:"Se est\xe1 recuperando datos",timerProgressBar:!0,showConfirmButton:!1,allowEscapeKey:!1,allowOutsideClick:!1}),c().showLoading(),n.listStatements=P.data.res_business.sort((u,T)=>u.STATE===T.STATE?u.ID_BUSINESS-T.ID_BUSINESS:T.STATE-u.STATE),n.filteredListBusiness=n.listBusiness.filter(u=>!n.listStatements.some(T=>T.ID_BUSINESS===u.ID));const U=function(){var u=(0,O.Z)(function*(T){const[b,x,R]=yield Promise.all([n.productorService.getDetailByIdHeader(T.ID_HEADER).toPromise(),n.productorService.getValueStatementByYear(T.CODE_BUSINESS,N-1,0).toPromise(),n.productorService.getProductor(T.CREATED_BY).toPromise()]);return{f:b,lt:x,user:R}});return function(b){return u.apply(this,arguments)}}();for(const u of n.listStatements){const{f:T,lt:b,user:x}=yield U(u);if(b.status&&b.data.detail.forEach(R=>{n.setLastDeclaration(R)}),T.data.forEach(R=>{n.setDeclaration(R)}),u.STATE){n.calculoAjustes(u.UPDATED_AT,u.CODE_BUSINESS);const Kt=new Date(u.UPDATED_AT).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});n.datos.push({"ID empresa":u.CODE_BUSINESS,"Nombre empresa":u.NAME,"A\xf1o declaraci\xf3n":N.toString(),"Estado declaraci\xf3n":"Enviada","Fecha de env\xedo":Kt,Usuario:x.data.statements[0].FIRST_NAME+" "+x.data.statements[0].LAST_NAME,"R. Papel/cart\xf3n NP":n.setFormato(n.R_PapelCarton_NP),"R. Papel/cart\xf3n P":n.setFormato(n.R_PapelCarton_P),"R. Papel/cart\xf3n ST":n.setFormato(n.R_PapelCarton_ST),"R. Metal NP":n.setFormato(n.R_Metal_NP),"R. Metal P":n.setFormato(n.R_Metal_P),"R. Metal ST":n.setFormato(n.R_Metal_ST),"R. Pl\xe1stico NP":n.setFormato(n.R_Plastico_NP),"R. Pl\xe1stico P":n.setFormato(n.R_Plastico_P),"R. Pl\xe1stico ST":n.setFormato(n.R_Plastico_ST),"R. Madera NP":n.setFormato(n.R_Madera_NP),"R. Madera P":n.setFormato(n.R_Madera_P),"R. Madera ST":n.setFormato(n.R_Madera_ST),"R. Total Ton":n.setFormato(n.R_Total_Ton),"R. Total UF":n.setFormato(n.R_Total_UF),"NR. Papel/cart\xf3n NP":n.setFormato(n.NR_PapelCarton_NP),"NR. Papel/cart\xf3n P":n.setFormato(n.NR_PapelCarton_P),"NR. Papel/cart\xf3n ST":n.setFormato(n.NR_PapelCarton_ST),"NR. Metal NP":n.setFormato(n.NR_Metal_NP),"NR. Metal P":n.setFormato(n.NR_Metal_P),"NR. Metal ST":n.setFormato(n.NR_Metal_ST),"NR. Pl\xe1stico NP":n.setFormato(n.NR_Plastico_NP),"NR. Pl\xe1stico P":n.setFormato(n.NR_Plastico_P),"NR. Pl\xe1stico ST":n.setFormato(n.NR_Plastico_ST),"NR. Madera NP":n.setFormato(n.NR_Madera_NP),"NR. Madera P":n.setFormato(n.NR_Madera_P),"NR. Madera ST":n.setFormato(n.NR_Madera_ST),"NR. Compuestos NP":n.setFormato(n.NR_Compuestos_NP),"NR. Compuestos P":n.setFormato(n.NR_Compuestos_P),"NR. Compuestos ST":n.setFormato(n.NR_Compuestos_ST),"NR. Total Ton":n.setFormato(n.NR_Total_Ton),"NR. Total UF":n.setFormato(n.NR_Total_UF),"RET. Papel/cart\xf3n NP":n.setFormato(n.RET_PapelCarton_NP),"RET. Papel/cart\xf3n P":n.setFormato(n.RET_PapelCarton_P),"RET. Papel/cart\xf3n ST":n.setFormato(n.RET_PapelCarton_ST),"RET. Metal NP":n.setFormato(n.RET_Metal_NP),"RET. Metal P":n.setFormato(n.RET_Metal_P),"RET. Metal ST":n.setFormato(n.RET_Metal_ST),"RET. Pl\xe1stico NP":n.setFormato(n.RET_Plastico_NP),"RET. Pl\xe1stico P":n.setFormato(n.RET_Plastico_P),"RET. Pl\xe1stico ST":n.setFormato(n.RET_Plastico_ST),"RET. Madera NP":n.setFormato(n.RET_Madera_NP),"RET. Madera P":n.setFormato(n.RET_Madera_P),"RET. Madera ST":n.setFormato(n.RET_Madera_ST),"RET. Total Ton":n.setFormato(n.RET_Total_Ton),"RET. Total UF":n.setFormato(n.RET_Total_UF),"TOTAL EyE":n.setFormato(n.Total_EyE),"Ajuste Papel/Cart\xf3n Reciclable Ton":n.setFormato(n.Ajuste_PapelCarton_Reciclable_Ton),"Ajuste Metal Reciclable Ton":n.setFormato(n.Ajuste_Metal_Reciclable_Ton),"Ajuste Pl\xe1stico Reciclable Ton":n.setFormato(n.Ajuste_Plastico_Reciclable_Ton),"Ajuste No Reciclables Ton":n.setFormato(n.Ajuste_No_Reciclables_Ton),"Ajuste Retornables Ton":n.setFormato(n.Ajuste_Retornables_Ton),"Ajuste Papel/Cart\xf3n Reciclable UF":n.setFormato(n.Ajuste_PapelCarton_Reciclable_UF),"Ajuste Metal Reciclable UF":n.setFormato(n.Ajuste_Metal_Reciclable_UF),"Ajuste Pl\xe1stico Reciclable UF":n.setFormato(n.Ajuste_Plastico_Reciclable_UF),"Ajuste No Reciclables UF":n.setFormato(n.Ajuste_No_Reciclables_UF),"Total corregido (UF)":n.setFormato(n.TotalCorregido),"Total Neto (CLP)":n.setFormato(n.TotalBruto),"Total Bruto (CLP) + IVA":n.setFormato(n.TotalBruto_IVA)})}else n.datos.push({"ID empresa":u.CODE_BUSINESS,"Nombre empresa":u.NAME,"A\xf1o declaraci\xf3n":N.toString(),"Estado declaraci\xf3n":"Borrador","Fecha de env\xedo":"NA",Usuario:x.data.statements[0].FIRST_NAME+" "+x.data.statements[0].LAST_NAME,"R. Papel/cart\xf3n NP":"","R. Papel/cart\xf3n P":"","R. Papel/cart\xf3n ST":"","R. Metal NP":"","R. Metal P":"","R. Metal ST":"","R. Pl\xe1stico NP":"","R. Pl\xe1stico P":"","R. Pl\xe1stico ST":"","R. Madera NP":"","R. Madera P":"","R. Madera ST":"","R. Total Ton":"","R. Total UF":"","NR. Papel/cart\xf3n NP":"","NR. Papel/cart\xf3n P":"","NR. Papel/cart\xf3n ST":"","NR. Metal NP":"","NR. Metal P":"","NR. Metal ST":"","NR. Pl\xe1stico NP":"","NR. Pl\xe1stico P":"","NR. Pl\xe1stico ST":"","NR. Madera NP":"","NR. Madera P":"","NR. Madera ST":"","NR. Compuestos NP":"","NR. Compuestos P":"","NR. Compuestos ST":"","NR. Total Ton":"","NR. Total UF":"","RET. Papel/cart\xf3n NP":"","RET. Papel/cart\xf3n P":"","RET. Papel/cart\xf3n ST":"","RET. Metal NP":"","RET. Metal P":"","RET. Metal ST":"","RET. Pl\xe1stico NP":"","RET. Pl\xe1stico P":"","RET. Pl\xe1stico ST":"","RET. Madera NP":"","RET. Madera P":"","RET. Madera ST":"","RET. Total Ton":"","RET. Total UF":"","TOTAL EyE":"","Ajuste Papel/Cart\xf3n Reciclable Ton":"","Ajuste Metal Reciclable Ton":"","Ajuste Pl\xe1stico Reciclable Ton":"","Ajuste No Reciclables Ton":"","Ajuste Retornables Ton":"","Ajuste Papel/Cart\xf3n Reciclable UF":"","Ajuste Metal Reciclable UF":"","Ajuste Pl\xe1stico Reciclable UF":"","Ajuste No Reciclables UF":"","Total corregido (UF)":"","Total Neto (CLP)":"","Total Bruto (CLP) + IVA":""});n.resetDatos(),yield n.delay(25)}for(let u=0;u<n.filteredListBusiness.length;u++)n.datos.push({"ID empresa":n.filteredListBusiness[u].CODE_BUSINESS,"Nombre empresa":n.filteredListBusiness[u].NAME,"A\xf1o declaraci\xf3n":"","Estado declaraci\xf3n":"NA","Fecha de env\xedo":"NA",Usuario:"NA"});const Z=I.P6.book_new(),M=I.P6.json_to_sheet(n.datos);let v=[];for(let u=0;u<n.datos.length;u++){let T=Object.values(n.datos[u]);for(let b=0;b<T.length;b++)v[b]=30}var E=[];for(let u=0;u<v.length;u++)E.push({width:v[u]});M["!cols"]=E,I.P6.book_append_sheet(Z,M,"Datos"),I.NC(Z,`${m}_${N}.xlsx`),c().close(),n.datos=[]}else c().fire({title:"\xa1Ups!",icon:"warning",text:"No se encuentran declaraciones asociadas al a\xf1o seleccionado.",showConfirmButton:!0})}catch(N){c().fire({title:"\xa1Ups!",icon:"error",text:"Ha sucedido un error al generar el archivo Excel, por favor pruebe de nuevo en unos minutos. Si el problema persiste p\xf3ngase en contacto con administraci\xf3n.",showConfirmButton:!0}),console.log(N)}});return function(m){return r.apply(this,arguments)}}();const _=(new Date).getFullYear();for(let r=1900;r<=_+1;r++)this.years.push(r)}ngOnInit(){this.userData=JSON.parse(sessionStorage.getItem("user")),this.getAllBusiness(),this.ratesService.getCLP.subscribe({next:t=>{this.rates=t.data},error:t=>{c().close(),c().fire({title:"\xa1Ups!",icon:"error",text:"No se logr\xf3 obtener el valor de la UF",showConfirmButton:!0}),console.log(t)}}),this.ratesService.getUF.subscribe({next:t=>{this.ratesUF=t.data},error:t=>{c().close(),c().fire({title:"\xa1Ups!",icon:"error",text:"No se logr\xf3 obtener el valor de la UF",showConfirmButton:!0}),console.log(t)}})}getAllBusiness(){this.businesService.getAllBusiness().subscribe({next:t=>{this.listBusiness=t.status},error:t=>{c().close(),c().fire({icon:"error",text:t.msg,title:"\xa1Ups!"})}})}onYearSelected(){console.log("A\xf1o seleccionado:",this.selectedYear)}loadStatements(t){this.productorService.getAllStatementByYear(t).subscribe(i=>{i.status&&(this.listStatements=i.data.res_business.sort((o,n)=>o.STATE===n.STATE?o.ID_BUSINESS-n.ID_BUSINESS:n.STATE-o.STATE),this.filteredListBusiness=this.listBusiness.filter(o=>!this.listStatements.some(n=>n.ID_BUSINESS===o.ID)))})}setFormato(t){const i="string"==typeof t?parseFloat(t.replace(/,/g,"")):t,o=Math.round(100*i)/100,[n,_]=o.toString().split("."),r=n.replace(/\B(?=(\d{3})+(?!\d))/g,".");return _&&"0"!==_?`${r},${_.padEnd(2,"0")}`:r}setDeclaration(t){const{RECYCLABILITY:i,TYPE_RESIDUE:o,HAZARD:n,PRECEDENCE:_,VALUE:r,AMOUNT:m}=t;1==i?(1==o?1==n?1==_?this.R_PapelCarton_P=r:this.R_PapelCarton_ST=r:this.R_PapelCarton_NP=r:2==o?1==n?1==_?this.R_Metal_P=r:this.R_Metal_ST=r:this.R_Metal_NP=r:3==o?1==n?1==_?this.R_Plastico_P=r:this.R_Plastico_ST=r:this.R_Plastico_NP=r:4==o&&(1==n?1==_?this.R_Madera_P=r:this.R_Madera_ST=r:this.R_Madera_NP=r),this.R_Total_Ton+=r,this.R_Total_UF+=m):2==i?(1==o?1==n?1==_?this.NR_PapelCarton_P=r:this.NR_PapelCarton_ST=r:this.NR_PapelCarton_NP=r:2==o?1==n?1==_?this.NR_Metal_P=r:this.NR_Metal_ST=r:this.NR_Metal_NP=r:3==o?1==n?1==_?this.NR_Plastico_P=r:this.NR_Plastico_ST=r:this.NR_Plastico_NP=r:4==o?1==n?1==_?this.NR_Madera_P=r:this.NR_Madera_ST=r:this.NR_Madera_NP=r:5==o&&(1==n?1==_?this.NR_Compuestos_P=r:this.NR_Compuestos_ST=r:this.NR_Compuestos_NP=r),this.NR_Total_Ton+=r,this.NR_Total_UF+=m):(1==o?1==n?1==_?this.RET_PapelCarton_P=r:this.RET_PapelCarton_ST=r:this.RET_PapelCarton_NP=r:2==o?1==n?1==_?this.RET_Metal_P=r:this.RET_Metal_ST=r:this.RET_Metal_NP=r:3==o?1==n?1==_?this.RET_Plastico_P=r:this.RET_Plastico_ST=r:this.RET_Plastico_NP=r:4==o&&(1==n?1==_?this.RET_Madera_P=r:this.RET_Madera_ST=r:this.RET_Madera_NP=r),this.RET_Total_Ton+=r,this.RET_Total_UF+=m)}setLastDeclaration(t){const{RECYCLABILITY:i,TYPE_RESIDUE:o,HAZARD:n,PRECEDENCE:_,VALUE:r}=t;1==i?1==o?1==n?1==_?this.l_R_PapelCarton_P=r:this.l_R_PapelCarton_ST=r:this.l_R_PapelCarton_NP=r:2==o?1==n?1==_?this.l_R_Metal_P=r:this.l_R_Metal_ST=r:this.l_R_Metal_NP=r:3==o?1==n?1==_?this.l_R_Plastico_P=r:this.l_R_Plastico_ST=r:this.l_R_Plastico_NP=r:4==o&&(1==n?1==_?this.l_R_Madera_P=r:this.l_R_Madera_ST=r:this.l_R_Madera_NP=r):2==i?1==o?1==n?1==_?this.l_NR_PapelCarton_P=r:this.l_NR_PapelCarton_ST=r:this.l_NR_PapelCarton_NP=r:2==o?1==n?1==_?this.l_NR_Metal_P=r:this.l_NR_Metal_ST=r:this.l_NR_Metal_NP=r:3==o?1==n?1==_?this.l_NR_Plastico_P=r:this.l_NR_Plastico_ST=r:this.l_NR_Plastico_NP=r:4==o?1==n?1==_?this.l_NR_Madera_P=r:this.l_NR_Madera_ST=r:this.l_NR_Madera_NP=r:5==o&&(1==n?1==_?this.l_NR_Compuestos_P=r:this.l_NR_Compuestos_ST=r:this.l_NR_Compuestos_NP=r):1==o?1==n?1==_?this.l_RET_PapelCarton_P=r:this.l_RET_PapelCarton_ST=r:this.l_RET_PapelCarton_NP=r:2==o?1==n?1==_?this.l_RET_Metal_P=r:this.l_RET_Metal_ST=r:this.l_RET_Metal_NP=r:3==o?1==n?1==_?this.l_RET_Plastico_P=r:this.l_RET_Plastico_ST=r:this.l_RET_Plastico_NP=r:4==o&&(1==n?1==_?this.l_RET_Madera_P=r:this.l_RET_Madera_ST=r:this.l_RET_Madera_NP=r)}resetDatos(){this.R_PapelCarton_NP=0,this.R_PapelCarton_P=0,this.R_PapelCarton_ST=0,this.R_Metal_NP=0,this.R_Metal_P=0,this.R_Metal_ST=0,this.R_Plastico_NP=0,this.R_Plastico_P=0,this.R_Plastico_ST=0,this.R_Madera_NP=0,this.R_Madera_P=0,this.R_Madera_ST=0,this.R_Total_Ton=0,this.R_Total_UF=0,this.NR_PapelCarton_NP=0,this.NR_PapelCarton_P=0,this.NR_PapelCarton_ST=0,this.NR_Metal_P=0,this.NR_Metal_NP=0,this.NR_Metal_ST=0,this.NR_Plastico_NP=0,this.NR_Plastico_P=0,this.NR_Plastico_ST=0,this.NR_Madera_NP=0,this.NR_Madera_P=0,this.NR_Madera_ST=0,this.NR_Compuestos_NP=0,this.NR_Compuestos_P=0,this.NR_Compuestos_ST=0,this.NR_Total_Ton=0,this.NR_Total_UF=0,this.RET_PapelCarton_NP=0,this.RET_PapelCarton_P=0,this.RET_PapelCarton_ST=0,this.RET_Metal_NP=0,this.RET_Metal_P=0,this.RET_Metal_ST=0,this.RET_Plastico_NP=0,this.RET_Plastico_P=0,this.RET_Plastico_ST=0,this.RET_Madera_NP=0,this.RET_Madera_P=0,this.RET_Madera_ST=0,this.RET_Total_Ton=0,this.RET_Total_UF=0,this.l_R_PapelCarton_NP=0,this.l_R_PapelCarton_P=0,this.l_R_PapelCarton_ST=0,this.l_R_Metal_NP=0,this.l_R_Metal_P=0,this.l_R_Metal_ST=0,this.l_R_Plastico_NP=0,this.l_R_Plastico_P=0,this.l_R_Plastico_ST=0,this.l_R_Madera_NP=0,this.l_R_Madera_P=0,this.l_R_Madera_ST=0,this.l_NR_PapelCarton_NP=0,this.l_NR_PapelCarton_P=0,this.l_NR_PapelCarton_ST=0,this.l_NR_Metal_P=0,this.l_NR_Metal_NP=0,this.l_NR_Metal_ST=0,this.l_NR_Plastico_NP=0,this.l_NR_Plastico_P=0,this.l_NR_Plastico_ST=0,this.l_NR_Madera_NP=0,this.l_NR_Madera_P=0,this.l_NR_Madera_ST=0,this.l_NR_Compuestos_NP=0,this.l_NR_Compuestos_P=0,this.l_NR_Compuestos_ST=0,this.l_RET_PapelCarton_NP=0,this.l_RET_PapelCarton_P=0,this.l_RET_PapelCarton_ST=0,this.l_RET_Metal_NP=0,this.l_RET_Metal_P=0,this.l_RET_Metal_ST=0,this.l_RET_Plastico_NP=0,this.l_RET_Plastico_P=0,this.l_RET_Plastico_ST=0,this.l_RET_Madera_NP=0,this.l_RET_Madera_P=0,this.l_RET_Madera_ST=0,this.Ajuste_PapelCarton_Reciclable_Ton=0,this.Ajuste_Metal_Reciclable_Ton=0,this.Ajuste_Plastico_Reciclable_Ton=0,this.Ajuste_No_Reciclables_Ton=0,this.Ajuste_Retornables_Ton=0,this.Ajuste_PapelCarton_Reciclable_UF=0,this.Ajuste_Metal_Reciclable_UF=0,this.Ajuste_Plastico_Reciclable_UF=0,this.Ajuste_No_Reciclables_UF=0,this.Total_EyE=0,this.TotalCorregido=0,this.TotalBruto=0,this.TotalBruto_IVA=0}calculoAjustes(t,i){var o=this;return(0,O.Z)(function*(){const n=new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-");o.ratesService.getUfDate(n).subscribe(N=>{o.ratesUF=N.data}),o.l_R_PapelCarton_P+o.l_R_PapelCarton_ST+o.l_R_PapelCarton_NP!=0&&(o.Ajuste_PapelCarton_Reciclable_Ton=o.R_PapelCarton_P+o.R_PapelCarton_ST+o.R_PapelCarton_NP-(o.l_R_PapelCarton_P+o.l_R_PapelCarton_ST+o.l_R_PapelCarton_NP)),o.l_R_Metal_P+o.l_R_Metal_ST+o.l_R_Metal_NP!=0&&(o.Ajuste_Metal_Reciclable_Ton=o.R_Metal_P+o.R_Metal_ST+o.R_Metal_NP-(o.l_R_Metal_P+o.l_R_Metal_ST+o.l_R_Metal_NP)),o.l_R_Plastico_P+o.l_R_Plastico_ST+o.l_R_Plastico_NP!=0&&(o.Ajuste_Plastico_Reciclable_Ton=o.R_Plastico_P+o.R_Plastico_ST+o.R_Plastico_NP-(o.l_R_Plastico_P+o.l_R_Plastico_ST+o.l_R_Plastico_NP)),o.l_NR_PapelCarton_P+o.l_NR_PapelCarton_ST+o.l_NR_PapelCarton_NP+o.l_NR_Metal_P+o.l_NR_Metal_ST+o.l_NR_Metal_NP+o.l_NR_Plastico_P+o.l_NR_Plastico_ST+o.l_NR_Plastico_NP+o.l_NR_Compuestos_P+o.l_NR_Compuestos_ST+o.l_NR_Compuestos_NP!=0&&(o.Ajuste_No_Reciclables_Ton=o.NR_PapelCarton_P+o.NR_PapelCarton_ST+o.NR_PapelCarton_NP+o.NR_Metal_P+o.NR_Metal_ST+o.NR_Metal_NP+o.NR_Plastico_P+o.NR_Plastico_ST+o.NR_Plastico_NP+o.NR_Compuestos_P+o.NR_Compuestos_ST+o.NR_Compuestos_NP-(o.l_NR_PapelCarton_P+o.l_NR_PapelCarton_ST+o.l_NR_PapelCarton_NP+o.l_NR_Metal_P+o.l_NR_Metal_ST+o.l_NR_Metal_NP+o.l_NR_Plastico_P+o.l_NR_Plastico_ST+o.l_NR_Plastico_NP+o.l_NR_Compuestos_P+o.l_NR_Compuestos_ST+o.l_NR_Compuestos_NP)),o.l_RET_PapelCarton_P+o.l_RET_PapelCarton_ST+o.l_RET_PapelCarton_NP+o.l_RET_Metal_P+o.l_RET_Metal_ST+o.l_RET_Metal_NP+o.l_RET_Plastico_P+o.l_RET_Plastico_ST+o.l_RET_Plastico_NP+o.l_RET_Madera_P+o.l_RET_Madera_ST+o.l_RET_Madera_NP!=0&&(o.Ajuste_Retornables_Ton=o.RET_PapelCarton_P+o.RET_PapelCarton_ST+o.RET_PapelCarton_NP+o.RET_Metal_P+o.RET_Metal_ST+o.RET_Metal_NP+o.RET_Plastico_P+o.RET_Plastico_ST+o.RET_Plastico_NP+o.RET_Madera_P+o.RET_Madera_ST+o.RET_Madera_NP-(o.l_RET_PapelCarton_P+o.l_RET_PapelCarton_ST+o.l_RET_PapelCarton_NP+o.l_RET_Metal_P+o.l_RET_Metal_ST+o.l_RET_Metal_NP+o.l_RET_Plastico_P+o.l_RET_Plastico_ST+o.l_RET_Plastico_NP+o.l_RET_Madera_P+o.l_RET_Madera_ST+o.l_RET_Madera_NP)),o.Total_EyE=o.R_Total_Ton+o.NR_Total_Ton-(o.R_Madera_P+o.R_Madera_NP+o.R_Madera_ST+o.NR_Madera_P+o.NR_Madera_NP+o.NR_Madera_ST),o.Ajuste_PapelCarton_Reciclable_UF=(o.Ajuste_PapelCarton_Reciclable_Ton*o.rates[0].price).toFixed(2),o.Ajuste_Metal_Reciclable_UF=(o.Ajuste_Metal_Reciclable_Ton*o.rates[1].price).toFixed(2),o.Ajuste_Plastico_Reciclable_UF=(o.Ajuste_Plastico_Reciclable_Ton*o.rates[2].price).toFixed(2),o.Ajuste_No_Reciclables_UF=(o.Ajuste_No_Reciclables_Ton*o.rates[3].price).toFixed(2);const _=o.rates[0].price*parseFloat(o.R_PapelCarton_P+o.R_PapelCarton_ST+o.R_PapelCarton_NP),r=o.rates[1].price*parseFloat(o.R_Metal_P+o.R_Metal_ST+o.R_Metal_NP),m=o.rates[2].price*parseFloat(o.R_Plastico_P+o.R_Plastico_ST+o.R_Plastico_NP),E=o.rates[3].price*parseFloat(o.NR_PapelCarton_P+o.NR_PapelCarton_ST+o.NR_PapelCarton_NP+o.NR_Metal_P+o.NR_Metal_ST+o.NR_Metal_NP+o.NR_Plastico_P+o.NR_Plastico_ST+o.NR_Plastico_NP+o.NR_Compuestos_P+o.NR_Compuestos_ST+o.NR_Compuestos_NP);o.TotalCorregido=(_+parseFloat(o.Ajuste_PapelCarton_Reciclable_UF)+(r+parseFloat(o.Ajuste_Metal_Reciclable_UF))+(m+parseFloat(o.Ajuste_Plastico_Reciclable_UF))+(E+parseFloat(o.Ajuste_No_Reciclables_UF))).toFixed(2),o.TotalBruto=(parseFloat(o.TotalCorregido)*o.ratesUF).toFixed(0),o.TotalBruto_IVA=(parseFloat(o.TotalCorregido)*o.ratesUF*1.19).toFixed(0)})()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(C.m),e.Y36(Yt.u),e.Y36(f.z))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-maintainer-declarations-productor"]],decls:28,vars:3,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",1,"breadcrumbs","d-none","d-lg-block"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-hidden","true",1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"declaracion"],[1,"d-sm-flex","justify-content-between","mb-3","mb-md-0"],[1,"box","box-form","mb-4"],[1,"row","align-items-end"],[1,"col-12","col-xl-8","mb-5","mb-xl-0"],[1,"form-label"],[1,"input-group"],["id","f_year",1,"form-select","col-12","w-100",3,"ngModel","ngModelChange"],["value","-1","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-xl-4","mb-3","mb-xl-0"],[1,"row"],[1,"col-12"],[1,"btn","btn-primary","col-12","btn-lg",3,"disabled","click"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._UZ(5,"i",5),e._uU(6," Inicio"),e.qZA()(),e.TgZ(7,"li",6),e._uU(8,"Declaraciones productores"),e.qZA()()(),e.TgZ(9,"section",7)(10,"h1"),e._uU(11,"Declaraciones productores"),e.qZA(),e._UZ(12,"div",8),e.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),e._uU(17,"A\xf1o:"),e.qZA(),e.TgZ(18,"div",13)(19,"select",14),e.NdJ("ngModelChange",function(n){return i.selectedYear=n}),e.TgZ(20,"option",15),e._uU(21,"Seleccionar a\xf1o de declaraci\xf3n"),e.qZA(),e.YNc(22,kt,2,2,"option",16),e.qZA()()(),e.TgZ(23,"div",17)(24,"div",18)(25,"div",19)(26,"button",20),e.NdJ("click",function(){return i.generarExcel("Declaraciones_productores")}),e._uU(27," Generar Excel "),e.qZA()()()()()()()()),2&t&&(e.xp6(19),e.Q6J("ngModel",i.selectedYear),e.xp6(3),e.Q6J("ngForOf",i.years),e.xp6(4),e.Q6J("disabled",-1===i.selectedYear||"-1"===i.selectedYear.toString()))},dependencies:[h.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On],styles:["[_nghost-%COMP%]{width:40%!important;padding:1%}"]}),s})()},{path:"faq",component:Lt.v},{path:"**",redirectTo:"home",pathMatch:"full"}]}];let Ht=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[S.Bz.forChild(jt),S.Bz]}),s})();var Gt=p(4466);let Vt=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.ez,Ht,l.u5,l.UX,w.q4,Gt.m]}),s})()},3224:D=>{function A(d){return"string"==typeof d?d.replace(/^0+|[^0-9kK]+/g,"").toUpperCase():""}D.exports={validate:function p(d){if("string"!=typeof d||/^0+/.test(d)||!/^0*(\d{1,3}(\.?\d{3})*)-?([\dkK])$/.test(d))return!1;d=A(d);let e=parseInt(d.slice(0,-1),10),f=0,g=1;for(;e>0;)g=(g+e%10*(9-f++%6))%11,e=Math.floor(e/10);return(g>0?""+(g-1):"K")===d.slice(-1)},clean:A,format:function h(d,e={dots:!0}){let f;if(d=A(d),e.dots){f=d.slice(-4,-1)+"-"+d.substr(d.length-1);for(let g=4;g<d.length;g+=3)f=d.slice(-3-g,-g)+"."+f}else f=d.slice(0,-1)+"-"+d.substr(d.length-1);return f},getCheckDigit:function S(d){const e=Array.from(A(d),Number);if(0===e.length||e.includes(NaN))throw new Error(`"${d}" as RUT is invalid`);const q=11-e.reverse().reduce((c,F,C)=>c+F*(C%6+2),0)%11;return 10===q?"K":11===q?"0":q.toString()}}}}]);